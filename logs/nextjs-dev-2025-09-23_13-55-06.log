
> my-v0-project@0.1.0 dev /Users/jacob/Desktop/vidfab
> next dev

   â–² Next.js 15.2.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.10.24:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1467ms
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 1081ms (552 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 1615ms
 â—‹ Compiling /middleware ...
 âœ“ Compiled /middleware in 516ms (333 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 â—‹ Compiling /create ...
 âœ“ Compiled /create in 4s (1404 modules)
 GET /create?tool=video-effects 200 in 4359ms
 âœ“ Compiled in 349ms (587 modules)
 â—‹ Compiling /api/images/upload ...
 âœ“ Compiled /api/images/upload in 756ms (1394 modules)
Error: Route "/api/images/upload" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
Error: Route "/api/images/upload" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 POST /api/images/upload 200 in 2678ms
 â—‹ Compiling /api/video/effects ...
 âœ“ Compiled /api/video/effects in 641ms (1396 modules)
Error: Route "/api/video/effects" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/effects/route.ts:32:30)
  30 |
  31 |     // Verify user authentication status
> 32 |     const session = await auth()
     |                              ^
  33 |
  34 |     console.log('ğŸ” Auth check for video effects:', {
  35 |       hasSession: !!session,
Error: Route "/api/video/effects" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/effects/route.ts:32:30)
  30 |
  31 |     // Verify user authentication status
> 32 |     const session = await auth()
     |                              ^
  33 |
  34 |     console.log('ğŸ” Auth check for video effects:', {
  35 |       hasSession: !!session,
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ” Auth check for video effects: {
  hasSession: true,
  hasUser: true,
  userUuid: '66f306c4-bac8-4f29-a3cf-554ffe871e86',
  userEmail: 'jsdasww593@gmail.com',
  sessionKeys: [ 'user', 'expires' ],
  userKeys: [ 'name', 'email', 'uuid', 'nickname', 'avatar_url', 'created_at' ]
}
ğŸ¬ Video effects generation request: {
  effectId: 'body-shake',
  effectName: 'Body Shake',
  hasImage: true,
  userId: '66f306c4-bac8-4f29-a3cf-554ffe871e86'
}
ğŸŒŠ Calling Wavespeed Video Effects API: {
  url: 'https://api.wavespeed.ai/api/v3/video-effects/body-shake',
  effectId: 'body-shake',
  hasImage: true
}
ğŸŒŠ Wavespeed Video Effects API response: {
  status: 200,
  hasRequestId: true,
  requestId: 'f9346bc49c59445a83bd16adb7282a8c',
  error: undefined,
  effectId: 'body-shake'
}
âœ… Video effects generation submitted: {
  requestId: 'f9346bc49c59445a83bd16adb7282a8c',
  effectId: 'body-shake',
  userId: '66f306c4-bac8-4f29-a3cf-554ffe871e86'
}
 POST /api/video/effects 200 in 1763ms
 âœ“ Compiled /api/video/status/[requestId] in 393ms (1400 modules)
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 1097ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 187ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 200ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 63ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 188ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 191ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 211ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 199ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 188ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 213ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 189ms
ğŸ” Checking status for request f9346bc49c59445a83bd16adb7282a8c
ğŸ“Š Status check for f9346bc49c59445a83bd16adb7282a8c: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for f9346bc49c59445a83bd16adb7282a8c: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/f9346bc49c59445a83bd16adb7282a8c/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/f9346bc49c59445a83bd16adb7282a8c 200 in 201ms
 âœ“ Compiled /api/video/store in 495ms (1404 modules)
ğŸ”„ Internal storage call for user: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ¬ Starting internal video storage for user: 66f306c4-bac8-4f29-a3cf-554ffe871e86 {
  wavespeedRequestId: 'f9346bc49c59445a83bd16adb7282a8c',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/f9346bc49c59445a83bd16adb7282a8c/1.mp4...',
  settings: {
    generationType: 'video-effects',
    image: 'https://ycahbhhuzgixfrljtqmi.supabase.co/storage/v1/object/public/user-images/images/66f306c4-bac8-4f29-a3cf-554ffe871e86/0080e51d-d72a-4170-b6af-d8f04d0df4a2.webp',
    effectId: 'body-shake',
    effectName: 'Body Shake',
    prompt: 'Body Shake Effect'
  }
}
ğŸ¬ Starting video storage for user: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ”„ Using force method to create user and video: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ”„ Force creating user and video with delays: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ”§ Attempting to create user: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ” User creation error details: {
  code: '23505',
  message: 'duplicate key value violates unique constraint "users_pkey"',
  details: 'Key (uuid)=(66f306c4-bac8-4f29-a3cf-554ffe871e86) already exists.',
  hint: null
}
âœ… User already exists (expected): 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ” Starting user verification for: 66f306c4-bac8-4f29-a3cf-554ffe871e86
ğŸ” Verification attempt 1/5 for user: 66f306c4-bac8-4f29-a3cf-554ffe871e86
âœ… User verified exists on attempt 1: {
  uuid: '66f306c4-bac8-4f29-a3cf-554ffe871e86',
  email: 'jsdasww593@gmail.com',
  created_at: '2025-09-23T05:47:25.934+00:00',
  is_active: true
}
âœ… User verified exists on attempt 1: {
  uuid: '66f306c4-bac8-4f29-a3cf-554ffe871e86',
  email: 'jsdasww593@gmail.com',
  created_at: '2025-09-23T05:47:25.934+00:00',
  is_active: true
}
ğŸ¯ Using raw SQL to bypass foreign key constraints...
âš ï¸ Database function not available, using direct insert...
ğŸ’¡ Creating temporary video record for frontend...
âœ… Temporary video record created: 00000000-0000-4000-8000-758606968480
âœ¨ Created video record: 00000000-0000-4000-8000-758606968480
âš ï¸ Skipping database update for temporary video record
âœ… Video storage completed for user: 66f306c4-bac8-4f29-a3cf-554ffe871e86
 POST /api/video/store 200 in 3975ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 64ms
 GET /create?tool=text-to-video 200 in 54ms
 GET /create?tool=image-to-video 200 in 12ms
 GET /create?tool=text-to-video 200 in 12ms
 âœ“ Compiled in 558ms (587 modules)
 âœ“ Compiled in 184ms (587 modules)
 âœ“ Compiled in 169ms (587 modules)
 âœ“ Compiled in 348ms (587 modules)
 âœ“ Compiled in 257ms (587 modules)
 âœ“ Compiled in 330ms (587 modules)
 âœ“ Compiled in 288ms (587 modules)
 âœ“ Compiled in 388ms (587 modules)
 âœ“ Compiled in 209ms (587 modules)
 âœ“ Compiled in 250ms (587 modules)
 âœ“ Compiled in 251ms (587 modules)
 âœ“ Compiled /api/auth/[...nextauth] in 267ms (276 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 581ms
[?25h
