
> my-v0-project@0.1.0 dev /Users/jacob/Desktop/vidfab
> next dev

   â–² Next.js 15.2.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.50.96:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 2.8s
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 1233ms (552 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 1824ms
 âœ“ Compiled /middleware in 413ms (333 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 â—‹ Compiling /create ...
 âœ“ Compiled /create in 3s (1404 modules)
 GET /create?tool=video-effects 200 in 3243ms
 âœ“ Compiled in 343ms (587 modules)
 GET /create?tool=image-to-video 200 in 14ms
 GET /create?tool=discover 200 in 15ms
 GET /create?tool=text-to-video 200 in 14ms
 GET /create?tool=video-effects 200 in 17ms
 GET /create?tool=image-to-video 200 in 35ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 100ms
 GET /create?tool=discover 200 in 17ms
 GET /create?tool=text-to-video 200 in 14ms
 â—‹ Compiling /api/video/generate ...
 âœ“ Compiled /api/video/generate in 667ms (1394 modules)
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ” Video generation request body: {
  prompt: '"ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®..."',
  promptLength: 8,
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  aspectRatio: '16:9',
  hasImage: false,
  imageType: 'MISSING'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®...',
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  generationType: 'text-to-video',
  hasImage: false
}
ğŸš€ Submitting text-to-video request to bytedance (seedance-v1-pro-t2v-480p): {
  endpoint: '/bytedance/seedance-v1-pro-t2v-480p',
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®',
  duration: 5,
  camera_fixed: false,
  seed: -1,
  aspect_ratio: '16:9',
  image: undefined
}
âœ… text-to-video generation submitted successfully. Request ID: f09b0848688b48488d76b2aee7a90fd9
 POST /api/video/generate 200 in 3350ms
 âœ“ Compiled /api/video/status/[requestId] in 190ms (1396 modules)
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 888ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 210ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 193ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 39ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 232ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 209ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 207ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 200ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 200ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 202ms
ğŸ” Checking status for request f09b0848688b48488d76b2aee7a90fd9
ğŸ“Š Status check for f09b0848688b48488d76b2aee7a90fd9: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for f09b0848688b48488d76b2aee7a90fd9: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/f09b0848688b48488d76b2aee7a90fd9/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/f09b0848688b48488d76b2aee7a90fd9 200 in 201ms
 âœ“ Compiled /api/video/store in 322ms (1400 modules)
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: 'f09b0848688b48488d76b2aee7a90fd9',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/f09b0848688b48488d76b2aee7a90fd9/1.mp4...',
  settings: {
    model: 'vidu-q1',
    duration: '5',
    resolution: '480p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'text-to-video',
    prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 4995ms
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ” Video generation request body: {
  prompt: '"ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®2..."',
  promptLength: 9,
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  aspectRatio: '16:9',
  hasImage: false,
  imageType: 'MISSING'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®2...',
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  generationType: 'text-to-video',
  hasImage: false
}
ğŸš€ Submitting text-to-video request to bytedance (seedance-v1-pro-t2v-480p): {
  endpoint: '/bytedance/seedance-v1-pro-t2v-480p',
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®2',
  duration: 5,
  camera_fixed: false,
  seed: -1,
  aspect_ratio: '16:9',
  image: undefined
}
âœ… text-to-video generation submitted successfully. Request ID: dc423cb594e84996931e451913a57019
 POST /api/video/generate 200 in 977ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 209ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 191ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 194ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 791ms
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
ğŸ” Video generation request body: {
  prompt: '"ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®3..."',
  promptLength: 9,
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  aspectRatio: '16:9',
  hasImage: false,
  imageType: 'MISSING'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®3...',
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  generationType: 'text-to-video',
  hasImage: false
}
ğŸš€ Submitting text-to-video request to bytedance (seedance-v1-pro-t2v-480p): {
  endpoint: '/bytedance/seedance-v1-pro-t2v-480p',
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®3',
  duration: 5,
  camera_fixed: false,
  seed: -1,
  aspect_ratio: '16:9',
  image: undefined
}
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 189ms
âœ… text-to-video generation submitted successfully. Request ID: 9f43f599543a4a7cb42e9895709a94de
 POST /api/video/generate 200 in 287ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 185ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 186ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 598ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 208ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 209ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 188ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 596ms
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
ğŸ” Video generation request body: {
  prompt: '"ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®4..."',
  promptLength: 9,
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  aspectRatio: '16:9',
  hasImage: false,
  imageType: 'MISSING'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®4...',
  model: 'vidu-q1',
  resolution: '480p',
  duration: 5,
  generationType: 'text-to-video',
  hasImage: false
}
ğŸš€ Submitting text-to-video request to bytedance (seedance-v1-pro-t2v-480p): {
  endpoint: '/bytedance/seedance-v1-pro-t2v-480p',
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®4',
  duration: 5,
  camera_fixed: false,
  seed: -1,
  aspect_ratio: '16:9',
  image: undefined
}
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 187ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 193ms
âœ… text-to-video generation submitted successfully. Request ID: 4a4d389c448642a7b8ae74861dcce7c6
 POST /api/video/generate 200 in 283ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 198ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 184ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 186ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 191ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 609ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 199ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 200ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 203ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 200ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 201ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 207ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 192ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 192ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 194ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 201ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 204ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 206ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 207ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 209ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 210ms
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 198ms
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 203ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 207ms
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request dc423cb594e84996931e451913a57019
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 190ms
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 187ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 194ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 665ms
ğŸ“Š Status check for dc423cb594e84996931e451913a57019: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for dc423cb594e84996931e451913a57019: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/dc423cb594e84996931e451913a57019/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/dc423cb594e84996931e451913a57019 200 in 725ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 734ms
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: 'dc423cb594e84996931e451913a57019',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/dc423cb594e84996931e451913a57019/1.mp4...',
  settings: {
    model: 'vidu-q1',
    duration: '5',
    resolution: '480p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'text-to-video',
    prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®2'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 193ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 193ms
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 2935ms
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 196ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 196ms
ğŸ” Checking status for request 9f43f599543a4a7cb42e9895709a94de
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 9f43f599543a4a7cb42e9895709a94de: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for 9f43f599543a4a7cb42e9895709a94de: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/9f43f599543a4a7cb42e9895709a94de/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/9f43f599543a4a7cb42e9895709a94de 200 in 202ms
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 202ms
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: '9f43f599543a4a7cb42e9895709a94de',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/9f43f599543a4a7cb42e9895709a94de/1.mp4...',
  settings: {
    model: 'vidu-q1',
    duration: '5',
    resolution: '480p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'text-to-video',
    prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®3'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 209ms
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 2515ms
ğŸ” Checking status for request 4a4d389c448642a7b8ae74861dcce7c6
ğŸ“Š Status check for 4a4d389c448642a7b8ae74861dcce7c6: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for 4a4d389c448642a7b8ae74861dcce7c6: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/4a4d389c448642a7b8ae74861dcce7c6/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/4a4d389c448642a7b8ae74861dcce7c6 200 in 194ms
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: '4a4d389c448642a7b8ae74861dcce7c6',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/4a4d389c448642a7b8ae74861dcce7c6/1.mp4...',
  settings: {
    model: 'vidu-q1',
    duration: '5',
    resolution: '480p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'text-to-video',
    prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®4'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 2159ms
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
ğŸ” Video generation request body: {
  prompt: '"ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®5..."',
  promptLength: 9,
  model: 'vidfab-pro',
  resolution: '720p',
  duration: 8,
  aspectRatio: '16:9',
  hasImage: false,
  imageType: 'MISSING'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®5...',
  model: 'vidfab-pro',
  resolution: '720p',
  duration: 8,
  generationType: 'text-to-video',
  hasImage: false
}
ğŸš€ Submitting text-to-video request to veo3 (veo3-fast-t2v): {
  endpoint: '/google/veo3-fast',
  prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®5',
  aspect_ratio: '16:9',
  duration: 8,
  resolution: '720p',
  generate_audio: true,
  image: undefined
}
âœ… text-to-video generation submitted successfully. Request ID: 27bfd689a8ce4f0d9a36533a35860196
 POST /api/video/generate 200 in 774ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 185ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 187ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 189ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 183ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 184ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 214ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 213ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 192ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 186ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 187ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 184ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 185ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 187ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 183ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 186ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 190ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 187ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 189ms
ğŸ” Checking status for request 27bfd689a8ce4f0d9a36533a35860196
ğŸ“Š Status check for 27bfd689a8ce4f0d9a36533a35860196: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for 27bfd689a8ce4f0d9a36533a35860196: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/27bfd689a8ce4f0d9a36533a35860196/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/27bfd689a8ce4f0d9a36533a35860196 200 in 215ms
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: '27bfd689a8ce4f0d9a36533a35860196',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/27bfd689a8ce4f0d9a36533a35860196/1.mp4...',
  settings: {
    model: 'vidfab-pro',
    duration: '8',
    resolution: '720p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'text-to-video',
    prompt: 'ç”Ÿæˆä¸€ä¸ªæµ·ç»µå®å®5'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 3561ms
 GET /create?tool=image-to-video 200 in 49ms
 â—‹ Compiling /api/images/upload ...
 âœ“ Compiled /api/images/upload in 723ms (1392 modules)
Error: Route "/api/images/upload" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
Error: Route "/api/images/upload" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 POST /api/images/upload 200 in 2776ms
 âœ“ Compiled /api/video/generate in 183ms (823 modules)
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ” Video generation request body: {
  prompt: '"è®©å›¾ç‰‡åŠ¨èµ·æ¥..."',
  promptLength: 6,
  model: 'vidu-q1',
  resolution: '720p',
  duration: 10,
  aspectRatio: '9:16',
  hasImage: true,
  imageType: 'provided'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥...',
  model: 'vidu-q1',
  resolution: '720p',
  duration: 10,
  generationType: 'image-to-video',
  hasImage: true
}
ğŸš€ Submitting image-to-video request to bytedance (seedance-v1-pro-i2v-720p): {
  endpoint: '/bytedance/seedance-v1-pro-i2v-720p',
  prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥',
  duration: 10,
  camera_fixed: false,
  seed: -1,
  image: '[IMAGE_URL: https://ycahbhhuzgixfrljtqmi.supabase.co/storage/v...]'
}
âœ… image-to-video generation submitted successfully. Request ID: 6b8defb593364cc786d4cbe5d084e577
 POST /api/video/generate 200 in 1354ms
 âœ“ Compiled /api/video/status/[requestId] in 146ms (825 modules)
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 375ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 201ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 198ms
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 968ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 198ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 199ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 197ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 205ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 198ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 198ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 204ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 196ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 197ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 208ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 198ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 218ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 200ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 204ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 201ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 205ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 196ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 201ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 234ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 201ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 209ms
ğŸ” Checking status for request 6b8defb593364cc786d4cbe5d084e577
ğŸ“Š Status check for 6b8defb593364cc786d4cbe5d084e577: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for 6b8defb593364cc786d4cbe5d084e577: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/6b8defb593364cc786d4cbe5d084e577/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/6b8defb593364cc786d4cbe5d084e577 200 in 199ms
 âœ“ Compiled /api/video/store in 268ms (282 modules)
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: '6b8defb593364cc786d4cbe5d084e577',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/6b8defb593364cc786d4cbe5d084e577/1.mp4...',
  settings: {
    model: 'vidu-q1',
    duration: '10',
    resolution: '720p',
    aspectRatio: '9:16',
    seed: -1,
    generationType: 'image-to-video',
    prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 3792ms
 âœ“ Compiled /create in 238ms (615 modules)
 GET /create?tool=image-to-video 200 in 334ms
 âœ“ Compiled /api/images/upload in 161ms (819 modules)
Error: Route "/api/images/upload" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
Error: Route "/api/images/upload" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 POST /api/images/upload 200 in 2324ms
 âœ“ Compiled /api/video/generate in 116ms (823 modules)
Error: Route "/api/video/generate" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
Error: Route "/api/video/generate" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/generate/route.ts:18:30)
  16 |   try {
  17 |     // éªŒè¯ç”¨æˆ·ç™»å½•çŠ¶æ€
> 18 |     const session = await auth()
     |                              ^
  19 |
  20 |     if (!session?.user) {
  21 |       return NextResponse.json(
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ” Video generation request body: {
  prompt: '"è®©å›¾ç‰‡åŠ¨èµ·æ¥..."',
  promptLength: 6,
  model: 'vidfab-pro',
  resolution: '720p',
  duration: 8,
  aspectRatio: '16:9',
  hasImage: true,
  imageType: 'provided'
}
ğŸ¬ User ithermocraft@hotmail.com requesting video generation: {
  prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥...',
  model: 'vidfab-pro',
  resolution: '720p',
  duration: 8,
  generationType: 'image-to-video',
  hasImage: true
}
ğŸš€ Submitting image-to-video request to veo3 (veo3-fast-i2v): {
  endpoint: '/google/veo3-fast/image-to-video',
  prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥',
  aspect_ratio: '16:9',
  duration: 8,
  resolution: '720p',
  generate_audio: true,
  image: '[IMAGE_URL: https://ycahbhhuzgixfrljtqmi.supabase.co/storage/v...]'
}
âœ… image-to-video generation submitted successfully. Request ID: da49ce8b55c447bebf6eab3d3f826c2c
 POST /api/video/generate 200 in 1130ms
 âœ“ Compiled /api/video/status/[requestId] in 174ms (825 modules)
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'created', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'created',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 379ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 196ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 193ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 217ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 628ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 188ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 190ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 192ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 217ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 239ms
 GET /create?tool=video-effects 200 in 37ms
 GET /create?tool=image-to-video 200 in 17ms
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ” Checking status for request da49ce8b55c447bebf6eab3d3f826c2c
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/da49ce8b55c447bebf6eab3d3f826c2c/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 908ms
 âœ“ Compiled /api/video/store in 377ms (823 modules)
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: 'da49ce8b55c447bebf6eab3d3f826c2c',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/da49ce8b55c447bebf6eab3d3f826c2c/1.mp4...',
  settings: {
    model: 'vidfab-pro',
    duration: '8',
    resolution: '720p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'image-to-video',
    prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ“Š Status check for da49ce8b55c447bebf6eab3d3f826c2c: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for da49ce8b55c447bebf6eab3d3f826c2c: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/da49ce8b55c447bebf6eab3d3f826c2c/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/da49ce8b55c447bebf6eab3d3f826c2c 200 in 775ms
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: 'da49ce8b55c447bebf6eab3d3f826c2c',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/da49ce8b55c447bebf6eab3d3f826c2c/1.mp4...',
  settings: {
    model: 'vidfab-pro',
    duration: '8',
    resolution: '720p',
    aspectRatio: '16:9',
    seed: -1,
    generationType: 'image-to-video',
    prompt: 'è®©å›¾ç‰‡åŠ¨èµ·æ¥'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 2708ms
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Failed to create video record: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:203:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 200 in 3691ms
 GET /create?tool=my-assets 200 in 36ms
 GET /create?tool=discover 200 in 20ms
 GET /create?tool=image-to-video 200 in 16ms
 GET /create?tool=discover 200 in 16ms
 GET /create?tool=image-to-video 200 in 16ms
 GET /create?tool=discover 200 in 18ms
 GET /create?tool=image-to-video 200 in 13ms
 GET /create?tool=discover 200 in 17ms
 GET /create?tool=image-to-video 200 in 16ms
 GET /create?tool=discover 200 in 26ms
 GET /create?tool=image-to-video 200 in 14ms
 âœ“ Compiled in 610ms (587 modules)
 âœ“ Compiled in 437ms (587 modules)
 âœ“ Compiled in 383ms (587 modules)
 âœ“ Compiled in 391ms (587 modules)
 âœ“ Compiled in 466ms (587 modules)
 âœ“ Compiled in 932ms (587 modules)
 âœ“ Compiled in 279ms (587 modules)
 âœ“ Compiled in 357ms (587 modules)
 âœ“ Compiled in 266ms (587 modules)
 â—‹ Compiling /api/auth/[...nextauth] ...
 âœ“ Compiled /api/auth/[...nextauth] in 531ms (276 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/auth/session 200 in 756ms
 â—‹ Compiling /create ...
 âœ“ Compiled /create in 618ms (817 modules)
 GET /create?tool=image-to-video 200 in 1008ms
 â—‹ Compiling /_not-found ...
 âœ“ Compiled /_not-found in 700ms (1394 modules)
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 1041ms
 âœ“ Compiled in 2.8s (1408 modules)
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 âš  Fast Refresh had to perform a full reload due to a runtime error.
 GET /api/auth/session 200 in 475ms
 GET /create?tool=image-to-video 200 in 322ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 74ms
 GET /.well-known/appspecific/com.chrome.devtools.json 404 in 50ms
 GET /create?tool=image-to-video 200 in 190ms
 GET /api/auth/session 200 in 11ms
 GET /create?tool=video-effects 200 in 12ms
 âœ“ Compiled /api/images/upload in 453ms (822 modules)
Error: Route "/api/images/upload" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
Error: Route "/api/images/upload" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/images/upload/route.ts:17:30)
  15 |
  16 |     // Verify user authentication - Next.js 15 compatible
> 17 |     const session = await auth()
     |                              ^
  18 |     if (!session?.user?.uuid) {
  19 |       return NextResponse.json(
  20 |         { error: 'Unauthorized access' },
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 POST /api/images/upload 200 in 2341ms
 âœ“ Compiled in 1014ms (1412 modules)
 GET /create?tool=video-effects 200 in 175ms
 â—‹ Compiling /api/video/effects ...
 âœ“ Compiled /api/video/effects in 715ms (1400 modules)
Error: Route "/api/video/effects" used `headers().get('x-forwarded-proto')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/effects/route.ts:32:30)
  30 |
  31 |     // Verify user authentication status
> 32 |     const session = await auth()
     |                              ^
  33 |
  34 |     if (!session?.user) {
  35 |       return NextResponse.json(
Error: Route "/api/video/effects" used `headers().get('cookie')`. `headers()` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at POST (app/api/video/effects/route.ts:32:30)
  30 |
  31 |     // Verify user authentication status
> 32 |     const session = await auth()
     |                              ^
  33 |
  34 |     if (!session?.user) {
  35 |       return NextResponse.json(
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
ğŸ¬ Video effects generation request: {
  effectId: 'cartoon-doll',
  effectName: 'Cartoon Doll',
  hasImage: true,
  userId: '0ac2777c-ed4b-426f-901c-790974fe9d62'
}
ğŸŒŠ Calling Wavespeed Video Effects API: {
  url: 'https://api.wavespeed.ai/api/v3/video-effects/cartoon-doll',
  effectId: 'cartoon-doll',
  hasImage: true
}
ğŸŒŠ Wavespeed Video Effects API response: {
  status: 200,
  hasRequestId: true,
  requestId: '27b5e7508fad4fd78d17a0077f2dc041',
  error: undefined,
  effectId: 'cartoon-doll'
}
âœ… Video effects generation submitted: {
  requestId: '27b5e7508fad4fd78d17a0077f2dc041',
  effectId: 'cartoon-doll',
  userId: '0ac2777c-ed4b-426f-901c-790974fe9d62'
}
 POST /api/video/effects 200 in 4949ms
 âœ“ Compiled /api/video/status/[requestId] in 229ms (828 modules)
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 436ms
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 187ms
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 187ms
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 205ms
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'processing', progress: undefined, hasOutputs: false }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'processing',
  progress: 0,
  hasResult: false,
  outputs: [],
  outputsLength: 0
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 191ms
ğŸ” Checking status for request 27b5e7508fad4fd78d17a0077f2dc041
ğŸ“Š Status check for 27b5e7508fad4fd78d17a0077f2dc041: { status: 'completed', progress: undefined, hasOutputs: true }
ğŸ“Š Status result for 27b5e7508fad4fd78d17a0077f2dc041: {
  status: 'completed',
  progress: 0,
  hasResult: true,
  outputs: [
    'https://d1q70pf5vjeyhc.cloudfront.net/predictions/27b5e7508fad4fd78d17a0077f2dc041/1.mp4'
  ],
  outputsLength: 1
}
 GET /api/video/status/27b5e7508fad4fd78d17a0077f2dc041 200 in 189ms
 âœ“ Compiled /api/video/store in 298ms (832 modules)
ğŸ”„ Internal storage call for user: 0ac2777c-ed4b-426f-901c-790974fe9d62
ğŸ¬ Starting internal video storage for user: 0ac2777c-ed4b-426f-901c-790974fe9d62 {
  wavespeedRequestId: '27b5e7508fad4fd78d17a0077f2dc041',
  originalUrl: 'https://d1q70pf5vjeyhc.cloudfront.net/predictions/27b5e7508fad4fd78d17a0077f2dc041/1.mp4...',
  settings: {
    generationType: 'video-effects',
    effectId: 'cartoon-doll',
    effectName: 'Cartoon Doll',
    prompt: 'Cartoon Doll Effect'
  }
}
ğŸ‘¤ Force creating/updating user record: 0ac2777c-ed4b-426f-901c-790974fe9d62
 GET /create?tool=video-effects 200 in 73ms
âœ… User already exists: 0ac2777c-ed4b-426f-901c-790974fe9d62
âœ… User record verified: 0ac2777c-ed4b-426f-901c-790974fe9d62
Error creating video: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
[UserVideosDB.createVideo] {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
Supabase error: {
  code: '23503',
  details: 'Key (user_id)=(0ac2777c-ed4b-426f-901c-790974fe9d62) is not present in table "users".',
  hint: null,
  message: 'insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"'
}
âŒ Critical: Video record creation failed: Error: insert or update on table "user_videos" violates foreign key constraint "user_videos_user_id_fkey"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:46:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:197:21)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 500 in 3450ms
 âœ“ Compiled in 418ms (590 modules)
 GET /create?tool=video-effects 200 in 28ms
