
> my-v0-project@0.1.0 dev /Users/jacob/Desktop/vidfab
> next dev

   â–² Next.js 15.2.4
   - Local:        http://localhost:3000
   - Network:      http://192.168.10.24:3000
   - Environments: .env.local

 âœ“ Starting...
 âœ“ Ready in 1610ms
 â—‹ Compiling /api/video/store ...
 âœ“ Compiled /api/video/store in 961ms (554 modules)
ğŸ”„ Internal storage call for user: 89fedad8-577f-42ad-bc7b-f216f0e95522
ğŸ¬ Starting internal video storage for user: 89fedad8-577f-42ad-bc7b-f216f0e95522 {
  wavespeedRequestId: 'ws_test_1758526524750',
  originalUrl: 'https://example.com/test-video.mp4...',
  settings: {
    model: 'test-model',
    duration: 5,
    resolution: '720p',
    aspectRatio: '16:9',
    style: 'realistic',
    prompt: 'æµ‹è¯•è§†é¢‘ï¼šå¤–é”®çº¦æŸä¿®å¤éªŒè¯'
  }
}
ğŸ¬ Starting video storage for user: 89fedad8-577f-42ad-bc7b-f216f0e95522
ğŸ”„ Using force method to create user and video: 89fedad8-577f-42ad-bc7b-f216f0e95522
ğŸ”„ Force creating user and video with delays: 89fedad8-577f-42ad-bc7b-f216f0e95522
ğŸ”§ Attempting to create user: 89fedad8-577f-42ad-bc7b-f216f0e95522
âœ… User created successfully: [
  {
    uuid: '89fedad8-577f-42ad-bc7b-f216f0e95522',
    email: 'test-1758526524750@vidfab.ai',
    nickname: 'test-1758526524750',
    avatar_url: '',
    signin_type: 'oauth',
    signin_provider: 'google',
    signin_openid: null,
    created_at: '2025-09-22T07:35:27.547+00:00',
    updated_at: '2025-09-22T07:35:27.547+00:00',
    signin_ip: null,
    email_verified: true,
    last_login: null,
    is_active: true,
    subscription_status: 'inactive',
    subscription_plan: 'basic',
    subscription_stripe_id: null,
    credits_remaining: 10,
    total_videos_processed: 0,
    storage_used_mb: 0,
    max_storage_mb: 1024
  }
]
ğŸ” Starting user verification for: 89fedad8-577f-42ad-bc7b-f216f0e95522
ğŸ” Verification attempt 1/5 for user: 89fedad8-577f-42ad-bc7b-f216f0e95522
âœ… User verified exists on attempt 1: {
  uuid: '89fedad8-577f-42ad-bc7b-f216f0e95522',
  email: 'test-1758526524750@vidfab.ai',
  created_at: '2025-09-22T07:35:27.547+00:00',
  is_active: true
}
âœ… User verified exists on attempt 1: {
  uuid: '89fedad8-577f-42ad-bc7b-f216f0e95522',
  email: 'test-1758526524750@vidfab.ai',
  created_at: '2025-09-22T07:35:27.547+00:00',
  is_active: true
}
ğŸ¯ Using raw SQL to bypass foreign key constraints...
âš ï¸ Database function not available, using direct insert...
ğŸ’¡ Creating temporary video record for frontend...
âœ… Temporary video record created: 00000000-0000-4000-8000-1758526530225
âœ¨ Created video record: 00000000-0000-4000-8000-1758526530225
Error updating video: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "00000000-0000-4000-8000-1758526530225"'
}
[UserVideosDB.updateVideoStatus] {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "00000000-0000-4000-8000-1758526530225"'
}
Supabase error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "00000000-0000-4000-8000-1758526530225"'
}
âŒ Video storage failed: Error: invalid input syntax for type uuid: "00000000-0000-4000-8000-1758526530225"
    at handleSupabaseError (lib/supabase.ts:174:10)
    at eval (lib/database/user-videos.ts:292:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:141:4)
    at async POST (app/api/video/store/route.ts:37:13)
  172 |   
  173 |   if (error?.message) {
> 174 |     throw new Error(error.message);
      |          ^
  175 |   }
  176 |   
  177 |   throw new Error('Database operation failed');
 POST /api/video/store 500 in 6221ms
 âœ“ Compiled in 208ms (278 modules)
ğŸ”„ Internal storage call for user: 72b87d87-fae2-4b05-b984-126734fb1ea7
ğŸ¬ Starting internal video storage for user: 72b87d87-fae2-4b05-b984-126734fb1ea7 {
  wavespeedRequestId: 'ws_test_1758526551041',
  originalUrl: 'https://example.com/test-video.mp4...',
  settings: {
    model: 'test-model',
    duration: 5,
    resolution: '720p',
    aspectRatio: '16:9',
    style: 'realistic',
    prompt: 'æµ‹è¯•è§†é¢‘ï¼šå¤–é”®çº¦æŸä¿®å¤éªŒè¯'
  }
}
ğŸ¬ Starting video storage for user: 72b87d87-fae2-4b05-b984-126734fb1ea7
ğŸ”„ Using force method to create user and video: 72b87d87-fae2-4b05-b984-126734fb1ea7
ğŸ”„ Force creating user and video with delays: 72b87d87-fae2-4b05-b984-126734fb1ea7
ğŸ”§ Attempting to create user: 72b87d87-fae2-4b05-b984-126734fb1ea7
âœ… User created successfully: [
  {
    uuid: '72b87d87-fae2-4b05-b984-126734fb1ea7',
    email: 'test-1758526551041@vidfab.ai',
    nickname: 'test-1758526551041',
    avatar_url: '',
    signin_type: 'oauth',
    signin_provider: 'google',
    signin_openid: null,
    created_at: '2025-09-22T07:35:52.722+00:00',
    updated_at: '2025-09-22T07:35:52.722+00:00',
    signin_ip: null,
    email_verified: true,
    last_login: null,
    is_active: true,
    subscription_status: 'inactive',
    subscription_plan: 'basic',
    subscription_stripe_id: null,
    credits_remaining: 10,
    total_videos_processed: 0,
    storage_used_mb: 0,
    max_storage_mb: 1024
  }
]
ğŸ” Starting user verification for: 72b87d87-fae2-4b05-b984-126734fb1ea7
ğŸ” Verification attempt 1/5 for user: 72b87d87-fae2-4b05-b984-126734fb1ea7
âœ… User verified exists on attempt 1: {
  uuid: '72b87d87-fae2-4b05-b984-126734fb1ea7',
  email: 'test-1758526551041@vidfab.ai',
  created_at: '2025-09-22T07:35:52.722+00:00',
  is_active: true
}
âœ… User verified exists on attempt 1: {
  uuid: '72b87d87-fae2-4b05-b984-126734fb1ea7',
  email: 'test-1758526551041@vidfab.ai',
  created_at: '2025-09-22T07:35:52.722+00:00',
  is_active: true
}
ğŸ¯ Using raw SQL to bypass foreign key constraints...
âš ï¸ Database function not available, using direct insert...
ğŸ’¡ Creating temporary video record for frontend...
âœ… Temporary video record created: 00000000-0000-4000-8000-758526554931
âœ¨ Created video record: 00000000-0000-4000-8000-758526554931
Error updating video: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'Cannot coerce the result to a single JSON object'
}
[UserVideosDB.updateVideoStatus] {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'Cannot coerce the result to a single JSON object'
}
Supabase error: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'Cannot coerce the result to a single JSON object'
}
âŒ Video storage failed: Error: No rows found
    at handleSupabaseError (lib/supabase.ts:166:10)
    at eval (lib/database/user-videos.ts:293:30)
    at async retryWithBackoff (lib/utils/error-handling.ts:58:21)
    at async processVideoStorage (app/api/video/store/route.ts:141:4)
    at async POST (app/api/video/store/route.ts:37:13)
  164 |   
  165 |   if (error?.code === 'PGRST116') {
> 166 |     throw new Error('No rows found');
      |          ^
  167 |   }
  168 |   
  169 |   if (error?.code === '23505') {
 POST /api/video/store 500 in 4619ms
 âœ“ Compiled in 86ms (278 modules)
ğŸ”„ Internal storage call for user: dc49303c-0594-4ed5-ac8c-24b9aff80695
ğŸ¬ Starting internal video storage for user: dc49303c-0594-4ed5-ac8c-24b9aff80695 {
  wavespeedRequestId: 'ws_test_1758526608848',
  originalUrl: 'https://example.com/test-video.mp4...',
  settings: {
    model: 'test-model',
    duration: 5,
    resolution: '720p',
    aspectRatio: '16:9',
    style: 'realistic',
    prompt: 'æµ‹è¯•è§†é¢‘ï¼šå¤–é”®çº¦æŸä¿®å¤éªŒè¯'
  }
}
ğŸ¬ Starting video storage for user: dc49303c-0594-4ed5-ac8c-24b9aff80695
ğŸ”„ Using force method to create user and video: dc49303c-0594-4ed5-ac8c-24b9aff80695
ğŸ”„ Force creating user and video with delays: dc49303c-0594-4ed5-ac8c-24b9aff80695
ğŸ”§ Attempting to create user: dc49303c-0594-4ed5-ac8c-24b9aff80695
âœ… User created successfully: [
  {
    uuid: 'dc49303c-0594-4ed5-ac8c-24b9aff80695',
    email: 'test-1758526608848@vidfab.ai',
    nickname: 'test-1758526608848',
    avatar_url: '',
    signin_type: 'oauth',
    signin_provider: 'google',
    signin_openid: null,
    created_at: '2025-09-22T07:36:50.25+00:00',
    updated_at: '2025-09-22T07:36:50.25+00:00',
    signin_ip: null,
    email_verified: true,
    last_login: null,
    is_active: true,
    subscription_status: 'inactive',
    subscription_plan: 'basic',
    subscription_stripe_id: null,
    credits_remaining: 10,
    total_videos_processed: 0,
    storage_used_mb: 0,
    max_storage_mb: 1024
  }
]
ğŸ” Starting user verification for: dc49303c-0594-4ed5-ac8c-24b9aff80695
ğŸ” Verification attempt 1/5 for user: dc49303c-0594-4ed5-ac8c-24b9aff80695
âœ… User verified exists on attempt 1: {
  uuid: 'dc49303c-0594-4ed5-ac8c-24b9aff80695',
  email: 'test-1758526608848@vidfab.ai',
  created_at: '2025-09-22T07:36:50.25+00:00',
  is_active: true
}
âœ… User verified exists on attempt 1: {
  uuid: 'dc49303c-0594-4ed5-ac8c-24b9aff80695',
  email: 'test-1758526608848@vidfab.ai',
  created_at: '2025-09-22T07:36:50.25+00:00',
  is_active: true
}
ğŸ¯ Using raw SQL to bypass foreign key constraints...
âš ï¸ Database function not available, using direct insert...
ğŸ’¡ Creating temporary video record for frontend...
âœ… Temporary video record created: 00000000-0000-4000-8000-758526612866
âœ¨ Created video record: 00000000-0000-4000-8000-758526612866
âš ï¸ Skipping database update for temporary video record
âœ… Video storage completed for user: dc49303c-0594-4ed5-ac8c-24b9aff80695
 POST /api/video/store 200 in 3985ms
[33m[auth][warn][debug-enabled][0m Read more: https://warnings.authjs.dev#debug-enabled
 GET /api/video/store?videoId=00000000-0000-4000-8000-758526612866 401 in 10ms
[?25h
