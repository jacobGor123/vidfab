time="2025-09-26T16:26:08+08:00" level=warning msg="The \"NEXT_PUBLIC_AUTH_GOOGLE_ID\" variable is not set. Defaulting to a blank string."
time="2025-09-26T16:26:08+08:00" level=warning msg="The \"NEXT_PUBLIC_SUPABASE_URL\" variable is not set. Defaulting to a blank string."
time="2025-09-26T16:26:08+08:00" level=warning msg="The \"NEXT_PUBLIC_SUPABASE_ANON_KEY\" variable is not set. Defaulting to a blank string."
#1 [internal] load local bake definitions
#1 reading from stdin 699B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 3.00kB done
#2 DONE 0.0s

#3 [auth] library/node:pull token for registry-1.docker.io
#3 DONE 0.0s

#4 [internal] load metadata for docker.io/library/node:18-alpine
#4 DONE 1.8s

#5 [internal] load .dockerignore
#5 transferring context: 820B done
#5 DONE 0.0s

#6 [builder 1/4] WORKDIR /app
#6 CACHED

#7 [internal] load build context
#7 transferring context: 1.96MB 0.1s done
#7 DONE 0.1s

#8 [base 1/1] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e
#8 CACHED

#9 [deps 1/4] RUN apk add --no-cache libc6-compat
#9 ...

#10 [runner  2/12] RUN addgroup --system --gid 1001 nodejs
#10 DONE 0.2s

#11 [runner  3/12] RUN adduser --system --uid 1001 nextjs
#11 DONE 0.1s

#9 [deps 1/4] RUN apk add --no-cache libc6-compat
#9 0.173 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/main/aarch64/APKINDEX.tar.gz
#9 0.957 fetch https://dl-cdn.alpinelinux.org/alpine/v3.21/community/aarch64/APKINDEX.tar.gz
#9 1.573 (1/3) Installing musl-obstack (1.2.3-r2)
#9 1.645 (2/3) Installing libucontext (1.3.2-r0)
#9 1.717 (3/3) Installing gcompat (1.1.0-r4)
#9 1.800 OK: 10 MiB in 20 packages
#9 DONE 1.8s

#12 [deps 2/4] WORKDIR /app
#12 DONE 0.0s

#13 [deps 3/4] COPY package*.json ./
#13 DONE 0.0s

#14 [deps 4/4] RUN npm install
#14 7.830 npm warn deprecated @types/ioredis@5.0.0: This is a stub types definition. ioredis provides its own type definitions, so you do not need this installed.
#14 8.067 npm warn deprecated @types/bcryptjs@3.0.0: This is a stub types definition. bcryptjs provides its own type definitions, so you do not need this installed.
#14 18.95 
#14 18.95 added 536 packages, and audited 537 packages in 19s
#14 18.95 
#14 18.95 74 packages are looking for funding
#14 18.95   run `npm fund` for details
#14 19.01 
#14 19.01 3 vulnerabilities (2 low, 1 critical)
#14 19.01 
#14 19.01 To address all issues, run:
#14 19.01   npm audit fix --force
#14 19.01 
#14 19.01 Run `npm audit` for details.
#14 19.01 npm notice
#14 19.01 npm notice New major version of npm available! 10.8.2 -> 11.6.1
#14 19.01 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.1
#14 19.01 npm notice To update run: npm install -g npm@11.6.1
#14 19.01 npm notice
#14 DONE 19.3s

#15 [builder 2/4] COPY --from=deps /app/node_modules ./node_modules
#15 DONE 2.1s

#16 [builder 3/4] COPY . .
#16 DONE 0.0s

#17 [builder 4/4] RUN npm run build; EXIT_CODE=$?; if [ $EXIT_CODE -eq 0 ]; then echo "Build successful"; else echo "Build completed with prerender warnings - continuing deployment"; fi
#17 0.343 
#17 0.343 > my-v0-project@0.1.0 build
#17 0.343 > next build
#17 0.343 
#17 0.433  ⚠ You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env
#17 0.976   ▲ Next.js 14.2.17
#17 0.976 
#17 0.988    Creating an optimized production build ...
#17 1.008  ⚠ Found lockfile missing swc dependencies, patching...
#17 1.303    Downloading swc package @next/swc-linux-arm64-gnu...
#17 2.207  ⚠ Lockfile was successfully patched, please run "npm install" to ensure @next/swc dependencies are downloaded
#17 7.246    Downloading swc package @next/swc-linux-arm64-musl...
#17 33.71  ✓ Compiled successfully
#17 33.71    Skipping validation of types
#17 33.71    Skipping linting
#17 33.92    Collecting page data ...
#17 34.51 ⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
#17 34.51 ⚠️ No email provider configured, defaulting to AWS SES
#17 34.51 Error: Missing Supabase environment variables
#17 34.51     at 85662 (/app/.next/server/app/api/images/upload/route.js:1:18519)
#17 34.51     at t (/app/.next/server/webpack-runtime.js:1:128)
#17 34.51     at 70777 (/app/.next/server/app/api/images/upload/route.js:1:1286)
#17 34.51     at t (/app/.next/server/webpack-runtime.js:1:128)
#17 34.51     at r (/app/.next/server/app/api/images/upload/route.js:1:19097)
#17 34.51     at /app/.next/server/app/api/images/upload/route.js:1:19145
#17 34.51     at t.X (/app/.next/server/webpack-runtime.js:1:2135)
#17 34.51     at /app/.next/server/app/api/images/upload/route.js:1:19110
#17 34.51     at Object.<anonymous> (/app/.next/server/app/api/images/upload/route.js:1:19173)
#17 34.51     at Module._compile (node:internal/modules/cjs/loader:1364:14)
#17 34.52 
#17 34.52 > Build error occurred
#17 34.52 Error: Failed to collect page data for /api/images/upload
#17 34.52     at /app/node_modules/next/dist/build/utils.js:1268:15
#17 34.52     at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
#17 34.52   type: 'Error'
#17 34.52 }
#17 34.65 npm notice
#17 34.65 npm notice New major version of npm available! 10.8.2 -> 11.6.1
#17 34.65 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.1
#17 34.65 npm notice To update run: npm install -g npm@11.6.1
#17 34.65 npm notice
#17 34.71 Build completed with prerender warnings - continuing deployment
#17 DONE 35.1s

#18 [runner  4/12] COPY --from=builder /app/public ./public
#18 DONE 0.1s

#19 [runner  5/12] RUN mkdir .next
#19 DONE 0.1s

#20 [runner  6/12] RUN chown nextjs:nodejs .next
#20 DONE 0.1s

#21 [runner  7/12] RUN echo "Checking available .next outputs..."
#21 0.115 Checking available .next outputs...
#21 DONE 0.1s

#22 [runner  8/12] COPY --from=builder --chown=nextjs:nodejs /app/.next ./.next
#22 DONE 0.2s

#23 [runner  9/12] COPY --from=builder --chown=nextjs:nodejs /app/node_modules ./node_modules
#23 DONE 2.4s

#24 [runner 10/12] COPY --from=builder --chown=nextjs:nodejs /app/package.json ./package.json
#24 DONE 0.0s

#25 [runner 11/12] RUN if [ ! -f ./.next/prerender-manifest.json ]; then echo '{"version":4,"routes":{},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"","previewModeSigningKey":"","previewModeEncryptionKey":""}}' > ./.next/prerender-manifest.json; fi
#25 DONE 0.1s

#26 [runner 12/12] RUN if [ ! -f ./.next/routes-manifest.json ]; then echo '{"version":3,"pages404":false,"basePath":"","redirects":[],"rewrites":{"beforeFiles":[],"afterFiles":[],"fallback":[]},"headers":[]}' > ./.next/routes-manifest.json; fi
#26 DONE 0.1s

#27 exporting to image
#27 exporting layers
#27 exporting layers 2.7s done
#27 writing image sha256:d467a0bae846832169f0ba8ac6fb28fc4ccd4b573129b9a693287c7edbc49520
#27 writing image sha256:d467a0bae846832169f0ba8ac6fb28fc4ccd4b573129b9a693287c7edbc49520 done
#27 naming to docker.io/library/vidfab-app done
#27 DONE 2.7s

#28 resolving provenance for metadata file
#28 DONE 0.0s
 app  Built
