# Admin Dashboard 文件结构树

vidfab/
│
├── app/
│   ├── (main)/admin/                      # 管理后台页面
│   │   ├── layout.tsx                     # ✨ 管理后台布局和导航
│   │   ├── users/
│   │   │   └── page.tsx                   # ✨ 用户管理页面
│   │   ├── paid-orders/
│   │   │   └── page.tsx                   # ✨ 订单管理页面
│   │   └── tasks/
│   │       └── page.tsx                   # ✨ 任务管理页面
│   │
│   └── api/admin/                         # 管理后台 API
│       └── tasks/
│           └── route.ts                   # ✨ 任务 API 端点
│
├── components/
│   ├── admin/                             # 管理后台专用组件
│   │   ├── media-preview.tsx              # ✨ 媒体预览组件
│   │   ├── task-type-filter.tsx           # ✨ 任务类型筛选器
│   │   └── tasks-list-with-pagination.tsx # ✨ 任务列表(带分页)
│   │
│   ├── blocks/                            # 基础组件块
│   │   └── table/
│   │       └── index.tsx                  # ✨ 核心表格组件
│   │
│   └── dashboard/                         # Dashboard 组件
│       └── slots/
│           └── table/
│               └── index.tsx              # ✨ 表格 Slot 包装器
│
├── lib/
│   └── admin/                             # 管理后台业务逻辑
│       ├── auth.ts                        # ✨ 管理员权限验证
│       └── all-tasks-fetcher.ts           # ✨ 任务聚合和分页
│
├── models/                                # 数据访问层
│   ├── db.ts                              # ✨ 数据库客户端配置
│   ├── user.ts                            # ✨ 用户数据访问
│   └── order.ts                           # ✨ 订单数据访问
│
├── types/                                 # TypeScript 类型定义
│   ├── admin/
│   │   ├── tasks.d.ts                     # ✨ 任务类型定义
│   │   ├── order.d.ts                     # ✨ 订单类型定义
│   │   └── user.d.ts                      # ✨ 用户类型定义
│   ├── blocks/
│   │   └── table.d.ts                     # ✨ 表格块类型
│   └── slots/
│       └── table.d.ts                     # ✨ 表格 Slot 类型
│
├── docs/                                  # 文档
│   ├── admin-dashboard-implementation.md  # 原始实施方案
│   ├── database-schema.sql                # ✨ 数据库建表 SQL
│   ├── admin-dashboard-deployment-guide.md# ✨ 部署指南
│   ├── admin-dashboard-README.md          # ✨ 功能说明文档
│   ├── admin-dashboard-file-tree.txt      # ✨ 本文件
│   └── IMPLEMENTATION-SUMMARY.md          # ✨ 实施总结
│
└── .env.example                           # ✨ 环境变量示例(已添加 ADMIN_EMAILS)

✨ = 新创建/修改的文件
总计新建文件: 27 个

---

## 核心模块说明

### 1. 页面层 (Pages)
- app/(main)/admin/users/page.tsx - 用户管理
- app/(main)/admin/paid-orders/page.tsx - 订单管理
- app/(main)/admin/tasks/page.tsx - 任务管理

### 2. API 层
- app/api/admin/tasks/route.ts - 任务分页 API

### 3. 组件层 (Components)
- components/admin/* - 管理后台专用组件
- components/blocks/table/* - 基础表格组件
- components/dashboard/slots/table/* - 表格 Slot 包装

### 4. 业务逻辑层 (Business Logic)
- lib/admin/auth.ts - 权限验证
- lib/admin/all-tasks-fetcher.ts - 任务数据聚合

### 5. 数据访问层 (Data Access)
- models/db.ts - 数据库客户端
- models/user.ts - 用户数据操作
- models/order.ts - 订单数据操作

### 6. 类型定义层 (Types)
- types/admin/* - 管理后台类型
- types/blocks/* - 组件块类型
- types/slots/* - Slot 类型

### 7. 数据库层 (Database)
- docs/database-schema.sql - 建表 SQL
  - orders 表
  - 6 个任务表
  - 索引和触发器

---

## 访问路径

- 用户管理: /admin/users
- 订单管理: /admin/paid-orders
- 任务管理: /admin/tasks
- 任务筛选: /admin/tasks?type=video_generation

---

生成时间: 2025-01-22
