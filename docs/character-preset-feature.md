# 角色预设模板功能说明

## 功能概述

在 Video Agent 的第二步（角色配置步骤）中，用户现在可以从 129 个预设角色中选择，快速填充角色图片，无需 AI 生成或手动上传。

## 实现的文件

### 1. 角色预设数据 `/lib/constants/character-presets.ts`
- 包含 129 个预设角色的数据（名称 + 图片 URL）
- 提供 `CHARACTER_PRESETS` 常量供其他组件使用
- 预留了按类别分组的扩展接口（如 Christmas、Anime、Marvel 等）

### 2. 角色预设选择对话框 `/app/studio/video-agent-beta/components/CharacterPresetDialog.tsx`
- 展示所有 129 个预设角色的网格界面
- 支持搜索功能，可按角色名称筛选
- 支持单选，点击角色后高亮显示
- 底部显示已选择的角色名称
- 确认后通过回调函数返回选中的角色数据

### 3. 集成到第二步 `/app/studio/video-agent-beta/components/steps/Step2CharacterConfig.tsx`
- 在每个角色卡片的操作区域新增"Preset"按钮
- 点击后打开角色预设选择对话框
- 选择预设后自动填充角色图片 URL
- 预设角色标记为"upload"模式（与手动上传一致）

## 使用流程

1. 用户在第二步看到识别出的角色列表
2. 点击某个角色卡片底部的 **"Preset"** 按钮
3. 弹出角色预设选择对话框
4. （可选）使用搜索框快速定位角色
5. 点击选择想要的预设角色（会高亮显示）
6. 点击 **"Confirm Selection"** 按钮
7. 对话框关闭，角色图片自动填充到卡片中

## 技术特点

### 响应式设计
- 网格布局自适应屏幕尺寸（3-6 列）
- 支持图片懒加载，优化性能
- 滚动区域支持大量角色展示

### 用户体验优化
- 实时搜索，即时过滤结果
- 显示当前筛选的角色数量
- 选中状态有明确的视觉反馈（边框高亮 + 对勾图标）
- 底部实时显示已选择的角色名称

### 代码架构
- 数据与 UI 分离（constants 层 + component 层）
- 组件复用性强，易于扩展
- TypeScript 类型安全

## 扩展建议

### 未来可以添加的功能：
1. **分类筛选**：在对话框顶部添加分类标签（圣诞、动漫、漫威等）
2. **收藏功能**：允许用户收藏常用的预设角色
3. **自定义预设**：允许用户上传并保存自己的角色到预设库
4. **批量应用**：一键将某个预设应用到所有未配置的角色
5. **预设预览**：悬停时显示更大的预览图

## 注意事项

1. 所有预设角色图片都托管在 `https://static.vidfab.ai/public/character/` CDN 上
2. 选择预设后，角色模式会被标记为 `upload`，与 AI 生成模式区分
3. 用户仍然可以随时通过"Upload"按钮或"Generate"按钮更换角色图片

## 测试建议

1. 测试搜索功能是否正常工作
2. 测试选择预设后图片是否正确填充
3. 测试在不同屏幕尺寸下的响应式布局
4. 测试大量角色时的滚动性能
5. 测试网络较慢时的图片加载体验
