# Video Agent - æ­¥éª¤å›žæº¯åŠŸèƒ½æµ‹è¯•æ–‡æ¡£

## ðŸ“‹ åŠŸèƒ½æ¦‚è¿°

å·²æˆåŠŸå®žçŽ° Phase 1 çš„æ­¥éª¤å›žæº¯åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ï¼š
- âœ… ç‚¹å‡»æ­¥éª¤æ¡æŸ¥çœ‹å·²å®Œæˆçš„æ­¥éª¤
- âœ… éªŒè¯æ­¥éª¤æ˜¯å¦å¯ä»¥è·³è½¬ï¼ˆåªæœ‰å·²å®Œæˆçš„æ­¥éª¤æ‰èƒ½ç‚¹å‡»ï¼‰
- âœ… å®žæ—¶æ›´æ–°æ•°æ®åº“çš„ `current_step` å­—æ®µ

## ðŸŽ¯ æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: æŸ¥çœ‹å·²å®Œæˆæ­¥éª¤

**å‰ææ¡ä»¶**ï¼š
- ç”¨æˆ·å·²ç»å®Œæˆæ­¥éª¤ 1ã€2ã€3
- å½“å‰åœ¨æ­¥éª¤ 4

**æµ‹è¯•æ­¥éª¤**ï¼š
1. æ‰“å¼€ Video Agent é¡¹ç›®å¼¹çª—
2. æŸ¥çœ‹æ­¥éª¤æ¡ï¼Œæ­¥éª¤ 1ã€2ã€3 åº”æ˜¾ç¤ºä¸ºå·²å®Œæˆï¼ˆâœ“å›¾æ ‡ï¼‰
3. å°†é¼ æ ‡æ‚¬åœåœ¨æ­¥éª¤ 1 ä¸Šï¼Œåº”æ˜¾ç¤ºæç¤ºæ–‡æœ¬ï¼š"ç‚¹å‡»æŸ¥çœ‹æ­¥éª¤ 1: Script"
4. ç‚¹å‡»æ­¥éª¤ 1
5. é¡µé¢åº”è·³è½¬åˆ°æ­¥éª¤ 1 çš„å†…å®¹ï¼ˆè„šæœ¬åˆ†æžï¼‰
6. æ­¥éª¤æ¡åº”é«˜äº®æ˜¾ç¤ºæ­¥éª¤ 1

**é¢„æœŸç»“æžœ**ï¼š
- âœ… æ­¥éª¤ 1 å˜ä¸ºå½“å‰æ¿€æ´»çŠ¶æ€
- âœ… æ˜¾ç¤ºæ­¥éª¤ 1 çš„å†…å®¹ï¼ˆåªè¯»æ¨¡å¼ï¼‰
- âœ… æ•°æ®åº“ `current_step` æ›´æ–°ä¸º 1
- âœ… æŽ§åˆ¶å°è¾“å‡ºï¼š`[StepDialog] å°è¯•è·³è½¬åˆ°æ­¥éª¤ 1` å’Œ `[StepDialog] æˆåŠŸè·³è½¬åˆ°æ­¥éª¤ 1`

---

### åœºæ™¯ 2: å°è¯•ç‚¹å‡»æœªå®Œæˆæ­¥éª¤

**å‰ææ¡ä»¶**ï¼š
- ç”¨æˆ·å·²ç»å®Œæˆæ­¥éª¤ 1ã€2
- å½“å‰åœ¨æ­¥éª¤ 3
- æ­¥éª¤ 4ã€5 æœªå®Œæˆ

**æµ‹è¯•æ­¥éª¤**ï¼š
1. æ‰“å¼€ Video Agent é¡¹ç›®å¼¹çª—
2. å°†é¼ æ ‡æ‚¬åœåœ¨æ­¥éª¤ 4 ä¸Šï¼Œåº”æ˜¾ç¤ºæç¤ºæ–‡æœ¬ï¼š"æ­¥éª¤ 4: Videosï¼ˆæœªå®Œæˆï¼‰"
3. å°è¯•ç‚¹å‡»æ­¥éª¤ 4

**é¢„æœŸç»“æžœ**ï¼š
- âœ… æ­¥éª¤ 4 æ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€ï¼ˆç°è‰²ã€åŠé€æ˜Žï¼‰
- âœ… ç‚¹å‡»æ— æ•ˆï¼Œé¡µé¢ä¸è·³è½¬
- âœ… æŽ§åˆ¶å°è¾“å‡ºï¼š`[StepNavigation] æ— æ³•è·³è½¬åˆ°æ­¥éª¤ 4`

---

### åœºæ™¯ 3: ä»ŽåŽé¢çš„æ­¥éª¤å›žåˆ°å‰é¢

**å‰ææ¡ä»¶**ï¼š
- ç”¨æˆ·å·²ç»å®Œæˆæ­¥éª¤ 1ã€2ã€3ã€4
- å½“å‰åœ¨æ­¥éª¤ 5ï¼ˆæœ€ç»ˆåˆæˆï¼‰

**æµ‹è¯•æ­¥éª¤**ï¼š
1. æ‰“å¼€ Video Agent é¡¹ç›®å¼¹çª—
2. ç‚¹å‡»æ­¥éª¤ 3ï¼ˆåˆ†é•œç”Ÿæˆï¼‰
3. æŸ¥çœ‹åˆ†é•œå›¾å†…å®¹
4. ç‚¹å‡»æ­¥éª¤ 4ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰
5. æŸ¥çœ‹è§†é¢‘ç‰‡æ®µå†…å®¹
6. ç‚¹å‡» "ä¸‹ä¸€æ­¥" æŒ‰é’®
7. åº”è·³è½¬åˆ°æ­¥éª¤ 5

**é¢„æœŸç»“æžœ**ï¼š
- âœ… æ­¥éª¤å¯ä»¥è‡ªç”±åœ¨ 1-5 ä¹‹é—´è·³è½¬
- âœ… æ¯æ¬¡è·³è½¬éƒ½æ­£ç¡®æ˜¾ç¤ºå¯¹åº”æ­¥éª¤çš„å†…å®¹
- âœ… æ•°æ®åº“ `current_step` åŒæ­¥æ›´æ–°
- âœ… æ­¥éª¤æ¡é«˜äº®æ­£ç¡®

---

### åœºæ™¯ 4: è§†è§‰åé¦ˆæµ‹è¯•

**æµ‹è¯•æ­¥éª¤**ï¼š
1. æ‰“å¼€ Video Agent é¡¹ç›®å¼¹çª—
2. è§‚å¯Ÿæ­¥éª¤æ¡çš„è§†è§‰æ•ˆæžœ

**é¢„æœŸç»“æžœ**ï¼š
- âœ… **å·²å®Œæˆæ­¥éª¤**ï¼šè“è‰²èƒŒæ™¯ï¼Œç™½è‰² âœ“ å›¾æ ‡ï¼Œå¯ç‚¹å‡»ï¼Œhover æ—¶æ”¾å¤§ï¼ˆscale-110ï¼‰
- âœ… **å½“å‰æ­¥éª¤**ï¼šç™½è‰²èƒŒæ™¯ï¼Œè“è‰²è¾¹æ¡†ï¼Œè“è‰²å…‰æ™•ï¼ˆringï¼‰ï¼Œå¯ç‚¹å‡»
- âœ… **æœªå®Œæˆæ­¥éª¤**ï¼šç°è‰²èƒŒæ™¯ï¼Œç°è‰²è¾¹æ¡†ï¼ŒåŠé€æ˜Žï¼ˆopacity-50ï¼‰ï¼Œç¦ç”¨çŠ¶æ€
- âœ… **hover æ•ˆæžœ**ï¼šå¯ç‚¹å‡»çš„æ­¥éª¤æœ‰é˜´å½±ï¼ˆshadow-lgï¼‰å’Œç¼©æ”¾åŠ¨ç”»
- âœ… **ç‚¹å‡»æ•ˆæžœ**ï¼šactive æ—¶ç¼©å°ï¼ˆscale-95ï¼‰

---

## ðŸ” æŠ€æœ¯éªŒè¯ç‚¹

### 1. Zustand Store çŠ¶æ€ç®¡ç†
æ£€æŸ¥æµè§ˆå™¨æŽ§åˆ¶å°çš„ Redux DevTools æˆ–æ‰‹åŠ¨éªŒè¯ï¼š
```javascript
// åœ¨æµè§ˆå™¨æŽ§åˆ¶å°æ‰§è¡Œ
useVideoAgentStore.getState().currentStep // åº”ç­‰äºŽå½“å‰æ­¥éª¤
useVideoAgentStore.getState().canGoToStep(2) // æµ‹è¯•æ˜¯å¦å¯ä»¥è·³è½¬åˆ°æ­¥éª¤ 2
useVideoAgentStore.getState().getStepStatus(1) // èŽ·å–æ­¥éª¤ 1 çš„çŠ¶æ€
```

### 2. æ•°æ®åº“åŒæ­¥
åœ¨ Supabase Dashboard ä¸­æŸ¥çœ‹ `video_agent_projects` è¡¨ï¼š
```sql
SELECT id, current_step, step_1_status, step_2_status, step_3_status, step_4_status, step_5_status
FROM video_agent_projects
WHERE id = 'your-project-id';
```

### 3. API è°ƒç”¨
æ‰“å¼€æµè§ˆå™¨ Network é¢æ¿ï¼Œè§‚å¯Ÿ API è°ƒç”¨ï¼š
- ç‚¹å‡»æ­¥éª¤æ—¶åº”è°ƒç”¨ `PATCH /api/video-agent/projects/[id]/step`
- è¯·æ±‚ä½“åº”åŒ…å« `{ current_step: N }`
- å“åº”åº”è¿”å›ž `{ success: true, data: { current_step: N } }`

---

## ðŸ› è¾¹ç•Œæƒ…å†µæµ‹è¯•

### æµ‹è¯• 1: æ­¥éª¤æ˜ å°„å…¼å®¹æ€§
ç”±äºŽæ—§é¡¹ç›®å°†æ­¥éª¤ 6-7 æ˜ å°„ä¸ºæ–°çš„æ­¥éª¤ 5ï¼Œæµ‹è¯•ï¼š
1. åˆ›å»ºä¸€ä¸ª `current_step = 6` çš„æ—§é¡¹ç›®
2. æ‰“å¼€é¡¹ç›®å¼¹çª—
3. éªŒè¯æ˜¾ç¤ºä¸ºæ­¥éª¤ 5ï¼ˆæœ€ç»ˆåˆæˆï¼‰

### æµ‹è¯• 2: æ²¡æœ‰é¡¹ç›®æ•°æ®
1. ä¸åŠ è½½ä»»ä½•é¡¹ç›®
2. å°è¯•è®¿é—® Video Agent é¡µé¢
3. éªŒè¯ä¸ä¼šæŠ¥é”™ï¼Œæ­¥éª¤æ¡æ­£ç¡®æ˜¾ç¤ºä¸ºç¦ç”¨çŠ¶æ€

### æµ‹è¯• 3: ç½‘ç»œå»¶è¿Ÿ
1. åœ¨ Chrome DevTools â†’ Network ä¸­è®¾ç½® Slow 3G
2. ç‚¹å‡»æ­¥éª¤è·³è½¬
3. éªŒè¯ UI ä¸å¡é¡¿ï¼Œè·³è½¬æµç•…

---

## ðŸ“Š æ€§èƒ½è§‚æµ‹

å·²é›†æˆçš„æ€§èƒ½æ—¥å¿—ï¼ˆStepDialog.tsx line:57-67ï¼‰ï¼š
```javascript
console.log('[Perf][StepDialog] open->next frame (approx):', {
  projectId: project.id,
  costMs: Math.round(costMs)
})
```

**é¢„æœŸæ€§èƒ½æŒ‡æ ‡**ï¼š
- âœ… å¼¹çª—æ‰“å¼€åˆ°ä¸‹ä¸€å¸§æ¸²æŸ“ < 50ms
- âœ… æ­¥éª¤è·³è½¬å“åº”æ—¶é—´ < 100ms
- âœ… API è°ƒç”¨å¾€è¿”æ—¶é—´ < 500ms

---

## ðŸŽ¨ UI/UX éªŒè¯æ¸…å•

- [ ] æ­¥éª¤æ¡åœ¨æ‰‹æœºç«¯ï¼ˆç§»åŠ¨è®¾å¤‡ï¼‰ä¸Šæ­£ç¡®æ˜¾ç¤º
- [ ] æ­¥éª¤æ ‡ç­¾æ–‡å­—ä¸é‡å ï¼ˆç‰¹åˆ«æ˜¯åœ¨å°å±å¹•ä¸Šï¼‰
- [ ] åŠ¨ç”»æµç•…ï¼Œæ— å¡é¡¿
- [ ] é¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆ WCAG æ ‡å‡†
- [ ] å·¥å…·æç¤ºï¼ˆtitleï¼‰æ­£ç¡®æ˜¾ç¤º
- [ ] é”®ç›˜å¯¼èˆªæ”¯æŒï¼ˆæœªæ¥å¢žå¼ºï¼‰

---

## ðŸš€ åŽç»­å¢žå¼ºï¼ˆPhase 2 & 3ï¼‰

å½“å‰å·²å®Œæˆ **Phase 1: åŸºç¡€å›žæº¯åŠŸèƒ½**ã€‚

**Phase 2 å¾…å®žçŽ°**ï¼ˆé‡æ–°ç”ŸæˆåŠŸèƒ½ï¼‰ï¼š
- [ ] æ•°æ®åº“å‡½æ•° `reset_project_from_step()`
- [ ] API ç«¯ç‚¹ `/reset-from-step`
- [ ] ç¡®è®¤å¯¹è¯æ¡† UI
- [ ] æ¸…ç©ºæ•°æ®å’Œé‡ç½®çŠ¶æ€

**Phase 3 å¾…å®žçŽ°**ï¼ˆä¼˜åŒ–ä½“éªŒï¼‰ï¼š
- [ ] æ­¥éª¤çŠ¶æ€å¯è§†åŒ–å¢žå¼ºï¼ˆloading spinnerï¼‰
- [ ] æ‡’åŠ è½½æ•°æ®
- [ ] é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- [ ] é”®ç›˜å¿«æ·é”®æ”¯æŒ

---

## ðŸ“ æµ‹è¯•ç»“è®º

Phase 1 åŠŸèƒ½å·²å…¨éƒ¨å®žçŽ°å¹¶é€šè¿‡æž„å»ºæµ‹è¯•ã€‚å»ºè®®æŒ‰ç…§ä¸Šè¿°åœºæ™¯è¿›è¡Œæ‰‹åŠ¨æµ‹è¯•ï¼ŒéªŒè¯åŠŸèƒ½çš„å®Œæ•´æ€§å’Œç”¨æˆ·ä½“éªŒã€‚

**å¼€å‘è€…**ï¼šClaude Code
**æ—¥æœŸ**ï¼š2025-12-29
**çŠ¶æ€**ï¼šâœ… Phase 1 å®Œæˆ
