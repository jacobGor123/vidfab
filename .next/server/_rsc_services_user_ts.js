"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_rsc_services_user_ts";
exports.ids = ["_rsc_services_user_ts"];
exports.modules = {

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TABLES: () => (/* binding */ TABLES),\n/* harmony export */   handleSupabaseError: () => (/* binding */ handleSupabaseError),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\n * Supabase Client Configuration for VidFab AI Video Platform\n */ \n// Supabase configuration\nconst supabaseUrl = \"https://ycahbhhuzgixfrljtqmi.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljYWhiaGh1emdpeGZybGp0cW1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NzI2OTMsImV4cCI6MjA3MzI0ODY5M30.OFKNQCgBkUaxcV8WjMZWPr27d1Mcf6ox6-iHoSABZbc\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\n// Public client (for client-side operations)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true\n    }\n});\n// Admin client (for server-side operations with elevated permissions)\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey || supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n// Table names\nconst TABLES = {\n    USERS: \"users\",\n    VERIFICATION_CODES: \"verification_codes\",\n    VIDEO_JOBS: \"video_jobs\",\n    USER_VIDEOS: \"user_videos\",\n    USER_STORAGE_QUOTAS: \"user_storage_quotas\",\n    SUBSCRIPTIONS: \"subscriptions\",\n    PAYMENTS: \"payments\"\n};\n// Helper function to handle Supabase errors\nfunction handleSupabaseError(error) {\n    console.error(\"Supabase error:\", error);\n    if (error?.code === \"PGRST116\") {\n        throw new Error(\"No rows found\");\n    }\n    if (error?.code === \"23505\") {\n        throw new Error(\"Resource already exists\");\n    }\n    if (error?.message) {\n        throw new Error(error.message);\n    }\n    throw new Error(\"Database operation failed\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUNvRDtBQUVyRCx5QkFBeUI7QUFDekIsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLHFCQUFxQkwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUI7QUFFaEUsSUFBSSxDQUFDUCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQyxNQUFNLElBQUlJLE1BQU07QUFDbEI7QUFFQSw2Q0FBNkM7QUFDdEMsTUFBTUMsV0FBV1YsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFpQjtJQUNqRU0sTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtBQUNGLEdBQUc7QUFFSCxzRUFBc0U7QUFDL0QsTUFBTUMsZ0JBQWdCZCxtRUFBWUEsQ0FDdkNDLGFBQ0FNLHNCQUFzQkYsaUJBQ3RCO0lBQ0VNLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNBO0FBcUhGLGNBQWM7QUFDUCxNQUFNRSxTQUFTO0lBQ3BCQyxPQUFPO0lBQ1BDLG9CQUFvQjtJQUNwQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLHFCQUFxQjtJQUNyQkMsZUFBZTtJQUNmQyxVQUFVO0FBQ1osRUFBVztBQUVYLDRDQUE0QztBQUNyQyxTQUFTQyxvQkFBb0JDLEtBQVU7SUFDNUNDLFFBQVFELEtBQUssQ0FBQyxtQkFBbUJBO0lBRWpDLElBQUlBLE9BQU9FLFNBQVMsWUFBWTtRQUM5QixNQUFNLElBQUlqQixNQUFNO0lBQ2xCO0lBRUEsSUFBSWUsT0FBT0UsU0FBUyxTQUFTO1FBQzNCLE1BQU0sSUFBSWpCLE1BQU07SUFDbEI7SUFFQSxJQUFJZSxPQUFPRyxTQUFTO1FBQ2xCLE1BQU0sSUFBSWxCLE1BQU1lLE1BQU1HLE9BQU87SUFDL0I7SUFFQSxNQUFNLElBQUlsQixNQUFNO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgQ2xpZW50IENvbmZpZ3VyYXRpb24gZm9yIFZpZEZhYiBBSSBWaWRlbyBQbGF0Zm9ybVxuICovXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBTdXBhYmFzZSBjb25maWd1cmF0aW9uXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZITtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbn1cblxuLy8gUHVibGljIGNsaWVudCAoZm9yIGNsaWVudC1zaWRlIG9wZXJhdGlvbnMpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICBwZXJzaXN0U2Vzc2lvbjogdHJ1ZSxcbiAgfSxcbn0pO1xuXG4vLyBBZG1pbiBjbGllbnQgKGZvciBzZXJ2ZXItc2lkZSBvcGVyYXRpb25zIHdpdGggZWxldmF0ZWQgcGVybWlzc2lvbnMpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcbiAgc3VwYWJhc2VVcmwsXG4gIHN1cGFiYXNlU2VydmljZUtleSB8fCBzdXBhYmFzZUFub25LZXksXG4gIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9XG4pO1xuXG4vLyBEYXRhYmFzZSB0YWJsZSB0eXBlcyAodGhlc2Ugc2hvdWxkIG1hdGNoIHlvdXIgU3VwYWJhc2Ugc2NoZW1hKVxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVVzZXIge1xuICB1dWlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5pY2tuYW1lOiBzdHJpbmc7XG4gIGF2YXRhcl91cmw/OiBzdHJpbmc7XG4gIHNpZ25pbl90eXBlOiAnb2F1dGgnIHwgJ2NyZWRlbnRpYWxzJztcbiAgc2lnbmluX3Byb3ZpZGVyOiBzdHJpbmc7XG4gIHNpZ25pbl9vcGVuaWQ/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdD86IHN0cmluZztcbiAgc2lnbmluX2lwPzogc3RyaW5nO1xuICBlbWFpbF92ZXJpZmllZDogYm9vbGVhbjtcbiAgbGFzdF9sb2dpbj86IHN0cmluZztcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICAvLyBBSSBWaWRlbyBQbGF0Zm9ybSBzcGVjaWZpYyBmaWVsZHNcbiAgc3Vic2NyaXB0aW9uX3N0YXR1cz86ICdhY3RpdmUnIHwgJ2luYWN0aXZlJyB8ICdjYW5jZWxsZWQnIHwgJ3Bhc3RfZHVlJztcbiAgc3Vic2NyaXB0aW9uX3BsYW4/OiAnYmFzaWMnIHwgJ3BybycgfCAnZW50ZXJwcmlzZSc7XG4gIHN1YnNjcmlwdGlvbl9zdHJpcGVfaWQ/OiBzdHJpbmc7XG4gIGNyZWRpdHNfcmVtYWluaW5nPzogbnVtYmVyO1xuICB0b3RhbF92aWRlb3NfcHJvY2Vzc2VkPzogbnVtYmVyO1xuICBzdG9yYWdlX3VzZWRfbWI/OiBudW1iZXI7XG4gIG1heF9zdG9yYWdlX21iPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlVmVyaWZpY2F0aW9uQ29kZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGNvZGU6IHN0cmluZztcbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGF0dGVtcHRzOiBudW1iZXI7XG4gIGlzX3VzZWQ6IGJvb2xlYW47XG59XG5cbi8vIFZpZGVvIGdlbmVyYXRpb24gYW5kIHN0b3JhZ2UgdHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgVXNlclZpZGVvIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogc3RyaW5nO1xuXG4gIC8vIEdlbmVyYXRpb24gaW5mb3JtYXRpb25cbiAgd2F2ZXNwZWVkX3JlcXVlc3RfaWQ6IHN0cmluZztcbiAgcHJvbXB0OiBzdHJpbmc7XG4gIHNldHRpbmdzOiB7XG4gICAgbW9kZWw6IHN0cmluZztcbiAgICBkdXJhdGlvbjogc3RyaW5nO1xuICAgIHJlc29sdXRpb246IHN0cmluZztcbiAgICBhc3BlY3RSYXRpbzogc3RyaW5nO1xuICAgIHN0eWxlPzogc3RyaW5nO1xuICB9O1xuXG4gIC8vIEZpbGUgc3RvcmFnZSBpbmZvcm1hdGlvblxuICBvcmlnaW5hbF91cmw/OiBzdHJpbmc7XG4gIHN0b3JhZ2VfcGF0aD86IHN0cmluZztcbiAgdGh1bWJuYWlsX3BhdGg/OiBzdHJpbmc7XG5cbiAgLy8gRmlsZSBtZXRhZGF0YVxuICBmaWxlX3NpemU/OiBudW1iZXI7XG4gIGR1cmF0aW9uX3NlY29uZHM/OiBudW1iZXI7XG4gIHZpZGVvX3Jlc29sdXRpb24/OiBzdHJpbmc7XG4gIGFzcGVjdF9yYXRpbz86IHN0cmluZztcblxuICAvLyBTdGF0dXMgbWFuYWdlbWVudFxuICBzdGF0dXM6ICdnZW5lcmF0aW5nJyB8ICdkb3dubG9hZGluZycgfCAncHJvY2Vzc2luZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnIHwgJ2RlbGV0ZWQnO1xuICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICBkb3dubG9hZF9wcm9ncmVzczogbnVtYmVyO1xuXG4gIC8vIFVzZXIgaW50ZXJhY3Rpb25cbiAgaXNfZmF2b3JpdGU6IGJvb2xlYW47XG4gIHZpZXdfY291bnQ6IG51bWJlcjtcbiAgbGFzdF92aWV3ZWRfYXQ/OiBzdHJpbmc7XG5cbiAgLy8gVGltZXN0YW1wc1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyU3RvcmFnZVF1b3RhIHtcbiAgdXNlcl9pZDogc3RyaW5nO1xuICB0b3RhbF92aWRlb3M6IG51bWJlcjtcbiAgdG90YWxfc2l6ZV9ieXRlczogbnVtYmVyO1xuICBtYXhfdmlkZW9zOiBudW1iZXI7XG4gIG1heF9zaXplX2J5dGVzOiBudW1iZXI7XG4gIHBsYW5fdHlwZTogJ2ZyZWUnIHwgJ3BybycgfCAnZW50ZXJwcmlzZSc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyUXVvdGFJbmZvIHtcbiAgY3VycmVudF92aWRlb3M6IG51bWJlcjtcbiAgbWF4X3ZpZGVvczogbnVtYmVyO1xuICBjdXJyZW50X3NpemVfYnl0ZXM6IG51bWJlcjtcbiAgbWF4X3NpemVfYnl0ZXM6IG51bWJlcjtcbiAgY3VycmVudF9zaXplX21iOiBudW1iZXI7XG4gIG1heF9zaXplX21iOiBudW1iZXI7XG4gIHZpZGVvc19wZXJjZW50YWdlOiBudW1iZXI7XG4gIHN0b3JhZ2VfcGVyY2VudGFnZTogbnVtYmVyO1xuICBjYW5fdXBsb2FkOiBib29sZWFuO1xuICBpc19zdWJzY3JpYmVkOiBib29sZWFuO1xufVxuXG4vLyBMZWdhY3kgaW50ZXJmYWNlIChrZWVwaW5nIGZvciBjb21wYXRpYmlsaXR5KVxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVZpZGVvSm9iIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl91dWlkOiBzdHJpbmc7XG4gIGpvYl90eXBlOiAnZ2VuZXJhdGUnIHwgJ2VuaGFuY2UnIHwgJ2NvbnZlcnQnO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gIGlucHV0X2RhdGE6IGFueTsgLy8gSlNPTlxuICBvdXRwdXRfZGF0YT86IGFueTsgLy8gSlNPTlxuICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICBjcmVkaXRzX3VzZWQ6IG51bWJlcjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIGNvbXBsZXRlZF9hdD86IHN0cmluZztcbn1cblxuLy8gVGFibGUgbmFtZXNcbmV4cG9ydCBjb25zdCBUQUJMRVMgPSB7XG4gIFVTRVJTOiAndXNlcnMnLFxuICBWRVJJRklDQVRJT05fQ09ERVM6ICd2ZXJpZmljYXRpb25fY29kZXMnLFxuICBWSURFT19KT0JTOiAndmlkZW9fam9icycsIC8vIExlZ2FjeSB0YWJsZVxuICBVU0VSX1ZJREVPUzogJ3VzZXJfdmlkZW9zJywgLy8gTmV3IHZpZGVvIHN0b3JhZ2UgdGFibGVcbiAgVVNFUl9TVE9SQUdFX1FVT1RBUzogJ3VzZXJfc3RvcmFnZV9xdW90YXMnLFxuICBTVUJTQ1JJUFRJT05TOiAnc3Vic2NyaXB0aW9ucycsXG4gIFBBWU1FTlRTOiAncGF5bWVudHMnLFxufSBhcyBjb25zdDtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBTdXBhYmFzZSBlcnJvcnNcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yOiBhbnkpOiBuZXZlciB7XG4gIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgXG4gIGlmIChlcnJvcj8uY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gcm93cyBmb3VuZCcpO1xuICB9XG4gIFxuICBpZiAoZXJyb3I/LmNvZGUgPT09ICcyMzUwNScpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGFscmVhZHkgZXhpc3RzJyk7XG4gIH1cbiAgXG4gIGlmIChlcnJvcj8ubWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgfVxuICBcbiAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyk7XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwic3VwYWJhc2VBZG1pbiIsIlRBQkxFUyIsIlVTRVJTIiwiVkVSSUZJQ0FUSU9OX0NPREVTIiwiVklERU9fSk9CUyIsIlVTRVJfVklERU9TIiwiVVNFUl9TVE9SQUdFX1FVT1RBUyIsIlNVQlNDUklQVElPTlMiLCJQQVlNRU5UUyIsImhhbmRsZVN1cGFiYXNlRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJjb2RlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./services/user.ts":
/*!**************************!*\
  !*** ./services/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addUserCredits: () => (/* binding */ addUserCredits),\n/* harmony export */   deactivateUser: () => (/* binding */ deactivateUser),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserByUuid: () => (/* binding */ getUserByUuid),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   saveUser: () => (/* binding */ saveUser),\n/* harmony export */   updateLastLogin: () => (/* binding */ updateLastLogin),\n/* harmony export */   updateUser: () => (/* binding */ updateUser),\n/* harmony export */   updateUserCredits: () => (/* binding */ updateUserCredits)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _lib_time__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/time */ \"(rsc)/./lib/time.ts\");\n/* harmony import */ var _lib_hash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/hash */ \"(rsc)/./lib/hash.ts\");\n/**\n * User Management Service for VidFab AI Video Platform\n */ \n\n\n/**\n * Save or update a user in the database\n */ async function saveUser(userData) {\n    try {\n        const now = (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)();\n        // Prepare user data with defaults\n        const userToSave = {\n            uuid: userData.uuid || (0,_lib_hash__WEBPACK_IMPORTED_MODULE_2__.getUserUuidFromEmail)(userData.email),\n            email: userData.email.toLowerCase().trim(),\n            nickname: userData.nickname || userData.email.split(\"@\")[0],\n            avatar_url: userData.avatar_url || \"\",\n            signin_type: userData.signin_type,\n            signin_provider: userData.signin_provider,\n            signin_openid: userData.signin_openid,\n            signin_ip: userData.signin_ip,\n            email_verified: userData.email_verified ?? false,\n            last_login: now,\n            created_at: now,\n            updated_at: now,\n            is_active: true,\n            // Set default AI Video platform values\n            subscription_status: \"inactive\",\n            subscription_plan: \"basic\",\n            credits_remaining: 10,\n            total_videos_processed: 0,\n            storage_used_mb: 0,\n            max_storage_mb: 1024\n        };\n        // üî• ‰øÆÂ§çÔºö‰ΩøÁî®UUID‰Ωú‰∏∫ÂÜ≤Á™ÅÈîÆÔºåÈÅøÂÖçemailÂÜ≤Á™ÅÈóÆÈ¢ò\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).upsert(userToSave, {\n            onConflict: \"uuid\",\n            ignoreDuplicates: false\n        }).select().single();\n        if (error) {\n            console.error(\"Save user error:\", error);\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        if (!data) {\n            throw new Error(\"No user data returned from database\");\n        }\n        return {\n            uuid: data.uuid,\n            email: data.email,\n            nickname: data.nickname,\n            avatar_url: data.avatar_url,\n            signin_type: data.signin_type,\n            signin_provider: data.signin_provider,\n            signin_openid: data.signin_openid,\n            created_at: data.created_at,\n            updated_at: data.updated_at,\n            signin_ip: data.signin_ip,\n            email_verified: data.email_verified,\n            last_login: data.last_login,\n            is_active: data.is_active,\n            subscription_status: data.subscription_status,\n            subscription_plan: data.subscription_plan,\n            credits_remaining: data.credits_remaining,\n            total_videos_processed: data.total_videos_processed\n        };\n    } catch (error) {\n        console.error(\"Error in saveUser:\", error);\n        throw error;\n    }\n}\n/**\n * Get user by UUID\n */ async function getUserByUuid(uuid) {\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).select(\"*\").eq(\"uuid\", uuid).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                return null; // User not found\n            }\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        return data ? {\n            uuid: data.uuid,\n            email: data.email,\n            nickname: data.nickname,\n            avatar_url: data.avatar_url,\n            signin_type: data.signin_type,\n            signin_provider: data.signin_provider,\n            signin_openid: data.signin_openid,\n            created_at: data.created_at,\n            updated_at: data.updated_at,\n            signin_ip: data.signin_ip,\n            email_verified: data.email_verified,\n            last_login: data.last_login,\n            is_active: data.is_active,\n            subscription_status: data.subscription_status,\n            subscription_plan: data.subscription_plan,\n            credits_remaining: data.credits_remaining,\n            total_videos_processed: data.total_videos_processed\n        } : null;\n    } catch (error) {\n        console.error(\"Error in getUserByUuid:\", error);\n        throw error;\n    }\n}\n/**\n * Get user by email\n */ async function getUserByEmail(email) {\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).select(\"*\").eq(\"email\", email.toLowerCase().trim()).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                return null; // User not found\n            }\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        return data ? {\n            uuid: data.uuid,\n            email: data.email,\n            nickname: data.nickname,\n            avatar_url: data.avatar_url,\n            signin_type: data.signin_type,\n            signin_provider: data.signin_provider,\n            signin_openid: data.signin_openid,\n            created_at: data.created_at,\n            updated_at: data.updated_at,\n            signin_ip: data.signin_ip,\n            email_verified: data.email_verified,\n            last_login: data.last_login,\n            is_active: data.is_active,\n            subscription_status: data.subscription_status,\n            subscription_plan: data.subscription_plan,\n            credits_remaining: data.credits_remaining,\n            total_videos_processed: data.total_videos_processed\n        } : null;\n    } catch (error) {\n        console.error(\"Error in getUserByEmail:\", error);\n        throw error;\n    }\n}\n/**\n * Update user data\n */ async function updateUser(uuid, updateData) {\n    try {\n        const updates = {\n            ...updateData,\n            updated_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)()\n        };\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).update(updates).eq(\"uuid\", uuid).select().single();\n        if (error) {\n            console.error(\"Update user error:\", error);\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        if (!data) {\n            throw new Error(\"No user data returned from update\");\n        }\n        return {\n            uuid: data.uuid,\n            email: data.email,\n            nickname: data.nickname,\n            avatar_url: data.avatar_url,\n            signin_type: data.signin_type,\n            signin_provider: data.signin_provider,\n            signin_openid: data.signin_openid,\n            created_at: data.created_at,\n            updated_at: data.updated_at,\n            signin_ip: data.signin_ip,\n            email_verified: data.email_verified,\n            last_login: data.last_login,\n            is_active: data.is_active,\n            subscription_status: data.subscription_status,\n            subscription_plan: data.subscription_plan,\n            credits_remaining: data.credits_remaining,\n            total_videos_processed: data.total_videos_processed\n        };\n    } catch (error) {\n        console.error(\"Error in updateUser:\", error);\n        throw error;\n    }\n}\n/**\n * Update user's last login timestamp\n */ async function updateLastLogin(uuid, ip) {\n    try {\n        const updates = {\n            last_login: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)(),\n            updated_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)()\n        };\n        if (ip) {\n            updates.signin_ip = ip;\n        }\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).update(updates).eq(\"uuid\", uuid);\n        if (error) {\n            console.error(\"Update last login error:\", error);\n        // Don't throw error for last login update failures\n        }\n    } catch (error) {\n        console.error(\"Error in updateLastLogin:\", error);\n    // Don't throw error for last login update failures\n    }\n}\n/**\n * Get user profile (public information)\n */ async function getUserProfile(uuid) {\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).select(\"uuid, email, nickname, avatar_url, created_at, subscription_status, subscription_plan, credits_remaining\").eq(\"uuid\", uuid).eq(\"is_active\", true).single();\n        if (error) {\n            if (error.code === \"PGRST116\") {\n                return null;\n            }\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        return data ? {\n            uuid: data.uuid,\n            email: data.email,\n            nickname: data.nickname,\n            avatar_url: data.avatar_url,\n            created_at: data.created_at,\n            subscription_status: data.subscription_status,\n            subscription_plan: data.subscription_plan,\n            credits_remaining: data.credits_remaining\n        } : null;\n    } catch (error) {\n        console.error(\"Error in getUserProfile:\", error);\n        throw error;\n    }\n}\n/**\n * Deactivate user account\n */ async function deactivateUser(uuid) {\n    try {\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).update({\n            is_active: false,\n            updated_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)()\n        }).eq(\"uuid\", uuid);\n        if (error) {\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n    } catch (error) {\n        console.error(\"Error in deactivateUser:\", error);\n        throw error;\n    }\n}\n/**\n * Update user credits (for AI video processing)\n */ async function updateUserCredits(uuid, creditsUsed) {\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).select(\"credits_remaining\").eq(\"uuid\", uuid).single();\n        if (error) {\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        const currentCredits = data.credits_remaining || 0;\n        const newCredits = Math.max(0, currentCredits - creditsUsed);\n        const { error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).update({\n            credits_remaining: newCredits,\n            updated_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)()\n        }).eq(\"uuid\", uuid);\n        if (updateError) {\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(updateError);\n        }\n        return newCredits;\n    } catch (error) {\n        console.error(\"Error in updateUserCredits:\", error);\n        throw error;\n    }\n}\n/**\n * Add credits to user account\n */ async function addUserCredits(uuid, creditsToAdd) {\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).select(\"credits_remaining\").eq(\"uuid\", uuid).single();\n        if (error) {\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n        }\n        const currentCredits = data.credits_remaining || 0;\n        const newCredits = currentCredits + creditsToAdd;\n        const { error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USERS).update({\n            credits_remaining: newCredits,\n            updated_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_1__.getIsoTimestr)()\n        }).eq(\"uuid\", uuid);\n        if (updateError) {\n            (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(updateError);\n        }\n        return newCredits;\n    } catch (error) {\n        console.error(\"Error in addUserCredits:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FDeENpQyxJQUFJLENBQUNoQyxpREFBTUEsQ0FBQ2lDLEtBQUssRUFDakJJLE1BQU0sQ0FBQyxxQkFDUEssRUFBRSxDQUFDLFFBQVFsQyxNQUNYOEIsTUFBTTtRQUVULElBQUlQLE9BQU87WUFDVDlCLGtFQUFtQkEsQ0FBQzhCO1FBQ3RCO1FBRUEsTUFBTXdCLGlCQUFpQnpCLEtBQUtKLGlCQUFpQixJQUFJO1FBQ2pELE1BQU04QixhQUFhRCxpQkFBaUJNO1FBRXBDLE1BQU0sRUFBRTlCLE9BQU80QixXQUFXLEVBQUUsR0FBRyxNQUFNNUQsd0RBQWFBLENBQy9DaUMsSUFBSSxDQUFDaEMsaURBQU1BLENBQUNpQyxLQUFLLEVBQ2pCZSxNQUFNLENBQUM7WUFDTnRCLG1CQUFtQjhCO1lBQ25CbEMsWUFBWXBCLHdEQUFhQTtRQUMzQixHQUNDd0MsRUFBRSxDQUFDLFFBQVFsQztRQUVkLElBQUltRCxhQUFhO1lBQ2YxRCxrRUFBbUJBLENBQUMwRDtRQUN0QjtRQUVBLE9BQU9IO0lBQ1QsRUFBRSxPQUFPekIsT0FBWTtRQUNuQlEsUUFBUVIsS0FBSyxDQUFDLDRCQUE0QkE7UUFDMUMsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL3NlcnZpY2VzL3VzZXIudHM/NzQ4MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVzZXIgTWFuYWdlbWVudCBTZXJ2aWNlIGZvciBWaWRGYWIgQUkgVmlkZW8gUGxhdGZvcm1cbiAqL1xuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiwgVEFCTEVTLCBoYW5kbGVTdXBhYmFzZUVycm9yLCB0eXBlIERhdGFiYXNlVXNlciB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IFVzZXIsIENyZWF0ZVVzZXJEYXRhLCBVcGRhdGVVc2VyRGF0YSwgVXNlclByb2ZpbGUgfSBmcm9tICdAL3R5cGVzL3VzZXInO1xuaW1wb3J0IHsgZ2V0SXNvVGltZXN0ciB9IGZyb20gJ0AvbGliL3RpbWUnO1xuaW1wb3J0IHsgZ2V0VXVpZCwgZ2V0VXNlclV1aWRGcm9tRW1haWwgfSBmcm9tICdAL2xpYi9oYXNoJztcblxuLyoqXG4gKiBTYXZlIG9yIHVwZGF0ZSBhIHVzZXIgaW4gdGhlIGRhdGFiYXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlVXNlcih1c2VyRGF0YTogQ3JlYXRlVXNlckRhdGEgJiB7IHV1aWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8VXNlcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IG5vdyA9IGdldElzb1RpbWVzdHIoKTtcbiAgICBcbiAgICAvLyBQcmVwYXJlIHVzZXIgZGF0YSB3aXRoIGRlZmF1bHRzXG4gICAgY29uc3QgdXNlclRvU2F2ZTogUGFydGlhbDxEYXRhYmFzZVVzZXI+ID0ge1xuICAgICAgdXVpZDogdXNlckRhdGEudXVpZCB8fCBnZXRVc2VyVXVpZEZyb21FbWFpbCh1c2VyRGF0YS5lbWFpbCksXG4gICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwudG9Mb3dlckNhc2UoKS50cmltKCksXG4gICAgICBuaWNrbmFtZTogdXNlckRhdGEubmlja25hbWUgfHwgdXNlckRhdGEuZW1haWwuc3BsaXQoJ0AnKVswXSxcbiAgICAgIGF2YXRhcl91cmw6IHVzZXJEYXRhLmF2YXRhcl91cmwgfHwgJycsXG4gICAgICBzaWduaW5fdHlwZTogdXNlckRhdGEuc2lnbmluX3R5cGUsXG4gICAgICBzaWduaW5fcHJvdmlkZXI6IHVzZXJEYXRhLnNpZ25pbl9wcm92aWRlcixcbiAgICAgIHNpZ25pbl9vcGVuaWQ6IHVzZXJEYXRhLnNpZ25pbl9vcGVuaWQsXG4gICAgICBzaWduaW5faXA6IHVzZXJEYXRhLnNpZ25pbl9pcCxcbiAgICAgIGVtYWlsX3ZlcmlmaWVkOiB1c2VyRGF0YS5lbWFpbF92ZXJpZmllZCA/PyBmYWxzZSxcbiAgICAgIGxhc3RfbG9naW46IG5vdyxcbiAgICAgIGNyZWF0ZWRfYXQ6IG5vdyxcbiAgICAgIHVwZGF0ZWRfYXQ6IG5vdyxcbiAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcbiAgICAgIC8vIFNldCBkZWZhdWx0IEFJIFZpZGVvIHBsYXRmb3JtIHZhbHVlc1xuICAgICAgc3Vic2NyaXB0aW9uX3N0YXR1czogJ2luYWN0aXZlJyxcbiAgICAgIHN1YnNjcmlwdGlvbl9wbGFuOiAnYmFzaWMnLFxuICAgICAgY3JlZGl0c19yZW1haW5pbmc6IDEwLCAvLyBGcmVlIGNyZWRpdHMgZm9yIG5ldyB1c2Vyc1xuICAgICAgdG90YWxfdmlkZW9zX3Byb2Nlc3NlZDogMCxcbiAgICAgIHN0b3JhZ2VfdXNlZF9tYjogMCxcbiAgICAgIG1heF9zdG9yYWdlX21iOiAxMDI0LCAvLyAxR0IgZGVmYXVsdFxuICAgIH07XG5cbiAgICAvLyDwn5SlIOS/ruWkje+8muS9v+eUqFVVSUTkvZzkuLrlhrLnqoHplK7vvIzpgb/lhY1lbWFpbOWGsueqgemXrumimFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFRBQkxFUy5VU0VSUylcbiAgICAgIC51cHNlcnQodXNlclRvU2F2ZSwge1xuICAgICAgICBvbkNvbmZsaWN0OiAndXVpZCcsXG4gICAgICAgIGlnbm9yZUR1cGxpY2F0ZXM6IGZhbHNlXG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NhdmUgdXNlciBlcnJvcjonLCBlcnJvcik7XG4gICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBkYXRhIHJldHVybmVkIGZyb20gZGF0YWJhc2UnKTtcbiAgICB9XG5cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdXVpZDogZGF0YS51dWlkLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBuaWNrbmFtZTogZGF0YS5uaWNrbmFtZSxcbiAgICAgIGF2YXRhcl91cmw6IGRhdGEuYXZhdGFyX3VybCxcbiAgICAgIHNpZ25pbl90eXBlOiBkYXRhLnNpZ25pbl90eXBlLFxuICAgICAgc2lnbmluX3Byb3ZpZGVyOiBkYXRhLnNpZ25pbl9wcm92aWRlcixcbiAgICAgIHNpZ25pbl9vcGVuaWQ6IGRhdGEuc2lnbmluX29wZW5pZCxcbiAgICAgIGNyZWF0ZWRfYXQ6IGRhdGEuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IGRhdGEudXBkYXRlZF9hdCxcbiAgICAgIHNpZ25pbl9pcDogZGF0YS5zaWduaW5faXAsXG4gICAgICBlbWFpbF92ZXJpZmllZDogZGF0YS5lbWFpbF92ZXJpZmllZCxcbiAgICAgIGxhc3RfbG9naW46IGRhdGEubGFzdF9sb2dpbixcbiAgICAgIGlzX2FjdGl2ZTogZGF0YS5pc19hY3RpdmUsXG4gICAgICBzdWJzY3JpcHRpb25fc3RhdHVzOiBkYXRhLnN1YnNjcmlwdGlvbl9zdGF0dXMsXG4gICAgICBzdWJzY3JpcHRpb25fcGxhbjogZGF0YS5zdWJzY3JpcHRpb25fcGxhbixcbiAgICAgIGNyZWRpdHNfcmVtYWluaW5nOiBkYXRhLmNyZWRpdHNfcmVtYWluaW5nLFxuICAgICAgdG90YWxfdmlkZW9zX3Byb2Nlc3NlZDogZGF0YS50b3RhbF92aWRlb3NfcHJvY2Vzc2VkLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzYXZlVXNlcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdXNlciBieSBVVUlEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlVdWlkKHV1aWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShUQUJMRVMuVVNFUlMpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgndXVpZCcsIHV1aWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgIHJldHVybiBudWxsOyAvLyBVc2VyIG5vdCBmb3VuZFxuICAgICAgfVxuICAgICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGEgPyB7XG4gICAgICB1dWlkOiBkYXRhLnV1aWQsXG4gICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgIG5pY2tuYW1lOiBkYXRhLm5pY2tuYW1lLFxuICAgICAgYXZhdGFyX3VybDogZGF0YS5hdmF0YXJfdXJsLFxuICAgICAgc2lnbmluX3R5cGU6IGRhdGEuc2lnbmluX3R5cGUsXG4gICAgICBzaWduaW5fcHJvdmlkZXI6IGRhdGEuc2lnbmluX3Byb3ZpZGVyLFxuICAgICAgc2lnbmluX29wZW5pZDogZGF0YS5zaWduaW5fb3BlbmlkLFxuICAgICAgY3JlYXRlZF9hdDogZGF0YS5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogZGF0YS51cGRhdGVkX2F0LFxuICAgICAgc2lnbmluX2lwOiBkYXRhLnNpZ25pbl9pcCxcbiAgICAgIGVtYWlsX3ZlcmlmaWVkOiBkYXRhLmVtYWlsX3ZlcmlmaWVkLFxuICAgICAgbGFzdF9sb2dpbjogZGF0YS5sYXN0X2xvZ2luLFxuICAgICAgaXNfYWN0aXZlOiBkYXRhLmlzX2FjdGl2ZSxcbiAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6IGRhdGEuc3Vic2NyaXB0aW9uX3N0YXR1cyxcbiAgICAgIHN1YnNjcmlwdGlvbl9wbGFuOiBkYXRhLnN1YnNjcmlwdGlvbl9wbGFuLFxuICAgICAgY3JlZGl0c19yZW1haW5pbmc6IGRhdGEuY3JlZGl0c19yZW1haW5pbmcsXG4gICAgICB0b3RhbF92aWRlb3NfcHJvY2Vzc2VkOiBkYXRhLnRvdGFsX3ZpZGVvc19wcm9jZXNzZWQsXG4gICAgfSA6IG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRVc2VyQnlVdWlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB1c2VyIGJ5IGVtYWlsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFRBQkxFUy5VU0VSUylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsLnRvTG93ZXJDYXNlKCkudHJpbSgpKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICByZXR1cm4gbnVsbDsgLy8gVXNlciBub3QgZm91bmRcbiAgICAgIH1cbiAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhID8ge1xuICAgICAgdXVpZDogZGF0YS51dWlkLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBuaWNrbmFtZTogZGF0YS5uaWNrbmFtZSxcbiAgICAgIGF2YXRhcl91cmw6IGRhdGEuYXZhdGFyX3VybCxcbiAgICAgIHNpZ25pbl90eXBlOiBkYXRhLnNpZ25pbl90eXBlLFxuICAgICAgc2lnbmluX3Byb3ZpZGVyOiBkYXRhLnNpZ25pbl9wcm92aWRlcixcbiAgICAgIHNpZ25pbl9vcGVuaWQ6IGRhdGEuc2lnbmluX29wZW5pZCxcbiAgICAgIGNyZWF0ZWRfYXQ6IGRhdGEuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IGRhdGEudXBkYXRlZF9hdCxcbiAgICAgIHNpZ25pbl9pcDogZGF0YS5zaWduaW5faXAsXG4gICAgICBlbWFpbF92ZXJpZmllZDogZGF0YS5lbWFpbF92ZXJpZmllZCxcbiAgICAgIGxhc3RfbG9naW46IGRhdGEubGFzdF9sb2dpbixcbiAgICAgIGlzX2FjdGl2ZTogZGF0YS5pc19hY3RpdmUsXG4gICAgICBzdWJzY3JpcHRpb25fc3RhdHVzOiBkYXRhLnN1YnNjcmlwdGlvbl9zdGF0dXMsXG4gICAgICBzdWJzY3JpcHRpb25fcGxhbjogZGF0YS5zdWJzY3JpcHRpb25fcGxhbixcbiAgICAgIGNyZWRpdHNfcmVtYWluaW5nOiBkYXRhLmNyZWRpdHNfcmVtYWluaW5nLFxuICAgICAgdG90YWxfdmlkZW9zX3Byb2Nlc3NlZDogZGF0YS50b3RhbF92aWRlb3NfcHJvY2Vzc2VkLFxuICAgIH0gOiBudWxsO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0VXNlckJ5RW1haWw6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIHVzZXIgZGF0YVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlcih1dWlkOiBzdHJpbmcsIHVwZGF0ZURhdGE6IFVwZGF0ZVVzZXJEYXRhKTogUHJvbWlzZTxVc2VyPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXBkYXRlcyA9IHtcbiAgICAgIC4uLnVwZGF0ZURhdGEsXG4gICAgICB1cGRhdGVkX2F0OiBnZXRJc29UaW1lc3RyKCksXG4gICAgfTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFRBQkxFUy5VU0VSUylcbiAgICAgIC51cGRhdGUodXBkYXRlcylcbiAgICAgIC5lcSgndXVpZCcsIHV1aWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignVXBkYXRlIHVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgZGF0YSByZXR1cm5lZCBmcm9tIHVwZGF0ZScpO1xuICAgIH1cblxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB1dWlkOiBkYXRhLnV1aWQsXG4gICAgICBlbWFpbDogZGF0YS5lbWFpbCxcbiAgICAgIG5pY2tuYW1lOiBkYXRhLm5pY2tuYW1lLFxuICAgICAgYXZhdGFyX3VybDogZGF0YS5hdmF0YXJfdXJsLFxuICAgICAgc2lnbmluX3R5cGU6IGRhdGEuc2lnbmluX3R5cGUsXG4gICAgICBzaWduaW5fcHJvdmlkZXI6IGRhdGEuc2lnbmluX3Byb3ZpZGVyLFxuICAgICAgc2lnbmluX29wZW5pZDogZGF0YS5zaWduaW5fb3BlbmlkLFxuICAgICAgY3JlYXRlZF9hdDogZGF0YS5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogZGF0YS51cGRhdGVkX2F0LFxuICAgICAgc2lnbmluX2lwOiBkYXRhLnNpZ25pbl9pcCxcbiAgICAgIGVtYWlsX3ZlcmlmaWVkOiBkYXRhLmVtYWlsX3ZlcmlmaWVkLFxuICAgICAgbGFzdF9sb2dpbjogZGF0YS5sYXN0X2xvZ2luLFxuICAgICAgaXNfYWN0aXZlOiBkYXRhLmlzX2FjdGl2ZSxcbiAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6IGRhdGEuc3Vic2NyaXB0aW9uX3N0YXR1cyxcbiAgICAgIHN1YnNjcmlwdGlvbl9wbGFuOiBkYXRhLnN1YnNjcmlwdGlvbl9wbGFuLFxuICAgICAgY3JlZGl0c19yZW1haW5pbmc6IGRhdGEuY3JlZGl0c19yZW1haW5pbmcsXG4gICAgICB0b3RhbF92aWRlb3NfcHJvY2Vzc2VkOiBkYXRhLnRvdGFsX3ZpZGVvc19wcm9jZXNzZWQsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHVwZGF0ZVVzZXI6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIHVzZXIncyBsYXN0IGxvZ2luIHRpbWVzdGFtcFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGFzdExvZ2luKHV1aWQ6IHN0cmluZywgaXA/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cGRhdGVzOiBhbnkgPSB7XG4gICAgICBsYXN0X2xvZ2luOiBnZXRJc29UaW1lc3RyKCksXG4gICAgICB1cGRhdGVkX2F0OiBnZXRJc29UaW1lc3RyKCksXG4gICAgfTtcblxuICAgIGlmIChpcCkge1xuICAgICAgdXBkYXRlcy5zaWduaW5faXAgPSBpcDtcbiAgICB9XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShUQUJMRVMuVVNFUlMpXG4gICAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgICAuZXEoJ3V1aWQnLCB1dWlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignVXBkYXRlIGxhc3QgbG9naW4gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgLy8gRG9uJ3QgdGhyb3cgZXJyb3IgZm9yIGxhc3QgbG9naW4gdXBkYXRlIGZhaWx1cmVzXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlTGFzdExvZ2luOicsIGVycm9yKTtcbiAgICAvLyBEb24ndCB0aHJvdyBlcnJvciBmb3IgbGFzdCBsb2dpbiB1cGRhdGUgZmFpbHVyZXNcbiAgfVxufVxuXG4vKipcbiAqIEdldCB1c2VyIHByb2ZpbGUgKHB1YmxpYyBpbmZvcm1hdGlvbilcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJQcm9maWxlKHV1aWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclByb2ZpbGUgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oVEFCTEVTLlVTRVJTKVxuICAgICAgLnNlbGVjdCgndXVpZCwgZW1haWwsIG5pY2tuYW1lLCBhdmF0YXJfdXJsLCBjcmVhdGVkX2F0LCBzdWJzY3JpcHRpb25fc3RhdHVzLCBzdWJzY3JpcHRpb25fcGxhbiwgY3JlZGl0c19yZW1haW5pbmcnKVxuICAgICAgLmVxKCd1dWlkJywgdXVpZClcbiAgICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSlcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YSA/IHtcbiAgICAgIHV1aWQ6IGRhdGEudXVpZCxcbiAgICAgIGVtYWlsOiBkYXRhLmVtYWlsLFxuICAgICAgbmlja25hbWU6IGRhdGEubmlja25hbWUsXG4gICAgICBhdmF0YXJfdXJsOiBkYXRhLmF2YXRhcl91cmwsXG4gICAgICBjcmVhdGVkX2F0OiBkYXRhLmNyZWF0ZWRfYXQsXG4gICAgICBzdWJzY3JpcHRpb25fc3RhdHVzOiBkYXRhLnN1YnNjcmlwdGlvbl9zdGF0dXMsXG4gICAgICBzdWJzY3JpcHRpb25fcGxhbjogZGF0YS5zdWJzY3JpcHRpb25fcGxhbixcbiAgICAgIGNyZWRpdHNfcmVtYWluaW5nOiBkYXRhLmNyZWRpdHNfcmVtYWluaW5nLFxuICAgIH0gOiBudWxsO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0VXNlclByb2ZpbGU6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogRGVhY3RpdmF0ZSB1c2VyIGFjY291bnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlYWN0aXZhdGVVc2VyKHV1aWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKFRBQkxFUy5VU0VSUylcbiAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgaXNfYWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZF9hdDogZ2V0SXNvVGltZXN0cigpIFxuICAgICAgfSlcbiAgICAgIC5lcSgndXVpZCcsIHV1aWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRlYWN0aXZhdGVVc2VyOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyIGNyZWRpdHMgKGZvciBBSSB2aWRlbyBwcm9jZXNzaW5nKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlckNyZWRpdHModXVpZDogc3RyaW5nLCBjcmVkaXRzVXNlZDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShUQUJMRVMuVVNFUlMpXG4gICAgICAuc2VsZWN0KCdjcmVkaXRzX3JlbWFpbmluZycpXG4gICAgICAuZXEoJ3V1aWQnLCB1dWlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q3JlZGl0cyA9IGRhdGEuY3JlZGl0c19yZW1haW5pbmcgfHwgMDtcbiAgICBjb25zdCBuZXdDcmVkaXRzID0gTWF0aC5tYXgoMCwgY3VycmVudENyZWRpdHMgLSBjcmVkaXRzVXNlZCk7XG5cbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oVEFCTEVTLlVTRVJTKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIGNyZWRpdHNfcmVtYWluaW5nOiBuZXdDcmVkaXRzLFxuICAgICAgICB1cGRhdGVkX2F0OiBnZXRJc29UaW1lc3RyKCksXG4gICAgICB9KVxuICAgICAgLmVxKCd1dWlkJywgdXVpZCk7XG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IodXBkYXRlRXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdDcmVkaXRzO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdXBkYXRlVXNlckNyZWRpdHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGNyZWRpdHMgdG8gdXNlciBhY2NvdW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRVc2VyQ3JlZGl0cyh1dWlkOiBzdHJpbmcsIGNyZWRpdHNUb0FkZDogbnVtYmVyKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbShUQUJMRVMuVVNFUlMpXG4gICAgICAuc2VsZWN0KCdjcmVkaXRzX3JlbWFpbmluZycpXG4gICAgICAuZXEoJ3V1aWQnLCB1dWlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Q3JlZGl0cyA9IGRhdGEuY3JlZGl0c19yZW1haW5pbmcgfHwgMDtcbiAgICBjb25zdCBuZXdDcmVkaXRzID0gY3VycmVudENyZWRpdHMgKyBjcmVkaXRzVG9BZGQ7XG5cbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oVEFCTEVTLlVTRVJTKVxuICAgICAgLnVwZGF0ZSh7XG4gICAgICAgIGNyZWRpdHNfcmVtYWluaW5nOiBuZXdDcmVkaXRzLFxuICAgICAgICB1cGRhdGVkX2F0OiBnZXRJc29UaW1lc3RyKCksXG4gICAgICB9KVxuICAgICAgLmVxKCd1dWlkJywgdXVpZCk7XG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IodXBkYXRlRXJyb3IpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdDcmVkaXRzO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYWRkVXNlckNyZWRpdHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJUQUJMRVMiLCJoYW5kbGVTdXBhYmFzZUVycm9yIiwiZ2V0SXNvVGltZXN0ciIsImdldFVzZXJVdWlkRnJvbUVtYWlsIiwic2F2ZVVzZXIiLCJ1c2VyRGF0YSIsIm5vdyIsInVzZXJUb1NhdmUiLCJ1dWlkIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJuaWNrbmFtZSIsInNwbGl0IiwiYXZhdGFyX3VybCIsInNpZ25pbl90eXBlIiwic2lnbmluX3Byb3ZpZGVyIiwic2lnbmluX29wZW5pZCIsInNpZ25pbl9pcCIsImVtYWlsX3ZlcmlmaWVkIiwibGFzdF9sb2dpbiIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiaXNfYWN0aXZlIiwic3Vic2NyaXB0aW9uX3N0YXR1cyIsInN1YnNjcmlwdGlvbl9wbGFuIiwiY3JlZGl0c19yZW1haW5pbmciLCJ0b3RhbF92aWRlb3NfcHJvY2Vzc2VkIiwic3RvcmFnZV91c2VkX21iIiwibWF4X3N0b3JhZ2VfbWIiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwiVVNFUlMiLCJ1cHNlcnQiLCJvbkNvbmZsaWN0IiwiaWdub3JlRHVwbGljYXRlcyIsInNlbGVjdCIsInNpbmdsZSIsImNvbnNvbGUiLCJFcnJvciIsImdldFVzZXJCeVV1aWQiLCJlcSIsImNvZGUiLCJnZXRVc2VyQnlFbWFpbCIsInVwZGF0ZVVzZXIiLCJ1cGRhdGVEYXRhIiwidXBkYXRlcyIsInVwZGF0ZSIsInVwZGF0ZUxhc3RMb2dpbiIsImlwIiwiZ2V0VXNlclByb2ZpbGUiLCJkZWFjdGl2YXRlVXNlciIsInVwZGF0ZVVzZXJDcmVkaXRzIiwiY3JlZGl0c1VzZWQiLCJjdXJyZW50Q3JlZGl0cyIsIm5ld0NyZWRpdHMiLCJNYXRoIiwibWF4IiwidXBkYXRlRXJyb3IiLCJhZGRVc2VyQ3JlZGl0cyIsImNyZWRpdHNUb0FkZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./services/user.ts\n");

/***/ })

};
;