"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user/videos/route";
exports.ids = ["app/api/user/videos/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fvideos%2Froute&page=%2Fapi%2Fuser%2Fvideos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fvideos%2Froute.ts&appDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fvideos%2Froute&page=%2Fapi%2Fuser%2Fvideos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fvideos%2Froute.ts&appDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jacob_Desktop_vidfab_app_api_user_videos_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/user/videos/route.ts */ \"(rsc)/./app/api/user/videos/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user/videos/route\",\n        pathname: \"/api/user/videos\",\n        filename: \"route\",\n        bundlePath: \"app/api/user/videos/route\"\n    },\n    resolvedPagePath: \"/Users/jacob/Desktop/vidfab/app/api/user/videos/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jacob_Desktop_vidfab_app_api_user_videos_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user/videos/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyJTJGdmlkZW9zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ1c2VyJTJGdmlkZW9zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdXNlciUyRnZpZGVvcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmphY29iJTJGRGVza3RvcCUyRnZpZGZhYiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZqYWNvYiUyRkRlc2t0b3AlMkZ2aWRmYWImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNRO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/ZGE4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvamFjb2IvRGVza3RvcC92aWRmYWIvYXBwL2FwaS91c2VyL3ZpZGVvcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3VzZXIvdmlkZW9zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXNlci92aWRlb3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VzZXIvdmlkZW9zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2phY29iL0Rlc2t0b3AvdmlkZmFiL2FwcC9hcGkvdXNlci92aWRlb3Mvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VzZXIvdmlkZW9zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fvideos%2Froute&page=%2Fapi%2Fuser%2Fvideos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fvideos%2Froute.ts&appDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/user/videos/route.ts":
/*!**************************************!*\
  !*** ./app/api/user/videos/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/auth/config */ \"(rsc)/./auth/config.ts\");\n/* harmony import */ var _lib_database_user_videos__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/database/user-videos */ \"(rsc)/./lib/database/user-videos.ts\");\n/* harmony import */ var _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/utils/error-handling */ \"(rsc)/./lib/utils/error-handling.ts\");\n/**\n * User Videos API\n * Ëé∑ÂèñÁî®Êà∑ËßÜÈ¢ëÂàóË°®ÁöÑAPIÁ´ØÁÇπ\n * VidFab AI Video Platform\n */ \n\n\n\n\nasync function GET(request) {\n    try {\n        // NextAuth 4.x ËÆ§ËØÅÊñπÂºè\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_auth_config__WEBPACK_IMPORTED_MODULE_2__.authConfig);\n        if (!session?.user) {\n            console.error(\"‚ùå Authentication failed: No session or user\");\n            // üî• ÂºÄÂèëÁéØÂ¢ÉÈôçÁ∫ßÂ§ÑÁêÜ - ËøîÂõûÊ®°ÊãüÊï∞ÊçÆÁî®‰∫éÊµãËØï\n            if (true) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        videos: [],\n                        pagination: {\n                            page: 1,\n                            limit: 20,\n                            total: 0,\n                            hasMore: false\n                        }\n                    },\n                    dev_mode: true,\n                    message: \"Authentication failed - returning empty data for development testing\"\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // üî• ‰øÆÂ§çÔºöÂ∞ùËØïÂ§ö‰∏™ÂèØËÉΩÁöÑÁî®Êà∑IDÂ≠óÊÆµ\n        let userId = session.user.uuid || session.user.id;\n        if (!userId) {\n            console.error(\"‚ùå Authentication failed: User UUID/ID missing\", {\n                userKeys: Object.keys(session.user || {}),\n                userData: session.user\n            });\n            // üî• ÂºÄÂèëÁéØÂ¢ÉÈôçÁ∫ßÂ§ÑÁêÜ\n            if (true) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: {\n                        videos: [],\n                        pagination: {\n                            page: 1,\n                            limit: 20,\n                            total: 0,\n                            hasMore: false\n                        }\n                    },\n                    dev_mode: true,\n                    message: \"User UUID missing - returning empty data for development testing\"\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"User UUID missing\"\n            }, {\n                status: 401\n            });\n        }\n        // userId already extracted above\n        const { searchParams } = new URL(request.url);\n        // Ëß£ÊûêÊü•ËØ¢ÂèÇÊï∞\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"20\");\n        const status = searchParams.get(\"status\")?.split(\",\");\n        const orderBy = searchParams.get(\"orderBy\") || \"created_at\";\n        const orderDirection = searchParams.get(\"orderDirection\") || \"desc\";\n        const search = searchParams.get(\"search\") || undefined;\n        // ÂèÇÊï∞È™åËØÅ\n        if (page < 1 || limit < 1 || limit > 100) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid pagination parameters\"\n            }, {\n                status: 400\n            });\n        }\n        // Ëé∑ÂèñÁî®Êà∑ËßÜÈ¢ë\n        const result = await _lib_database_user_videos__WEBPACK_IMPORTED_MODULE_3__.UserVideosDB.getUserVideos(userId, {\n            page,\n            limit,\n            status,\n            orderBy,\n            orderDirection,\n            search\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                videos: result.videos,\n                pagination: {\n                    page: result.page,\n                    limit: result.limit,\n                    total: result.total,\n                    hasMore: result.hasMore\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"‚ùå User videos API error:\", error);\n        _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_4__.ErrorReporter.getInstance().reportError(error, \"User Videos API\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Failed to fetch user videos\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: false,\n        error: \"Method not allowed\"\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVk7b0JBQ1ZDLE1BQU13QixPQUFPeEIsSUFBSTtvQkFDakJDLE9BQU91QixPQUFPdkIsS0FBSztvQkFDbkJDLE9BQU9zQixPQUFPdEIsS0FBSztvQkFDbkJDLFNBQVNxQixPQUFPckIsT0FBTztnQkFDekI7WUFDRjtRQUNGO0lBRUYsRUFBRSxPQUFPVixPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDTixvRUFBYUEsQ0FBQ3VDLFdBQVcsR0FBR0MsV0FBVyxDQUFDbEMsT0FBTztRQUUvQyxPQUFPVixxREFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RILE9BQU87UUFDVCxHQUNBO1lBQUVhLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZXNCLEtBQUt2QyxPQUFvQjtJQUM3QyxPQUFPTixxREFBWUEsQ0FBQ1ksSUFBSSxDQUN0QjtRQUFFQyxTQUFTO1FBQU9ILE9BQU87SUFBcUIsR0FDOUM7UUFBRWEsUUFBUTtJQUFJO0FBRWxCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvdXNlci92aWRlb3Mvcm91dGUudHM/YjE3MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVzZXIgVmlkZW9zIEFQSVxuICog6I635Y+W55So5oi36KeG6aKR5YiX6KGo55qEQVBJ56uv54K5XG4gKiBWaWRGYWIgQUkgVmlkZW8gUGxhdGZvcm1cbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCJcbmltcG9ydCB7IGF1dGhDb25maWcgfSBmcm9tIFwiQC9hdXRoL2NvbmZpZ1wiXG5pbXBvcnQgeyBVc2VyVmlkZW9zREIgfSBmcm9tIFwiQC9saWIvZGF0YWJhc2UvdXNlci12aWRlb3NcIlxuaW1wb3J0IHsgRXJyb3JSZXBvcnRlciB9IGZyb20gXCJAL2xpYi91dGlscy9lcnJvci1oYW5kbGluZ1wiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBOZXh0QXV0aCA0Lngg6K6k6K+B5pa55byPXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aENvbmZpZylcblxuXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQXV0aGVudGljYXRpb24gZmFpbGVkOiBObyBzZXNzaW9uIG9yIHVzZXInKVxuXG4gICAgICAvLyDwn5SlIOW8gOWPkeeOr+Wig+mZjee6p+WkhOeQhiAtIOi/lOWbnuaooeaLn+aVsOaNrueUqOS6jua1i+ivlVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB2aWRlb3M6IFtdLFxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgICAgICBsaW1pdDogMjAsXG4gICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICBoYXNNb3JlOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGV2X21vZGU6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogXCJBdXRoZW50aWNhdGlvbiBmYWlsZWQgLSByZXR1cm5pbmcgZW1wdHkgZGF0YSBmb3IgZGV2ZWxvcG1lbnQgdGVzdGluZ1wiXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8g8J+UpSDkv67lpI3vvJrlsJ3or5XlpJrkuKrlj6/og73nmoTnlKjmiLdJROWtl+autVxuICAgIGxldCB1c2VySWQgPSBzZXNzaW9uLnVzZXIudXVpZCB8fCBzZXNzaW9uLnVzZXIuaWRcblxuICAgIGlmICghdXNlcklkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQXV0aGVudGljYXRpb24gZmFpbGVkOiBVc2VyIFVVSUQvSUQgbWlzc2luZycsIHtcbiAgICAgICAgdXNlcktleXM6IE9iamVjdC5rZXlzKHNlc3Npb24udXNlciB8fCB7fSksXG4gICAgICAgIHVzZXJEYXRhOiBzZXNzaW9uLnVzZXJcbiAgICAgIH0pXG5cbiAgICAgIC8vIPCflKUg5byA5Y+R546v5aKD6ZmN57qn5aSE55CGXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHZpZGVvczogW10sXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICAgIGxpbWl0OiAyMCxcbiAgICAgICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgICAgIGhhc01vcmU6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXZfbW9kZTogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgVVVJRCBtaXNzaW5nIC0gcmV0dXJuaW5nIGVtcHR5IGRhdGEgZm9yIGRldmVsb3BtZW50IHRlc3RpbmdcIlxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVzZXIgVVVJRCBtaXNzaW5nXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gdXNlcklkIGFscmVhZHkgZXh0cmFjdGVkIGFib3ZlXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG5cbiAgICAvLyDop6PmnpDmn6Xor6Llj4LmlbBcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldChcInBhZ2VcIikgfHwgXCIxXCIpXG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KFwibGltaXRcIikgfHwgXCIyMFwiKVxuICAgIGNvbnN0IHN0YXR1cyA9IHNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0dXNcIik/LnNwbGl0KFwiLFwiKSBhcyBhbnlbXVxuICAgIGNvbnN0IG9yZGVyQnkgPSAoc2VhcmNoUGFyYW1zLmdldChcIm9yZGVyQnlcIikgfHwgXCJjcmVhdGVkX2F0XCIpIGFzIFwiY3JlYXRlZF9hdFwiIHwgXCJ1cGRhdGVkX2F0XCJcbiAgICBjb25zdCBvcmRlckRpcmVjdGlvbiA9IChzZWFyY2hQYXJhbXMuZ2V0KFwib3JkZXJEaXJlY3Rpb25cIikgfHwgXCJkZXNjXCIpIGFzIFwiYXNjXCIgfCBcImRlc2NcIlxuICAgIGNvbnN0IHNlYXJjaCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJzZWFyY2hcIikgfHwgdW5kZWZpbmVkXG5cbiAgICAvLyDlj4LmlbDpqozor4FcbiAgICBpZiAocGFnZSA8IDEgfHwgbGltaXQgPCAxIHx8IGxpbWl0ID4gMTAwKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludmFsaWQgcGFnaW5hdGlvbiBwYXJhbWV0ZXJzXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG5cbiAgICAvLyDojrflj5bnlKjmiLfop4bpopFcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyVmlkZW9zREIuZ2V0VXNlclZpZGVvcyh1c2VySWQsIHtcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIG9yZGVyQnksXG4gICAgICBvcmRlckRpcmVjdGlvbixcbiAgICAgIHNlYXJjaFxuICAgIH0pXG5cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICB2aWRlb3M6IHJlc3VsdC52aWRlb3MsXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICBwYWdlOiByZXN1bHQucGFnZSxcbiAgICAgICAgICBsaW1pdDogcmVzdWx0LmxpbWl0LFxuICAgICAgICAgIHRvdGFsOiByZXN1bHQudG90YWwsXG4gICAgICAgICAgaGFzTW9yZTogcmVzdWx0Lmhhc01vcmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIFVzZXIgdmlkZW9zIEFQSSBlcnJvcjpcIiwgZXJyb3IpXG4gICAgRXJyb3JSZXBvcnRlci5nZXRJbnN0YW5jZSgpLnJlcG9ydEVycm9yKGVycm9yLCBcIlVzZXIgVmlkZW9zIEFQSVwiKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgdmlkZW9zXCJcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk1ldGhvZCBub3QgYWxsb3dlZFwiIH0sXG4gICAgeyBzdGF0dXM6IDQwNSB9XG4gIClcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhDb25maWciLCJVc2VyVmlkZW9zREIiLCJFcnJvclJlcG9ydGVyIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwiY29uc29sZSIsImVycm9yIiwicHJvY2VzcyIsImpzb24iLCJzdWNjZXNzIiwiZGF0YSIsInZpZGVvcyIsInBhZ2luYXRpb24iLCJwYWdlIiwibGltaXQiLCJ0b3RhbCIsImhhc01vcmUiLCJkZXZfbW9kZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ1c2VySWQiLCJ1dWlkIiwiaWQiLCJ1c2VyS2V5cyIsIk9iamVjdCIsImtleXMiLCJ1c2VyRGF0YSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInBhcnNlSW50IiwiZ2V0Iiwic3BsaXQiLCJvcmRlckJ5Iiwib3JkZXJEaXJlY3Rpb24iLCJzZWFyY2giLCJ1bmRlZmluZWQiLCJyZXN1bHQiLCJnZXRVc2VyVmlkZW9zIiwiZ2V0SW5zdGFuY2UiLCJyZXBvcnRFcnJvciIsIlBPU1QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/user/videos/route.ts\n");

/***/ }),

/***/ "(rsc)/./auth/config.ts":
/*!************************!*\
  !*** ./auth/config.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authConfig: () => (/* binding */ authConfig),\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   providerMap: () => (/* binding */ providerMap)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var _lib_ip__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ip */ \"(rsc)/./lib/ip.ts\");\n/* harmony import */ var _lib_time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/time */ \"(rsc)/./lib/time.ts\");\n/* harmony import */ var _lib_hash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/hash */ \"(rsc)/./lib/hash.ts\");\n/**\n * NextAuth Configuration for VidFab AI Video Platform\n */ \n\n\n\n\nlet providers = [];\n// Verification Code Login Provider\nproviders.push((0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    id: \"verification-code\",\n    name: \"verification-code\",\n    credentials: {\n        email: {\n            type: \"email\"\n        },\n        token: {\n            type: \"text\"\n        }\n    },\n    async authorize (credentials) {\n        if (!credentials?.email || !credentials?.token) return null;\n        const email = credentials.email;\n        const token = credentials.token;\n        // Validate the verification token (generated by verification API)\n        if (token.startsWith(\"verified-\")) {\n            // Trust that the verification API has already validated the code\n            // Generate deterministic UUID based on email for consistent user identity\n            return {\n                id: (0,_lib_hash__WEBPACK_IMPORTED_MODULE_4__.getUserUuidFromEmail)(email),\n                email: email,\n                name: email.split(\"@\")[0]\n            };\n        }\n        return null;\n    }\n}));\n// Google One Tap Authentication\nif (true) {\n    providers.push((0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        id: \"google-one-tap\",\n        name: \"google-one-tap\",\n        credentials: {\n            credential: {\n                type: \"text\"\n            }\n        },\n        async authorize (credentials, req) {\n            const googleClientId = \"827684711935-so1rhvk9iu5a86f9ko0bik020v8v9jgn.apps.googleusercontent.com\";\n            if (!googleClientId) {\n                console.error(\"Invalid Google auth config\");\n                return null;\n            }\n            const token = credentials.credential;\n            try {\n                const response = await fetch(\"https://oauth2.googleapis.com/tokeninfo?id_token=\" + token);\n                if (!response.ok) {\n                    console.error(\"Failed to verify token\");\n                    return null;\n                }\n                const payload = await response.json();\n                if (!payload) {\n                    console.error(\"Invalid payload from token\");\n                    return null;\n                }\n                const { email, sub, given_name, family_name, email_verified, picture: image } = payload;\n                if (!email) {\n                    console.error(\"Invalid email in payload\");\n                    return null;\n                }\n                const user = {\n                    id: sub,\n                    name: [\n                        given_name,\n                        family_name\n                    ].join(\" \").trim(),\n                    email,\n                    image,\n                    emailVerified: email_verified ? new Date() : null\n                };\n                return user;\n            } catch (error) {\n                console.error(\"Google One Tap auth error:\", error);\n                return null;\n            }\n        }\n    }));\n}\n// Standard Google OAuth\nif ( true && process.env.AUTH_GOOGLE_ID && process.env.AUTH_GOOGLE_SECRET) {\n    providers.push((0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        clientId: process.env.AUTH_GOOGLE_ID,\n        clientSecret: process.env.AUTH_GOOGLE_SECRET\n    }));\n}\nconst providerMap = providers.map((provider)=>{\n    if (typeof provider === \"function\") {\n        const providerData = provider();\n        return {\n            id: providerData.id,\n            name: providerData.name\n        };\n    } else {\n        return {\n            id: provider.id,\n            name: provider.name\n        };\n    }\n}).filter((provider)=>provider.id !== \"google-one-tap\"); // Hide One Tap from UI\nconst authConfig = {\n    providers,\n    basePath: \"/api/auth\",\n    pages: {\n        signIn: \"/login\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    trustHost: true,\n    debug: \"development\" === \"development\",\n    // Added for Docker environment compatibility\n    useSecureCookies:  false && 0,\n    cookies: {\n        sessionToken: {\n            name: `next-auth.session-token`,\n            options: {\n                httpOnly: true,\n                sameSite: \"lax\",\n                path: \"/\",\n                secure:  false && 0,\n                domain: process.env.DOCKER_ENVIRONMENT ? undefined : undefined\n            }\n        }\n    },\n    callbacks: {\n        async signIn ({ user, account, profile }) {\n            try {\n                console.log(\"\\uD83D\\uDD10 SignIn callback triggered:\", {\n                    provider: account?.provider,\n                    type: account?.type,\n                    email: user?.email,\n                    dockerEnv: !!process.env.DOCKER_ENVIRONMENT\n                });\n                // Additional validation for Google providers\n                if (account?.provider === \"google\" || account?.provider === \"google-one-tap\") {\n                    if (!user?.email) {\n                        console.error(\"‚ùå Google sign-in missing email\");\n                        return false;\n                    }\n                    console.log(\"‚úÖ Google sign-in validated\");\n                }\n                return true;\n            } catch (error) {\n                console.error(\"‚ùå SignIn callback error:\", error);\n                return false;\n            }\n        },\n        async redirect ({ url, baseUrl }) {\n            // Handle redirects after authentication\n            try {\n                // In Docker environment, handle localhost URLs\n                if (process.env.DOCKER_ENVIRONMENT && url.includes(\"localhost\")) {\n                    // Replace container internal URLs with accessible URLs\n                    url = url.replace(\"http://localhost:\", `http://localhost:`);\n                }\n                // Allow relative callback URLs\n                if (url.startsWith(\"/\")) {\n                    return `${baseUrl}${url}`;\n                }\n                // Allow callback URLs on the same origin\n                const urlObj = new URL(url);\n                const baseUrlObj = new URL(baseUrl);\n                if (urlObj.origin === baseUrlObj.origin) {\n                    return url;\n                }\n                // Special handling for Docker environment\n                if (process.env.DOCKER_ENVIRONMENT) {\n                    const dockerBaseUrl = process.env.NEXTAUTH_URL || baseUrl;\n                    if (url.startsWith(\"/\")) {\n                        return `${dockerBaseUrl}${url}`;\n                    }\n                }\n            } catch (error) {\n                console.error(\"‚ùå Invalid URL in redirect:\", {\n                    url,\n                    baseUrl,\n                    error\n                });\n            }\n            return `${baseUrl}/create`; // Default redirect to create page\n        },\n        async session ({ session, token }) {\n            // Add custom user data to session\n            if (token && token.user) {\n                session.user = {\n                    ...session.user,\n                    ...token.user\n                };\n            }\n            return session;\n        },\n        async jwt ({ token, user, account }) {\n            try {\n                // Handle user creation/update on first sign in\n                if (user && user.email && account) {\n                    // Import saveUser service\n                    const { saveUser, updateLastLogin } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions\"), __webpack_require__.e(\"_rsc_services_user_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! @/services/user */ \"(rsc)/./services/user.ts\"));\n                    const userData = {\n                        email: user.email,\n                        nickname: user.name || user.email.split(\"@\")[0],\n                        avatar_url: user.image || \"\",\n                        signin_type: account.type,\n                        signin_provider: account.provider === \"google-one-tap\" ? \"google\" : account.provider,\n                        signin_openid: account.providerAccountId,\n                        email_verified: true,\n                        signin_ip: await (0,_lib_ip__WEBPACK_IMPORTED_MODULE_2__.getClientIp)()\n                    };\n                    try {\n                        const savedUser = await saveUser(userData);\n                        // Update last login\n                        await updateLastLogin(savedUser.uuid, await (0,_lib_ip__WEBPACK_IMPORTED_MODULE_2__.getClientIp)());\n                        token.user = {\n                            uuid: savedUser.uuid,\n                            email: savedUser.email,\n                            nickname: savedUser.nickname,\n                            avatar_url: savedUser.avatar_url,\n                            created_at: savedUser.created_at\n                        };\n                    } catch (saveError) {\n                        console.error(\"Failed to save user:\", saveError);\n                        // Fallback to basic token data with deterministic UUID\n                        token.user = {\n                            uuid: (0,_lib_hash__WEBPACK_IMPORTED_MODULE_4__.getUserUuidFromEmail)(user.email),\n                            email: user.email,\n                            nickname: user.name || user.email.split(\"@\")[0],\n                            avatar_url: user.image || \"\",\n                            created_at: (0,_lib_time__WEBPACK_IMPORTED_MODULE_3__.getIsoTimestr)()\n                        };\n                    }\n                }\n                // üî• Á°Æ‰øùÊØèÊ¨°ÁôªÂΩïÈÉΩÈ™åËØÅÁî®Êà∑Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂ≠òÂú®ÊÄß\n                if (token.user && token.user.uuid && token.user.email) {\n                    try {\n                        const { getUserByUuid, saveUser } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions\"), __webpack_require__.e(\"_rsc_services_user_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! @/services/user */ \"(rsc)/./services/user.ts\"));\n                        const existingUser = await getUserByUuid(token.user.uuid);\n                        if (!existingUser) {\n                            console.log(`üîß Áî®Êà∑‰∏çÂ≠òÂú®‰∫éÊï∞ÊçÆÂ∫ìÔºåÈáçÊñ∞ÂàõÂª∫: ${token.user.uuid}`);\n                            // Áî®Êà∑‰∏çÂ≠òÂú®ÔºåÈáçÊñ∞ÂàõÂª∫\n                            const userData = {\n                                email: token.user.email,\n                                nickname: token.user.nickname || token.user.email.split(\"@\")[0],\n                                avatar_url: token.user.avatar_url || \"\",\n                                signin_type: \"credentials\",\n                                signin_provider: \"verification-code\",\n                                signin_openid: token.user.uuid,\n                                email_verified: true,\n                                signin_ip: await (0,_lib_ip__WEBPACK_IMPORTED_MODULE_2__.getClientIp)()\n                            };\n                            await saveUser(userData);\n                            console.log(`‚úÖ Áî®Êà∑ÈáçÊñ∞ÂàõÂª∫ÊàêÂäü: ${token.user.uuid}`);\n                        }\n                    } catch (error) {\n                        console.error(\"JWTÁî®Êà∑È™åËØÅÂ§±Ë¥•:\", error);\n                    }\n                }\n                return token;\n            } catch (error) {\n                console.error(\"JWT callback error:\", error);\n                return token;\n            }\n        }\n    },\n    events: {\n        async signIn ({ user, account, profile, isNewUser }) {},\n        async signOut ({ token, session }) {}\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n// Legacy export for compatibility\nconst authOptions = authConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0NBQ2ZoRixPQUFPRSxNQUFNd0IsSUFBSSxDQUFDMUIsS0FBSztnQ0FDdkJpRixVQUFVL0UsTUFBTXdCLElBQUksQ0FBQ3VELFFBQVEsSUFBSS9FLE1BQU13QixJQUFJLENBQUMxQixLQUFLLENBQUNLLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQ0FDL0Q2RSxZQUFZaEYsTUFBTXdCLElBQUksQ0FBQ3dELFVBQVUsSUFBSTtnQ0FDckNDLGFBQWE7Z0NBQ2JDLGlCQUFpQjtnQ0FDakJDLGVBQWVuRixNQUFNd0IsSUFBSSxDQUFDK0QsSUFBSTtnQ0FDOUJsRSxnQkFBZ0I7Z0NBQ2hCZ0UsV0FBVyxNQUFNL0Ysb0RBQVdBOzRCQUM5Qjs0QkFFQSxNQUFNc0YsU0FBU0U7NEJBQ2ZuRSxRQUFRbUQsR0FBRyxDQUFDLENBQUMsWUFBWSxFQUFFOUQsTUFBTXdCLElBQUksQ0FBQytELElBQUksQ0FBQyxDQUFDO3dCQUM5QztvQkFDRixFQUFFLE9BQU8zRSxPQUFPO3dCQUNkRCxRQUFRQyxLQUFLLENBQUMsY0FBY0E7b0JBQzlCO2dCQUNGO2dCQUVBLE9BQU9aO1lBQ1QsRUFBRSxPQUFPWSxPQUFPO2dCQUNkRCxRQUFRQyxLQUFLLENBQUMsdUJBQXVCQTtnQkFDckMsT0FBT1o7WUFDVDtRQUNGO0lBQ0Y7SUFDQTRGLFFBQVE7UUFDTixNQUFNbEQsUUFBTyxFQUFFbEIsSUFBSSxFQUFFb0MsT0FBTyxFQUFFQyxPQUFPLEVBQUVnQyxTQUFTLEVBQUUsR0FDbEQ7UUFDQSxNQUFNQyxTQUFRLEVBQUU5RixLQUFLLEVBQUUyQyxPQUFPLEVBQUUsR0FDaEM7SUFDRjtJQUNBb0QsUUFBUTNGLFFBQVFDLEdBQUcsQ0FBQzJGLGVBQWU7QUFDckMsRUFBRTtBQUVGLGtDQUFrQztBQUMzQixNQUFNQyxjQUFjMUQsV0FBVyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9hdXRoL2NvbmZpZy50cz9mZjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTmV4dEF1dGggQ29uZmlndXJhdGlvbiBmb3IgVmlkRmFiIEFJIFZpZGVvIFBsYXRmb3JtXG4gKi9cbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCI7XG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCI7XG5pbXBvcnQgeyBOZXh0QXV0aENvbmZpZyB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvaW5kZXhcIjtcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiQC90eXBlcy91c2VyXCI7XG5pbXBvcnQgeyBnZXRDbGllbnRJcCB9IGZyb20gXCJAL2xpYi9pcFwiO1xuaW1wb3J0IHsgZ2V0SXNvVGltZXN0ciB9IGZyb20gXCJAL2xpYi90aW1lXCI7XG5pbXBvcnQgeyBnZXRVdWlkLCBnZXRVc2VyVXVpZEZyb21FbWFpbCB9IGZyb20gXCJAL2xpYi9oYXNoXCI7XG5cbmxldCBwcm92aWRlcnM6IFByb3ZpZGVyW10gPSBbXTtcblxuLy8gVmVyaWZpY2F0aW9uIENvZGUgTG9naW4gUHJvdmlkZXJcbnByb3ZpZGVycy5wdXNoKFxuICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICBpZDogXCJ2ZXJpZmljYXRpb24tY29kZVwiLFxuICAgIG5hbWU6IFwidmVyaWZpY2F0aW9uLWNvZGVcIixcbiAgICBjcmVkZW50aWFsczoge1xuICAgICAgZW1haWw6IHsgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICB0b2tlbjogeyB0eXBlOiBcInRleHRcIiB9XG4gICAgfSxcbiAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8udG9rZW4pIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBlbWFpbCA9IGNyZWRlbnRpYWxzLmVtYWlsIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbHMudG9rZW4gYXMgc3RyaW5nO1xuXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgdmVyaWZpY2F0aW9uIHRva2VuIChnZW5lcmF0ZWQgYnkgdmVyaWZpY2F0aW9uIEFQSSlcbiAgICAgIGlmICh0b2tlbi5zdGFydHNXaXRoKCd2ZXJpZmllZC0nKSkge1xuICAgICAgICAvLyBUcnVzdCB0aGF0IHRoZSB2ZXJpZmljYXRpb24gQVBJIGhhcyBhbHJlYWR5IHZhbGlkYXRlZCB0aGUgY29kZVxuICAgICAgICAvLyBHZW5lcmF0ZSBkZXRlcm1pbmlzdGljIFVVSUQgYmFzZWQgb24gZW1haWwgZm9yIGNvbnNpc3RlbnQgdXNlciBpZGVudGl0eVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBnZXRVc2VyVXVpZEZyb21FbWFpbChlbWFpbCksIC8vIFVzZSBkZXRlcm1pbmlzdGljIFVVSUQgYmFzZWQgb24gZW1haWxcbiAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgbmFtZTogZW1haWwuc3BsaXQoJ0AnKVswXSxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgfSlcbik7XG5cbi8vIEdvb2dsZSBPbmUgVGFwIEF1dGhlbnRpY2F0aW9uXG5pZiAoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FVVEhfR09PR0xFX09ORV9UQVBfRU5BQkxFRCA9PT0gXCJ0cnVlXCIgJiZcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVVUSF9HT09HTEVfSURcbikge1xuICBwcm92aWRlcnMucHVzaChcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIGlkOiBcImdvb2dsZS1vbmUtdGFwXCIsXG4gICAgICBuYW1lOiBcImdvb2dsZS1vbmUtdGFwXCIsXG5cbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGNyZWRlbnRpYWw6IHsgdHlwZTogXCJ0ZXh0XCIgfSxcbiAgICAgIH0sXG5cbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscywgcmVxKSB7XG4gICAgICAgIGNvbnN0IGdvb2dsZUNsaWVudElkID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVVUSF9HT09HTEVfSUQ7XG4gICAgICAgIGlmICghZ29vZ2xlQ2xpZW50SWQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBHb29nbGUgYXV0aCBjb25maWdcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWxzIS5jcmVkZW50aWFsO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW5pbmZvP2lkX3Rva2VuPVwiICsgdG9rZW5cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdmVyaWZ5IHRva2VuXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICBpZiAoIXBheWxvYWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHBheWxvYWQgZnJvbSB0b2tlblwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgc3ViLFxuICAgICAgICAgICAgZ2l2ZW5fbmFtZSxcbiAgICAgICAgICAgIGZhbWlseV9uYW1lLFxuICAgICAgICAgICAgZW1haWxfdmVyaWZpZWQsXG4gICAgICAgICAgICBwaWN0dXJlOiBpbWFnZSxcbiAgICAgICAgICB9ID0gcGF5bG9hZDtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWVtYWlsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBlbWFpbCBpbiBwYXlsb2FkXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdXNlciA9IHtcbiAgICAgICAgICAgIGlkOiBzdWIsXG4gICAgICAgICAgICBuYW1lOiBbZ2l2ZW5fbmFtZSwgZmFtaWx5X25hbWVdLmpvaW4oXCIgXCIpLnRyaW0oKSxcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBlbWFpbF92ZXJpZmllZCA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gdXNlcjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiR29vZ2xlIE9uZSBUYXAgYXV0aCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pXG4gICk7XG59XG5cbi8vIFN0YW5kYXJkIEdvb2dsZSBPQXV0aFxuaWYgKFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BVVRIX0dPT0dMRV9FTkFCTEVEID09PSBcInRydWVcIiAmJlxuICBwcm9jZXNzLmVudi5BVVRIX0dPT0dMRV9JRCAmJlxuICBwcm9jZXNzLmVudi5BVVRIX0dPT0dMRV9TRUNSRVRcbikge1xuICBwcm92aWRlcnMucHVzaChcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuQVVUSF9HT09HTEVfSUQsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkFVVEhfR09PR0xFX1NFQ1JFVCxcbiAgICB9KVxuICApO1xufVxuXG5leHBvcnQgY29uc3QgcHJvdmlkZXJNYXAgPSBwcm92aWRlcnNcbiAgLm1hcCgocHJvdmlkZXIpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb3ZpZGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHByb3ZpZGVyKCk7XG4gICAgICByZXR1cm4geyBpZDogcHJvdmlkZXJEYXRhLmlkLCBuYW1lOiBwcm92aWRlckRhdGEubmFtZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4geyBpZDogcHJvdmlkZXIuaWQsIG5hbWU6IHByb3ZpZGVyLm5hbWUgfTtcbiAgICB9XG4gIH0pXG4gIC5maWx0ZXIoKHByb3ZpZGVyKSA9PiBwcm92aWRlci5pZCAhPT0gXCJnb29nbGUtb25lLXRhcFwiKTsgLy8gSGlkZSBPbmUgVGFwIGZyb20gVUlcblxuZXhwb3J0IGNvbnN0IGF1dGhDb25maWc6IE5leHRBdXRoQ29uZmlnID0ge1xuICBwcm92aWRlcnMsXG4gIGJhc2VQYXRoOiBcIi9hcGkvYXV0aFwiLFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvbG9naW5cIiwgLy8gVXBkYXRlZCB0byBtYXRjaCBvdXIgcm91dGUgc3RydWN0dXJlXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogXCJqd3RcIixcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXG4gIH0sXG4gIHRydXN0SG9zdDogdHJ1ZSwgLy8gUmVxdWlyZWQgZm9yIERvY2tlciBhbmQgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHNcbiAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICAvLyBBZGRlZCBmb3IgRG9ja2VyIGVudmlyb25tZW50IGNvbXBhdGliaWxpdHlcbiAgdXNlU2VjdXJlQ29va2llczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiAhcHJvY2Vzcy5lbnYuRE9DS0VSX0VOVklST05NRU5ULFxuICBjb29raWVzOiB7XG4gICAgc2Vzc2lvblRva2VuOiB7XG4gICAgICBuYW1lOiBgbmV4dC1hdXRoLnNlc3Npb24tdG9rZW5gLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgICAgc2FtZVNpdGU6IFwibGF4XCIsXG4gICAgICAgIHBhdGg6IFwiL1wiLFxuICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgIXByb2Nlc3MuZW52LkRPQ0tFUl9FTlZJUk9OTUVOVCxcbiAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5ET0NLRVJfRU5WSVJPTk1FTlQgPyB1bmRlZmluZWQgOiB1bmRlZmluZWRcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UkCBTaWduSW4gY2FsbGJhY2sgdHJpZ2dlcmVkOicsIHtcbiAgICAgICAgICBwcm92aWRlcjogYWNjb3VudD8ucHJvdmlkZXIsXG4gICAgICAgICAgdHlwZTogYWNjb3VudD8udHlwZSxcbiAgICAgICAgICBlbWFpbDogdXNlcj8uZW1haWwsXG4gICAgICAgICAgZG9ja2VyRW52OiAhIXByb2Nlc3MuZW52LkRPQ0tFUl9FTlZJUk9OTUVOVFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGRpdGlvbmFsIHZhbGlkYXRpb24gZm9yIEdvb2dsZSBwcm92aWRlcnNcbiAgICAgICAgaWYgKGFjY291bnQ/LnByb3ZpZGVyID09PSAnZ29vZ2xlJyB8fCBhY2NvdW50Py5wcm92aWRlciA9PT0gJ2dvb2dsZS1vbmUtdGFwJykge1xuICAgICAgICAgIGlmICghdXNlcj8uZW1haWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBHb29nbGUgc2lnbi1pbiBtaXNzaW5nIGVtYWlsJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgR29vZ2xlIHNpZ24taW4gdmFsaWRhdGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgU2lnbkluIGNhbGxiYWNrIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIHJlZGlyZWN0KHsgdXJsLCBiYXNlVXJsIH0pIHtcbiAgICAgIC8vIEhhbmRsZSByZWRpcmVjdHMgYWZ0ZXIgYXV0aGVudGljYXRpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEluIERvY2tlciBlbnZpcm9ubWVudCwgaGFuZGxlIGxvY2FsaG9zdCBVUkxzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5ET0NLRVJfRU5WSVJPTk1FTlQgJiYgdXJsLmluY2x1ZGVzKCdsb2NhbGhvc3QnKSkge1xuICAgICAgICAgIC8vIFJlcGxhY2UgY29udGFpbmVyIGludGVybmFsIFVSTHMgd2l0aCBhY2Nlc3NpYmxlIFVSTHNcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnaHR0cDovL2xvY2FsaG9zdDonLCBgaHR0cDovL2xvY2FsaG9zdDpgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsbG93IHJlbGF0aXZlIGNhbGxiYWNrIFVSTHNcbiAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgICAgIHJldHVybiBgJHtiYXNlVXJsfSR7dXJsfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbGxvdyBjYWxsYmFjayBVUkxzIG9uIHRoZSBzYW1lIG9yaWdpblxuICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IGJhc2VVcmxPYmogPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgICBpZiAodXJsT2JqLm9yaWdpbiA9PT0gYmFzZVVybE9iai5vcmlnaW4pIHtcbiAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgRG9ja2VyIGVudmlyb25tZW50XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5ET0NLRVJfRU5WSVJPTk1FTlQpIHtcbiAgICAgICAgICBjb25zdCBkb2NrZXJCYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8IGJhc2VVcmw7XG4gICAgICAgICAgaWYgKHVybC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2RvY2tlckJhc2VVcmx9JHt1cmx9YDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBJbnZhbGlkIFVSTCBpbiByZWRpcmVjdDonLCB7IHVybCwgYmFzZVVybCwgZXJyb3IgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBgJHtiYXNlVXJsfS9jcmVhdGVgOyAvLyBEZWZhdWx0IHJlZGlyZWN0IHRvIGNyZWF0ZSBwYWdlXG4gICAgfSxcbiAgICBcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xuICAgICAgLy8gQWRkIGN1c3RvbSB1c2VyIGRhdGEgdG8gc2Vzc2lvblxuICAgICAgaWYgKHRva2VuICYmIHRva2VuLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyID0ge1xuICAgICAgICAgIC4uLnNlc3Npb24udXNlcixcbiAgICAgICAgICAuLi50b2tlbi51c2VyXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICAgIFxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyLCBhY2NvdW50IH0pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNyZWF0aW9uL3VwZGF0ZSBvbiBmaXJzdCBzaWduIGluXG4gICAgICAgIGlmICh1c2VyICYmIHVzZXIuZW1haWwgJiYgYWNjb3VudCkge1xuICAgICAgICAgIC8vIEltcG9ydCBzYXZlVXNlciBzZXJ2aWNlXG4gICAgICAgICAgY29uc3QgeyBzYXZlVXNlciwgdXBkYXRlTGFzdExvZ2luIH0gPSBhd2FpdCBpbXBvcnQoXCJAL3NlcnZpY2VzL3VzZXJcIik7XG5cbiAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmlja25hbWU6IHVzZXIubmFtZSB8fCB1c2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgICBhdmF0YXJfdXJsOiB1c2VyLmltYWdlIHx8IFwiXCIsXG4gICAgICAgICAgICBzaWduaW5fdHlwZTogYWNjb3VudC50eXBlIGFzICdvYXV0aCcgfCAnY3JlZGVudGlhbHMnLFxuICAgICAgICAgICAgc2lnbmluX3Byb3ZpZGVyOiBhY2NvdW50LnByb3ZpZGVyID09PSBcImdvb2dsZS1vbmUtdGFwXCIgPyBcImdvb2dsZVwiIDogYWNjb3VudC5wcm92aWRlcixcbiAgICAgICAgICAgIHNpZ25pbl9vcGVuaWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICBlbWFpbF92ZXJpZmllZDogdHJ1ZSwgLy8gT0F1dGggdXNlcnMgYXJlIGF1dG9tYXRpY2FsbHkgdmVyaWZpZWRcbiAgICAgICAgICAgIHNpZ25pbl9pcDogYXdhaXQgZ2V0Q2xpZW50SXAoKSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkVXNlciA9IGF3YWl0IHNhdmVVc2VyKHVzZXJEYXRhKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGxhc3QgbG9naW5cbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZUxhc3RMb2dpbihzYXZlZFVzZXIudXVpZCwgYXdhaXQgZ2V0Q2xpZW50SXAoKSk7XG5cbiAgICAgICAgICAgIHRva2VuLnVzZXIgPSB7XG4gICAgICAgICAgICAgIHV1aWQ6IHNhdmVkVXNlci51dWlkLFxuICAgICAgICAgICAgICBlbWFpbDogc2F2ZWRVc2VyLmVtYWlsLFxuICAgICAgICAgICAgICBuaWNrbmFtZTogc2F2ZWRVc2VyLm5pY2tuYW1lLFxuICAgICAgICAgICAgICBhdmF0YXJfdXJsOiBzYXZlZFVzZXIuYXZhdGFyX3VybCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogc2F2ZWRVc2VyLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIHVzZXI6XCIsIHNhdmVFcnJvcik7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBiYXNpYyB0b2tlbiBkYXRhIHdpdGggZGV0ZXJtaW5pc3RpYyBVVUlEXG4gICAgICAgICAgICB0b2tlbi51c2VyID0ge1xuICAgICAgICAgICAgICB1dWlkOiBnZXRVc2VyVXVpZEZyb21FbWFpbCh1c2VyLmVtYWlsKSwgLy8gVXNlIGRldGVybWluaXN0aWMgVVVJRCBiYXNlZCBvbiBlbWFpbFxuICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgbmlja25hbWU6IHVzZXIubmFtZSB8fCB1c2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgICAgIGF2YXRhcl91cmw6IHVzZXIuaW1hZ2UgfHwgXCJcIixcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogZ2V0SXNvVGltZXN0cigpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDwn5SlIOehruS/neavj+asoeeZu+W9lemDvemqjOivgeeUqOaIt+WcqOaVsOaNruW6k+S4reeahOWtmOWcqOaAp1xuICAgICAgICBpZiAodG9rZW4udXNlciAmJiB0b2tlbi51c2VyLnV1aWQgJiYgdG9rZW4udXNlci5lbWFpbCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGdldFVzZXJCeVV1aWQsIHNhdmVVc2VyIH0gPSBhd2FpdCBpbXBvcnQoXCJAL3NlcnZpY2VzL3VzZXJcIik7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBnZXRVc2VyQnlVdWlkKHRva2VuLnVzZXIudXVpZCk7XG5cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SnIOeUqOaIt+S4jeWtmOWcqOS6juaVsOaNruW6k++8jOmHjeaWsOWIm+W7ujogJHt0b2tlbi51c2VyLnV1aWR9YCk7XG4gICAgICAgICAgICAgIC8vIOeUqOaIt+S4jeWtmOWcqO+8jOmHjeaWsOWIm+W7ulxuICAgICAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBlbWFpbDogdG9rZW4udXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgICBuaWNrbmFtZTogdG9rZW4udXNlci5uaWNrbmFtZSB8fCB0b2tlbi51c2VyLmVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgICAgICAgYXZhdGFyX3VybDogdG9rZW4udXNlci5hdmF0YXJfdXJsIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgc2lnbmluX3R5cGU6ICdjcmVkZW50aWFscycgYXMgY29uc3QsXG4gICAgICAgICAgICAgICAgc2lnbmluX3Byb3ZpZGVyOiAndmVyaWZpY2F0aW9uLWNvZGUnLFxuICAgICAgICAgICAgICAgIHNpZ25pbl9vcGVuaWQ6IHRva2VuLnVzZXIudXVpZCxcbiAgICAgICAgICAgICAgICBlbWFpbF92ZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaWduaW5faXA6IGF3YWl0IGdldENsaWVudElwKCksXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgYXdhaXQgc2F2ZVVzZXIodXNlckRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4pyFIOeUqOaIt+mHjeaWsOWIm+W7uuaIkOWKnzogJHt0b2tlbi51c2VyLnV1aWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJKV1TnlKjmiLfpqozor4HlpLHotKU6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiSldUIGNhbGxiYWNrIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuICBldmVudHM6IHtcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlLCBpc05ld1VzZXIgfSkge1xuICAgIH0sXG4gICAgYXN5bmMgc2lnbk91dCh7IHRva2VuLCBzZXNzaW9uIH0pIHtcbiAgICB9LFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG5cbi8vIExlZ2FjeSBleHBvcnQgZm9yIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IGF1dGhDb25maWc7Il0sIm5hbWVzIjpbIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJHb29nbGVQcm92aWRlciIsImdldENsaWVudElwIiwiZ2V0SXNvVGltZXN0ciIsImdldFVzZXJVdWlkRnJvbUVtYWlsIiwicHJvdmlkZXJzIiwicHVzaCIsImlkIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJ0eXBlIiwidG9rZW4iLCJhdXRob3JpemUiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVVUSF9HT09HTEVfT05FX1RBUF9FTkFCTEVEIiwiTkVYVF9QVUJMSUNfQVVUSF9HT09HTEVfSUQiLCJjcmVkZW50aWFsIiwicmVxIiwiZ29vZ2xlQ2xpZW50SWQiLCJjb25zb2xlIiwiZXJyb3IiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJwYXlsb2FkIiwianNvbiIsInN1YiIsImdpdmVuX25hbWUiLCJmYW1pbHlfbmFtZSIsImVtYWlsX3ZlcmlmaWVkIiwicGljdHVyZSIsImltYWdlIiwidXNlciIsImpvaW4iLCJ0cmltIiwiZW1haWxWZXJpZmllZCIsIkRhdGUiLCJORVhUX1BVQkxJQ19BVVRIX0dPT0dMRV9FTkFCTEVEIiwiQVVUSF9HT09HTEVfSUQiLCJBVVRIX0dPT0dMRV9TRUNSRVQiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsInByb3ZpZGVyTWFwIiwibWFwIiwicHJvdmlkZXIiLCJwcm92aWRlckRhdGEiLCJmaWx0ZXIiLCJhdXRoQ29uZmlnIiwiYmFzZVBhdGgiLCJwYWdlcyIsInNpZ25JbiIsInNlc3Npb24iLCJzdHJhdGVneSIsIm1heEFnZSIsInRydXN0SG9zdCIsImRlYnVnIiwidXNlU2VjdXJlQ29va2llcyIsIkRPQ0tFUl9FTlZJUk9OTUVOVCIsImNvb2tpZXMiLCJzZXNzaW9uVG9rZW4iLCJvcHRpb25zIiwiaHR0cE9ubHkiLCJzYW1lU2l0ZSIsInBhdGgiLCJzZWN1cmUiLCJkb21haW4iLCJ1bmRlZmluZWQiLCJjYWxsYmFja3MiLCJhY2NvdW50IiwicHJvZmlsZSIsImxvZyIsImRvY2tlckVudiIsInJlZGlyZWN0IiwidXJsIiwiYmFzZVVybCIsImluY2x1ZGVzIiwicmVwbGFjZSIsInVybE9iaiIsIlVSTCIsImJhc2VVcmxPYmoiLCJvcmlnaW4iLCJkb2NrZXJCYXNlVXJsIiwiTkVYVEFVVEhfVVJMIiwiand0Iiwic2F2ZVVzZXIiLCJ1cGRhdGVMYXN0TG9naW4iLCJ1c2VyRGF0YSIsIm5pY2tuYW1lIiwiYXZhdGFyX3VybCIsInNpZ25pbl90eXBlIiwic2lnbmluX3Byb3ZpZGVyIiwic2lnbmluX29wZW5pZCIsInByb3ZpZGVyQWNjb3VudElkIiwic2lnbmluX2lwIiwic2F2ZWRVc2VyIiwidXVpZCIsImNyZWF0ZWRfYXQiLCJzYXZlRXJyb3IiLCJnZXRVc2VyQnlVdWlkIiwiZXhpc3RpbmdVc2VyIiwiZXZlbnRzIiwiaXNOZXdVc2VyIiwic2lnbk91dCIsInNlY3JldCIsIk5FWFRBVVRIX1NFQ1JFVCIsImF1dGhPcHRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./auth/config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database/user-videos.ts":
/*!*************************************!*\
  !*** ./lib/database/user-videos.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserVideosDB: () => (/* binding */ UserVideosDB)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../supabase */ \"(rsc)/./lib/supabase.ts\");\n/* harmony import */ var _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils/error-handling */ \"(rsc)/./lib/utils/error-handling.ts\");\n/**\n * User Videos Database Operations\n * VidFab AI Video Platform\n */ \n\nclass UserVideosDB {\n    static{\n        // Cache quota info to prevent excessive database calls\n        this.quotaCache = new Map();\n    }\n    static{\n        this.QUOTA_CACHE_TTL = 30000 // 30 seconds cache\n        ;\n    }\n    /**\n   * Create a new video record\n   * üî• ‰øÆÂ§çÔºöËá™Âä®Â§ÑÁêÜÁî®Êà∑‰∏çÂ≠òÂú®ÁöÑÊÉÖÂÜµ\n   */ static async createVideo(userId, data, userEmail) {\n        return (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n            try {\n                console.log(`üé¨ Â∞ùËØïÁõ¥Êé•ÂàõÂª∫ËßÜÈ¢ë: ${data.wavespeedRequestId} for user ${userId}`);\n                // üî• Áõ¥Êé•Â∞ùËØïÂàõÂª∫ËßÜÈ¢ë\n                const { data: video, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).insert({\n                    user_id: userId,\n                    wavespeed_request_id: data.wavespeedRequestId,\n                    prompt: data.prompt,\n                    settings: data.settings,\n                    original_url: data.originalUrl,\n                    status: \"generating\"\n                }).select().single();\n                if (!error) {\n                    console.log(`‚úÖ ËßÜÈ¢ëÁõ¥Êé•ÂàõÂª∫ÊàêÂäü: ${video.id}`);\n                    return video;\n                }\n                console.log(`‚ö†Ô∏è Áõ¥Êé•ÂàõÂª∫Â§±Ë¥•ÔºåÈîôËØØÁ†Å: ${error.code}`);\n                // üî• Â¶ÇÊûúÊòØÂ§ñÈîÆÁ∫¶ÊùüÈîôËØØÔºå‰ΩøÁî®Âº∫Âà∂ÊñπÊ≥ïÁõ¥Êé•Ëß£ÂÜ≥\n                if (error.code === \"23503\" && error.message.includes(\"user_videos_user_id_fkey\")) {\n                    console.log(`üîß Â§ñÈîÆÁ∫¶ÊùüÈîôËØØÔºåÂêØÂä®Áî®Êà∑ÂàõÂª∫ÊµÅÁ®ã`);\n                    return await this.forceCreateUserAndVideo(userId, userEmail, data);\n                }\n                // ÂÖ∂‰ªñÈîôËØØÁõ¥Êé•ÊäõÂá∫\n                console.error(\"Error creating video:\", error);\n                _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.createVideo\");\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            } catch (err) {\n                console.error(\"UserVideosDB.createVideo exception:\", err);\n                throw err;\n            }\n        }, \"Create video\");\n    }\n    /**\n   * üî• ÁÆÄÂåñÁöÑÁî®Êà∑ÂíåËßÜÈ¢ëÂàõÂª∫ÊñπÊ≥ï - ‰ΩøÁî®ÂéüÂ≠êÊìç‰Ωú\n   */ static async forceCreateUserAndVideo(userId, userEmail, data) {\n        console.log(`üî• ÂºÄÂßãÂº∫Âà∂ÂàõÂª∫Áî®Êà∑ÂíåËßÜÈ¢ë: ${userId}, ${userEmail}`);\n        try {\n            // üî• ÊñπÊ°à1ÔºöÂÖàÊ£ÄÊü•Áî®Êà∑ÊòØÂê¶Â≠òÂú®\n            const { data: existingUser, error: checkError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"uuid, email\").eq(\"uuid\", userId).maybeSingle();\n            if (checkError) {\n                console.error(`‚ùå Error checking existing user:`, checkError);\n            }\n            if (!existingUser) {\n                console.log(`üë§ Áî®Êà∑‰∏çÂ≠òÂú®ÔºåÂàõÂª∫Êñ∞Áî®Êà∑: ${userId}`);\n                // üî• ÁîüÊàêÂîØ‰∏ÄÁöÑemailÊù•ÈÅøÂÖçÂÜ≤Á™Å - ‰ΩøÁî®ÂÆåÊï¥UUIDÁ°Æ‰øùÂîØ‰∏ÄÊÄß\n                const uniqueEmail = userEmail || `${userId}@vidfab.ai`;\n                const { data: userData, error: insertError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").insert({\n                    uuid: userId,\n                    email: uniqueEmail,\n                    nickname: userEmail?.split(\"@\")[0] || `User${userId.split(\"-\")[0]}`,\n                    avatar_url: \"\",\n                    signin_type: \"oauth\",\n                    signin_provider: \"google\",\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString(),\n                    email_verified: true,\n                    is_active: true\n                }).select();\n                if (insertError) {\n                    if (insertError.code === \"23505\") {\n                        // Â¶ÇÊûúËøòÊòØÊúâÂîØ‰∏ÄÁ∫¶ÊùüÂÜ≤Á™ÅÔºåÂ∞ùËØïÁî®UUID‰Ωú‰∏∫email\n                        console.warn(`‚ö†Ô∏è EmailÂÜ≤Á™ÅÔºå‰ΩøÁî®UUID‰Ωú‰∏∫emailÈáçËØï`);\n                        const { data: retryData, error: retryError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").insert({\n                            uuid: userId,\n                            email: `${userId}@vidfab.ai`,\n                            nickname: `User${userId.split(\"-\")[0]}`,\n                            avatar_url: \"\",\n                            signin_type: \"oauth\",\n                            signin_provider: \"google\",\n                            created_at: new Date().toISOString(),\n                            updated_at: new Date().toISOString(),\n                            email_verified: true,\n                            is_active: true\n                        }).select();\n                        if (retryError) {\n                            console.error(`‚ùå ÈáçËØïÁî®Êà∑ÂàõÂª∫Â§±Ë¥•:`, retryError);\n                        // ÁªßÁª≠Ôºå‰∏çÊäõÈîô\n                        } else {\n                            console.log(`‚úÖ Áî®Êà∑ÂàõÂª∫ÊàêÂäü(ÈáçËØï): ${userId}`);\n                        }\n                    } else {\n                        console.error(`‚ùå User creation failed:`, insertError);\n                    }\n                } else {\n                    console.log(`‚úÖ Áî®Êà∑ÂàõÂª∫ÊàêÂäü: ${userId}`);\n                }\n            } else {\n                console.log(`‚úÖ Áî®Êà∑Â∑≤Â≠òÂú®: ${userId}, email: ${existingUser.email}`);\n            }\n            // üî• ÊñπÊ°à2ÔºöÁõ¥Êé•Á≠âÂæÖ‰∏ÄÂ∞èÊÆµÊó∂Èó¥Á°Æ‰øù‰∫ãÂä°Êèê‰∫§\n            await new Promise((resolve)=>setTimeout(resolve, 100));\n            // üî• ÊñπÊ°à3ÔºöÂÜçÊ¨°È™åËØÅÁî®Êà∑Â≠òÂú®ÂêéÂàõÂª∫ËßÜÈ¢ë\n            const { data: finalUser, error: finalCheckError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"users\").select(\"uuid\").eq(\"uuid\", userId).maybeSingle();\n            if (finalCheckError || !finalUser) {\n                console.error(`‚ùå ÊúÄÁªàÁî®Êà∑È™åËØÅÂ§±Ë¥•ÔºåÊó†Ê≥ïÂàõÂª∫ËßÜÈ¢ë: ${userId}`);\n                throw new Error(`User ${userId} still not found after creation attempts`);\n            }\n            // üî• Áî®Êà∑Á°ÆËÆ§Â≠òÂú®ÔºåÂàõÂª∫ËßÜÈ¢ëËÆ∞ÂΩï\n            const { data: video, error: videoError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).insert({\n                user_id: userId,\n                wavespeed_request_id: data.wavespeedRequestId,\n                prompt: data.prompt,\n                settings: data.settings,\n                original_url: data.originalUrl,\n                status: \"generating\"\n            }).select().single();\n            if (videoError) {\n                console.error(`‚ùå ËßÜÈ¢ëÂàõÂª∫Â§±Ë¥•:`, videoError);\n                if (videoError.code === \"23503\") {\n                    console.error(`‚ùå Â§ñÈîÆÁ∫¶Êùü‰ªçÁÑ∂Â§±Ë¥•ÔºåËøô‰∏çÂ∫îËØ•ÂèëÁîü„ÄÇÁî®Êà∑Â≠òÂú®‰ΩÜËßÜÈ¢ëÂàõÂª∫Â§±Ë¥•„ÄÇ`);\n                    // üî• ÊúÄÂêéÂ∞ùËØïÔºöÂÜçÁ≠âÂæÖ‰∏Ä‰∏ãÂÜçÂàõÂª∫ËßÜÈ¢ë\n                    await new Promise((resolve)=>setTimeout(resolve, 500));\n                    const { data: retryVideo, error: retryError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).insert({\n                        user_id: userId,\n                        wavespeed_request_id: data.wavespeedRequestId,\n                        prompt: data.prompt,\n                        settings: data.settings,\n                        original_url: data.originalUrl,\n                        status: \"generating\"\n                    }).select().single();\n                    if (retryError) {\n                        console.error(`‚ùå ÈáçËØïËßÜÈ¢ëÂàõÂª∫‰πüÂ§±Ë¥•ÔºåÁé∞Âú®ÊâçÂàõÂª∫‰∏¥Êó∂ËÆ∞ÂΩï:`, retryError);\n                        // üî• Âè™ÊúâÂú®ÊâÄÊúâÂ∞ùËØïÈÉΩÂ§±Ë¥•ÂêéÊâçÂàõÂª∫‰∏¥Êó∂ËÆ∞ÂΩï\n                        return {\n                            id: `temp-${Date.now()}`,\n                            user_id: userId,\n                            wavespeed_request_id: data.wavespeedRequestId,\n                            prompt: data.prompt,\n                            settings: data.settings,\n                            original_url: data.originalUrl,\n                            status: \"generating\",\n                            download_progress: 0,\n                            error_message: null,\n                            storage_path: null,\n                            thumbnail_path: null,\n                            file_size: null,\n                            duration_seconds: null,\n                            view_count: 0,\n                            is_favorite: false,\n                            last_viewed_at: null,\n                            created_at: new Date().toISOString(),\n                            updated_at: new Date().toISOString()\n                        };\n                    }\n                    console.log(`‚úÖ ÈáçËØïËßÜÈ¢ëÂàõÂª∫ÊàêÂäü: ${retryVideo.id}`);\n                    return retryVideo;\n                }\n                throw videoError;\n            }\n            console.log(`‚úÖ ËßÜÈ¢ëÂàõÂª∫ÊàêÂäü: ${video.id}`);\n            return video;\n        } catch (error) {\n            console.error(\"‚ùå forceCreateUserAndVideo final error:\", error);\n            // üî• ÊúÄÁªàÈôçÁ∫ßÊñπÊ°àÔºöÂàõÂª∫‰∏¥Êó∂ËÆ∞ÂΩïÔºå‰∏ç‰æùËµñÊï∞ÊçÆÂ∫ì\n            console.log(\"\\uD83D\\uDD04 ÂàõÂª∫‰∏¥Êó∂ËßÜÈ¢ëËÆ∞ÂΩï‰Ωú‰∏∫ÈôçÁ∫ßÊñπÊ°à\");\n            return {\n                id: `temp-${Date.now()}`,\n                user_id: userId,\n                wavespeed_request_id: data.wavespeedRequestId,\n                prompt: data.prompt,\n                settings: data.settings,\n                original_url: data.originalUrl,\n                status: \"generating\",\n                download_progress: 0,\n                error_message: null,\n                storage_path: null,\n                thumbnail_path: null,\n                file_size: null,\n                duration_seconds: null,\n                view_count: 0,\n                is_favorite: false,\n                last_viewed_at: null,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n        }\n    }\n    /**\n   * Update video status and progress\n   * üî• ‰øÆÂ§çÔºö‰ºòÈõÖÂ§ÑÁêÜ‰∏¥Êó∂ËßÜÈ¢ëËÆ∞ÂΩï\n   */ static async updateVideoStatus(videoId, updates) {\n        // üî• Â¶ÇÊûúÊòØ‰∏¥Êó∂ËßÜÈ¢ëIDÔºåÁõ¥Êé•ËøîÂõûÊ®°ÊãüÁªìÊûúÔºå‰∏çËøõË°åÊï∞ÊçÆÂ∫ìÊìç‰Ωú\n        if (videoId.startsWith(\"temp-\")) {\n            console.log(`üîÑ Ë∑≥Ëøá‰∏¥Êó∂ËßÜÈ¢ëÁä∂ÊÄÅÊõ¥Êñ∞: ${videoId}`);\n            return {\n                id: videoId,\n                user_id: \"\",\n                wavespeed_request_id: \"\",\n                prompt: \"Temporary video\",\n                settings: {},\n                original_url: null,\n                status: updates.status || \"completed\",\n                download_progress: updates.downloadProgress || 100,\n                error_message: updates.errorMessage || null,\n                storage_path: updates.storagePath || null,\n                thumbnail_path: updates.thumbnailPath || null,\n                file_size: updates.fileSize || null,\n                duration_seconds: updates.durationSeconds || null,\n                view_count: 0,\n                is_favorite: false,\n                last_viewed_at: null,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            };\n        }\n        return (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n            const updateData = {};\n            if (updates.status) updateData.status = updates.status;\n            if (updates.downloadProgress !== undefined) updateData.download_progress = updates.downloadProgress;\n            if (updates.errorMessage) updateData.error_message = updates.errorMessage;\n            if (updates.storagePath) updateData.storage_path = updates.storagePath;\n            if (updates.thumbnailPath) updateData.thumbnail_path = updates.thumbnailPath;\n            if (updates.fileSize) updateData.file_size = updates.fileSize;\n            if (updates.durationSeconds) updateData.duration_seconds = updates.durationSeconds;\n            const { data: video, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).update(updateData).eq(\"id\", videoId).select().single();\n            if (error) {\n                console.error(\"Error updating video:\", error);\n                _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.updateVideoStatus\");\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            return video;\n        }, `Update video status (${videoId})`);\n    }\n    /**\n   * Get video by ID\n   */ static async getVideoById(videoId, userId) {\n        try {\n            let query = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"*\").eq(\"id\", videoId);\n            if (userId) {\n                query = query.eq(\"user_id\", userId);\n            }\n            const { data: video, error } = await query.single();\n            if (error) {\n                if (error.code === \"PGRST116\") {\n                    return null // No rows found\n                    ;\n                }\n                console.error(\"Error getting video:\", error);\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            return video;\n        } catch (error) {\n            console.error(\"Get video by ID error:\", error);\n            return null;\n        }\n    }\n    /**\n   * Get video by Wavespeed request ID\n   */ static async getVideoByWavespeedId(wavespeedRequestId, userId) {\n        try {\n            let query = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"*\").eq(\"wavespeed_request_id\", wavespeedRequestId);\n            if (userId) {\n                query = query.eq(\"user_id\", userId);\n            }\n            const { data: video, error } = await query.single();\n            if (error) {\n                if (error.code === \"PGRST116\") {\n                    return null // No rows found\n                    ;\n                }\n                console.error(\"Error getting video by Wavespeed ID:\", error);\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            return video;\n        } catch (error) {\n            console.error(\"Get video by Wavespeed ID error:\", error);\n            return null;\n        }\n    }\n    /**\n   * Get user's videos with pagination\n   */ static async getUserVideos(userId, options = {}) {\n        return (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n            const { page = 1, limit = 20, status, orderBy = \"created_at\", orderDirection = \"desc\", search } = options;\n            let query = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"*\", {\n                count: \"exact\"\n            }).eq(\"user_id\", userId).neq(\"status\", \"deleted\") // Exclude soft-deleted videos\n            ;\n            // Filter by status\n            if (status && status.length > 0) {\n                query = query.in(\"status\", status);\n            }\n            // Search in prompt\n            if (search) {\n                query = query.ilike(\"prompt\", `%${search}%`);\n            }\n            // Ordering\n            query = query.order(orderBy, {\n                ascending: orderDirection === \"asc\"\n            });\n            // Pagination\n            const from = (page - 1) * limit;\n            const to = from + limit - 1;\n            query = query.range(from, to);\n            const { data: videos, error, count } = await query;\n            if (error) {\n                console.error(\"Error getting user videos:\", error);\n                _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.getUserVideos\");\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            const total = count || 0;\n            const hasMore = to < total - 1;\n            return {\n                videos: videos,\n                total,\n                page,\n                limit,\n                hasMore\n            };\n        }, `Get user videos (${userId})`);\n    }\n    /**\n   * Get user's video statistics\n   */ static async getUserVideoStats(userId) {\n        try {\n            const { data: stats, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"status, file_size\").eq(\"user_id\", userId).neq(\"status\", \"deleted\");\n            if (error) {\n                console.error(\"Error getting user video stats:\", error);\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            const total = stats.length;\n            const completed = stats.filter((v)=>v.status === \"completed\").length;\n            const processing = stats.filter((v)=>[\n                    \"generating\",\n                    \"downloading\",\n                    \"processing\"\n                ].includes(v.status)).length;\n            const failed = stats.filter((v)=>v.status === \"failed\").length;\n            const totalSize = stats.reduce((sum, v)=>sum + (v.file_size || 0), 0);\n            const totalSizeMB = Math.round(totalSize / (1024 * 1024) * 100) / 100;\n            return {\n                total,\n                completed,\n                processing,\n                failed,\n                totalSizeMB\n            };\n        } catch (error) {\n            console.error(\"Get user video stats error:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Update video interaction (view count, last viewed)\n   */ static async recordVideoView(videoId, userId) {\n        // üî• ‰øÆÂ§çÔºöÊ£ÄÊü•ÂèÇÊï∞ÊúâÊïàÊÄßÔºåÈÅøÂÖçÁ©∫ÂÄº\n        if (!videoId || !userId) {\n            console.warn(\"Invalid parameters for recordVideoView:\", {\n                videoId,\n                userId\n            });\n            return;\n        }\n        try {\n            await (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n                // First get current view count\n                const { data: video, error: fetchError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"view_count\").eq(\"id\", videoId).eq(\"user_id\", userId).single();\n                // üî• ‰øÆÂ§çÔºöÂ¶ÇÊûúËßÜÈ¢ë‰∏çÂ≠òÂú®ÔºåÈùôÈªòËøîÂõûÔºàËßÜÈ¢ëÂèØËÉΩËøòÊú™Â≠òÂÇ®Âà∞Êï∞ÊçÆÂ∫ìÔºâ\n                if (fetchError || !video) {\n                    return;\n                }\n                const currentViewCount = video?.view_count || 0;\n                const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).update({\n                    view_count: currentViewCount + 1,\n                    last_viewed_at: new Date().toISOString()\n                }).eq(\"id\", videoId).eq(\"user_id\", userId);\n                if (error) {\n                    _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.recordVideoView\");\n                    throw error;\n                }\n            }, `Record video view (${videoId})`);\n        } catch (error) {\n        // Don't throw error for view tracking failures, just log\n        }\n    }\n    /**\n   * Toggle video favorite status\n   */ static async toggleVideoFavorite(videoId, userId) {\n        return (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n            // First get current status\n            const video = await this.getVideoById(videoId, userId);\n            if (!video) {\n                throw new Error(\"Video not found\");\n            }\n            const newFavoriteStatus = !video.is_favorite;\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).update({\n                is_favorite: newFavoriteStatus\n            }).eq(\"id\", videoId).eq(\"user_id\", userId);\n            if (error) {\n                _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.toggleVideoFavorite\");\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            return newFavoriteStatus;\n        }, `Toggle video favorite (${videoId})`);\n    }\n    /**\n   * Soft delete a video\n   */ static async deleteVideo(videoId, userId) {\n        return (0,_lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.resilientDbOperation)(async ()=>{\n            const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).update({\n                status: \"deleted\"\n            }).eq(\"id\", videoId).eq(\"user_id\", userId);\n            if (error) {\n                _lib_utils_error_handling__WEBPACK_IMPORTED_MODULE_1__.ErrorReporter.getInstance().reportError(error, \"UserVideosDB.deleteVideo\");\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n        }, `Delete video (${videoId})`);\n    }\n    /**\n   * Get user's storage quota information\n   */ static async getUserQuota(userId) {\n        try {\n            // Check cache first\n            const cached = this.quotaCache.get(userId);\n            if (cached && Date.now() - cached.timestamp < this.QUOTA_CACHE_TTL) {\n                return cached.data;\n            }\n            // Â∞ùËØïË∞ÉÁî®Êï∞ÊçÆÂ∫ìÂáΩÊï∞\n            const { data: quota, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.rpc(\"get_user_quota\", {\n                user_uuid: userId\n            }).single();\n            const defaultQuota = {\n                current_videos: 0,\n                max_videos: 50,\n                current_size_bytes: 0,\n                max_size_bytes: 104857600,\n                current_size_mb: 0,\n                max_size_mb: 100,\n                videos_percentage: 0,\n                storage_percentage: 0,\n                can_upload: true,\n                is_subscribed: false\n            };\n            if (error) {\n                // Don't log warnings for common 401/403 errors to prevent spam\n                if (!error.message.includes(\"401\") && !error.message.includes(\"Unauthorized\") && !error.message.includes(\"403\")) {\n                    console.warn(\"Database quota function not available, using fallback:\", error.message);\n                }\n                // Cache the default quota to prevent repeated calls\n                this.quotaCache.set(userId, {\n                    data: defaultQuota,\n                    timestamp: Date.now()\n                });\n                return defaultQuota;\n            }\n            const quotaData = quota;\n            // Cache the successful result\n            this.quotaCache.set(userId, {\n                data: quotaData,\n                timestamp: Date.now()\n            });\n            return quotaData;\n        } catch (error) {\n            const defaultQuota = {\n                current_videos: 0,\n                max_videos: 50,\n                current_size_bytes: 0,\n                max_size_bytes: 104857600,\n                current_size_mb: 0,\n                max_size_mb: 100,\n                videos_percentage: 0,\n                storage_percentage: 0,\n                can_upload: true,\n                is_subscribed: false\n            };\n            // Don't log errors for common auth failures to prevent spam\n            if (error && typeof error === \"object\" && \"message\" in error) {\n                const errorMessage = error.message;\n                if (!errorMessage.includes(\"401\") && !errorMessage.includes(\"Unauthorized\") && !errorMessage.includes(\"403\")) {\n                    console.warn(\"getUserQuota fallback mode:\", error);\n                }\n            }\n            // Cache the default quota to prevent repeated calls\n            this.quotaCache.set(userId, {\n                data: defaultQuota,\n                timestamp: Date.now()\n            });\n            return defaultQuota;\n        }\n    }\n    /**\n   * Manual cleanup of user storage space\n   */ static async cleanupUserStorage(userId, targetSizeMB) {\n        try {\n            // Â∞ùËØïË∞ÉÁî®Êï∞ÊçÆÂ∫ìÂáΩÊï∞\n            const { data: result, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.rpc(\"manual_cleanup_user_storage\", {\n                user_uuid: userId,\n                target_size_mb: targetSizeMB\n            }).single();\n            if (error) {\n                console.warn(\"Database cleanup function not available, using basic fallback:\", error.message);\n                // Âü∫Á°ÄÊ∏ÖÁêÜÔºöÂà†Èô§ÊúÄÊóßÁöÑÈùûÊî∂ËóèËßÜÈ¢ë\n                return await this.basicCleanupFallback(userId, targetSizeMB);\n            }\n            return {\n                deletedVideos: result.deleted_videos,\n                freedSizeMB: result.freed_size_mb,\n                remainingSizeMB: result.remaining_size_mb\n            };\n        } catch (error) {\n            console.warn(\"cleanupUserStorage fallback mode:\", error);\n            return await this.basicCleanupFallback(userId, targetSizeMB);\n        }\n    }\n    /**\n   * Basic cleanup fallback when database functions are not available\n   */ static async basicCleanupFallback(userId, targetSizeMB) {\n        try {\n            // Ëé∑ÂèñÁî®Êà∑ÁöÑÊóßËßÜÈ¢ëÔºàÈùûÊî∂ËóèÔºâ\n            const { data: videos, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"id, file_size\").eq(\"user_id\", userId).eq(\"status\", \"completed\").eq(\"is_favorite\", false).order(\"created_at\", {\n                ascending: true\n            }).limit(5) // ÊúÄÂ§öÂà†Èô§5‰∏™ËßÜÈ¢ë\n            ;\n            if (error) {\n                console.error(\"Error in basic cleanup:\", error);\n                return {\n                    deletedVideos: 0,\n                    freedSizeMB: 0,\n                    remainingSizeMB: 0\n                };\n            }\n            let deletedCount = 0;\n            let freedBytes = 0;\n            // Âà†Èô§ÊúÄÊóßÁöÑÂá†‰∏™ËßÜÈ¢ë\n            for (const video of videos || []){\n                const { error: deleteError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).update({\n                    status: \"deleted\"\n                }).eq(\"id\", video.id);\n                if (!deleteError) {\n                    deletedCount++;\n                    freedBytes += video.file_size || 0;\n                }\n            }\n            return {\n                deletedVideos: deletedCount,\n                freedSizeMB: Math.round(freedBytes / (1024 * 1024) * 100) / 100,\n                remainingSizeMB: 0 // Êó†Ê≥ïËÆ°ÁÆóÂáÜÁ°ÆÂÄº\n            };\n        } catch (error) {\n            console.error(\"Basic cleanup fallback failed:\", error);\n            return {\n                deletedVideos: 0,\n                freedSizeMB: 0,\n                remainingSizeMB: 0\n            };\n        }\n    }\n    /**\n   * Check if user has exceeded storage quota\n   */ static async isStorageExceeded(userId) {\n        try {\n            const quota = await this.getUserQuota(userId);\n            return quota.storage_percentage > 100;\n        } catch (error) {\n            console.warn(\"Error checking storage status, assuming within limits:\", error);\n            return false;\n        }\n    }\n    /**\n   * Check if user can upload a new video\n   */ static async canUserUpload(userId, estimatedSize = 0) {\n        try {\n            const { data: canUpload, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.rpc(\"can_user_upload_video\", {\n                user_uuid: userId,\n                estimated_size: estimatedSize\n            });\n            if (error) {\n                console.warn(\"Database upload check function not available, using basic check:\", error.message);\n                // Âü∫Á°ÄÊ£ÄÊü•ÔºöÂÅáËÆæÁî®Êà∑ÂèØ‰ª•‰∏ä‰º†ÔºåÈô§ÈùûÊñá‰ª∂ËøáÂ§ß\n                const maxFileSize = 100 * 1024 * 1024 // 100MB\n                ;\n                return estimatedSize <= maxFileSize;\n            }\n            return canUpload;\n        } catch (error) {\n            console.warn(\"Can user upload fallback mode:\", error);\n            // Âü∫Á°ÄÊ£ÄÊü•ÔºöÂÅáËÆæÁî®Êà∑ÂèØ‰ª•‰∏ä‰º†ÔºåÈô§ÈùûÊñá‰ª∂ËøáÂ§ß\n            const maxFileSize = 100 * 1024 * 1024 // 100MB\n            ;\n            return estimatedSize <= maxFileSize;\n        }\n    }\n    /**\n   * Get videos by status for admin purposes\n   */ static async getVideosByStatus(status, limit = 100) {\n        try {\n            const { data: videos, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(_supabase__WEBPACK_IMPORTED_MODULE_0__.TABLES.USER_VIDEOS).select(\"*\").eq(\"status\", status).order(\"created_at\", {\n                ascending: true\n            }).limit(limit);\n            if (error) {\n                console.error(\"Error getting videos by status:\", error);\n                (0,_supabase__WEBPACK_IMPORTED_MODULE_0__.handleSupabaseError)(error);\n            }\n            return videos;\n        } catch (error) {\n            console.error(\"Get videos by status error:\", error);\n            throw error;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ3RCLElBQUk7WUFDRixNQUFNLEVBQUV2RixNQUFNb0csTUFBTSxFQUFFOUYsS0FBSyxFQUFFLEdBQUcsTUFBTWpCLG9EQUFhQSxDQUNoRGtCLElBQUksQ0FBQ2pCLDZDQUFNQSxDQUFDa0IsV0FBVyxFQUN2QlMsTUFBTSxDQUFDLEtBQ1BZLEVBQUUsQ0FBQyxVQUFVYixRQUNiZ0YsS0FBSyxDQUFDLGNBQWM7Z0JBQUVDLFdBQVc7WUFBSyxHQUN0Q1YsS0FBSyxDQUFDQTtZQUVULElBQUlqRixPQUFPO2dCQUNUSixRQUFRSSxLQUFLLENBQUMsbUNBQW1DQTtnQkFDakRmLDhEQUFtQkEsQ0FBQ2U7WUFDdEI7WUFFQSxPQUFPOEY7UUFDVCxFQUFFLE9BQU85RixPQUFPO1lBQ2RKLFFBQVFJLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDLE1BQU1BO1FBQ1I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYXRhYmFzZS91c2VyLXZpZGVvcy50cz9lYzE1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXNlciBWaWRlb3MgRGF0YWJhc2UgT3BlcmF0aW9uc1xuICogVmlkRmFiIEFJIFZpZGVvIFBsYXRmb3JtXG4gKi9cblxuaW1wb3J0IHsgc3VwYWJhc2UsIHN1cGFiYXNlQWRtaW4sIFRBQkxFUywgaGFuZGxlU3VwYWJhc2VFcnJvciB9IGZyb20gJy4uL3N1cGFiYXNlJ1xuaW1wb3J0IHR5cGUgeyBVc2VyVmlkZW8sIFVzZXJTdG9yYWdlUXVvdGEsIFVzZXJRdW90YUluZm8gfSBmcm9tICcuLi9zdXBhYmFzZSdcbmltcG9ydCB7IHJlc2lsaWVudERiT3BlcmF0aW9uLCBFcnJvclJlcG9ydGVyIH0gZnJvbSAnQC9saWIvdXRpbHMvZXJyb3ItaGFuZGxpbmcnXG5cbmV4cG9ydCBjbGFzcyBVc2VyVmlkZW9zREIge1xuXG4gIC8vIENhY2hlIHF1b3RhIGluZm8gdG8gcHJldmVudCBleGNlc3NpdmUgZGF0YWJhc2UgY2FsbHNcbiAgcHJpdmF0ZSBzdGF0aWMgcXVvdGFDYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGRhdGE6IFVzZXJRdW90YUluZm87IHRpbWVzdGFtcDogbnVtYmVyIH0+KClcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUVVPVEFfQ0FDSEVfVFRMID0gMzAwMDAgLy8gMzAgc2Vjb25kcyBjYWNoZVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgdmlkZW8gcmVjb3JkXG4gICAqIPCflKUg5L+u5aSN77ya6Ieq5Yqo5aSE55CG55So5oi35LiN5a2Y5Zyo55qE5oOF5Ya1XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlVmlkZW8oXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgZGF0YToge1xuICAgICAgd2F2ZXNwZWVkUmVxdWVzdElkOiBzdHJpbmdcbiAgICAgIHByb21wdDogc3RyaW5nXG4gICAgICBzZXR0aW5nczogVXNlclZpZGVvWydzZXR0aW5ncyddXG4gICAgICBvcmlnaW5hbFVybD86IHN0cmluZ1xuICAgIH0sXG4gICAgdXNlckVtYWlsPzogc3RyaW5nXG4gICk6IFByb21pc2U8VXNlclZpZGVvPiB7XG4gICAgcmV0dXJuIHJlc2lsaWVudERiT3BlcmF0aW9uKFxuICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDwn46sIOWwneivleebtOaOpeWIm+W7uuinhumikTogJHtkYXRhLndhdmVzcGVlZFJlcXVlc3RJZH0gZm9yIHVzZXIgJHt1c2VySWR9YClcblxuICAgICAgICAgIC8vIPCflKUg55u05o6l5bCd6K+V5Yib5bu66KeG6aKRXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB2aWRlbywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgIHdhdmVzcGVlZF9yZXF1ZXN0X2lkOiBkYXRhLndhdmVzcGVlZFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgcHJvbXB0OiBkYXRhLnByb21wdCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IGRhdGEuc2V0dGluZ3MsXG4gICAgICAgICAgICAgIG9yaWdpbmFsX3VybDogZGF0YS5vcmlnaW5hbFVybCxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZ2VuZXJhdGluZydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYOKchSDop4bpopHnm7TmjqXliJvlu7rmiJDlip86ICR7dmlkZW8uaWR9YClcbiAgICAgICAgICAgIHJldHVybiB2aWRlbyBhcyBVc2VyVmlkZW9cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIOebtOaOpeWIm+W7uuWksei0pe+8jOmUmeivr+eggTogJHtlcnJvci5jb2RlfWApXG5cbiAgICAgICAgICAvLyDwn5SlIOWmguaenOaYr+WklumUrue6puadn+mUmeivr++8jOS9v+eUqOW8uuWItuaWueazleebtOaOpeino+WGs1xuICAgICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnMjM1MDMnICYmIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VzZXJfdmlkZW9zX3VzZXJfaWRfZmtleScpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UpyDlpJbplK7nuqbmnZ/plJnor6/vvIzlkK/liqjnlKjmiLfliJvlu7rmtYHnqItgKVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZm9yY2VDcmVhdGVVc2VyQW5kVmlkZW8odXNlcklkLCB1c2VyRW1haWwsIGRhdGEpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5YW25LuW6ZSZ6K+v55u05o6l5oqb5Ye6XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdmlkZW86JywgZXJyb3IpXG4gICAgICAgICAgRXJyb3JSZXBvcnRlci5nZXRJbnN0YW5jZSgpLnJlcG9ydEVycm9yKGVycm9yLCAnVXNlclZpZGVvc0RCLmNyZWF0ZVZpZGVvJylcbiAgICAgICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VzZXJWaWRlb3NEQi5jcmVhdGVWaWRlbyBleGNlcHRpb246JywgZXJyKVxuICAgICAgICAgIHRocm93IGVyclxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ0NyZWF0ZSB2aWRlbydcbiAgICApXG4gIH1cblxuICAvKipcbiAgICog8J+UpSDnroDljJbnmoTnlKjmiLflkozop4bpopHliJvlu7rmlrnms5UgLSDkvb/nlKjljp/lrZDmk43kvZxcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGFzeW5jIGZvcmNlQ3JlYXRlVXNlckFuZFZpZGVvKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHVzZXJFbWFpbDogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGRhdGE6IHtcbiAgICAgIHdhdmVzcGVlZFJlcXVlc3RJZDogc3RyaW5nXG4gICAgICBwcm9tcHQ6IHN0cmluZ1xuICAgICAgc2V0dGluZ3M6IGFueVxuICAgICAgb3JpZ2luYWxVcmw/OiBzdHJpbmdcbiAgICB9XG4gICk6IFByb21pc2U8VXNlclZpZGVvPiB7XG4gICAgY29uc29sZS5sb2coYPCflKUg5byA5aeL5by65Yi25Yib5bu655So5oi35ZKM6KeG6aKROiAke3VzZXJJZH0sICR7dXNlckVtYWlsfWApXG5cbiAgICB0cnkge1xuICAgICAgLy8g8J+UpSDmlrnmoYgx77ya5YWI5qOA5p+l55So5oi35piv5ZCm5a2Y5ZyoXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nVXNlciwgZXJyb3I6IGNoZWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgLnNlbGVjdCgndXVpZCwgZW1haWwnKVxuICAgICAgICAuZXEoJ3V1aWQnLCB1c2VySWQpXG4gICAgICAgIC5tYXliZVNpbmdsZSgpXG5cbiAgICAgIGlmIChjaGVja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBjaGVja2luZyBleGlzdGluZyB1c2VyOmAsIGNoZWNrRXJyb3IpXG4gICAgICB9XG5cbiAgICAgIGlmICghZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5GkIOeUqOaIt+S4jeWtmOWcqO+8jOWIm+W7uuaWsOeUqOaItzogJHt1c2VySWR9YClcblxuICAgICAgICAvLyDwn5SlIOeUn+aIkOWUr+S4gOeahGVtYWls5p2l6YG/5YWN5Yay56qBIC0g5L2/55So5a6M5pW0VVVJROehruS/neWUr+S4gOaAp1xuICAgICAgICBjb25zdCB1bmlxdWVFbWFpbCA9IHVzZXJFbWFpbCB8fCBgJHt1c2VySWR9QHZpZGZhYi5haWBcblxuICAgICAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgdXVpZDogdXNlcklkLFxuICAgICAgICAgICAgZW1haWw6IHVuaXF1ZUVtYWlsLFxuICAgICAgICAgICAgbmlja25hbWU6IHVzZXJFbWFpbD8uc3BsaXQoJ0AnKVswXSB8fCBgVXNlciR7dXNlcklkLnNwbGl0KCctJylbMF19YCxcbiAgICAgICAgICAgIGF2YXRhcl91cmw6ICcnLFxuICAgICAgICAgICAgc2lnbmluX3R5cGU6ICdvYXV0aCcsXG4gICAgICAgICAgICBzaWduaW5fcHJvdmlkZXI6ICdnb29nbGUnLFxuICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgZW1haWxfdmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgICBpc19hY3RpdmU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zZWxlY3QoKVxuXG4gICAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICAgIGlmIChpbnNlcnRFcnJvci5jb2RlID09PSAnMjM1MDUnKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzov5jmmK/mnInllK/kuIDnuqbmnZ/lhrLnqoHvvIzlsJ3or5XnlKhVVUlE5L2c5Li6ZW1haWxcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIEVtYWls5Yay56qB77yM5L2/55SoVVVJROS9nOS4umVtYWls6YeN6K+VYClcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcmV0cnlEYXRhLCBlcnJvcjogcmV0cnlFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgICB1dWlkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgZW1haWw6IGAke3VzZXJJZH1AdmlkZmFiLmFpYCxcbiAgICAgICAgICAgICAgICBuaWNrbmFtZTogYFVzZXIke3VzZXJJZC5zcGxpdCgnLScpWzBdfWAsXG4gICAgICAgICAgICAgICAgYXZhdGFyX3VybDogJycsXG4gICAgICAgICAgICAgICAgc2lnbmluX3R5cGU6ICdvYXV0aCcsXG4gICAgICAgICAgICAgICAgc2lnbmluX3Byb3ZpZGVyOiAnZ29vZ2xlJyxcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIGVtYWlsX3ZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzX2FjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuc2VsZWN0KClcblxuICAgICAgICAgICAgaWYgKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIOmHjeivleeUqOaIt+WIm+W7uuWksei0pTpgLCByZXRyeUVycm9yKVxuICAgICAgICAgICAgICAvLyDnu6fnu63vvIzkuI3mipvplJlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg55So5oi35Yib5bu65oiQ5YqfKOmHjeivlSk6ICR7dXNlcklkfWApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBVc2VyIGNyZWF0aW9uIGZhaWxlZDpgLCBpbnNlcnRFcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSDnlKjmiLfliJvlu7rmiJDlip86ICR7dXNlcklkfWApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDinIUg55So5oi35bey5a2Y5ZyoOiAke3VzZXJJZH0sIGVtYWlsOiAke2V4aXN0aW5nVXNlci5lbWFpbH1gKVxuICAgICAgfVxuXG4gICAgICAvLyDwn5SlIOaWueahiDLvvJrnm7TmjqXnrYnlvoXkuIDlsI/mrrXml7bpl7Tnoa7kv53kuovliqHmj5DkuqRcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKVxuXG4gICAgICAvLyDwn5SlIOaWueahiDPvvJrlho3mrKHpqozor4HnlKjmiLflrZjlnKjlkI7liJvlu7rop4bpopFcbiAgICAgIGNvbnN0IHsgZGF0YTogZmluYWxVc2VyLCBlcnJvcjogZmluYWxDaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgIC5zZWxlY3QoJ3V1aWQnKVxuICAgICAgICAuZXEoJ3V1aWQnLCB1c2VySWQpXG4gICAgICAgIC5tYXliZVNpbmdsZSgpXG5cbiAgICAgIGlmIChmaW5hbENoZWNrRXJyb3IgfHwgIWZpbmFsVXNlcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwg5pyA57uI55So5oi36aqM6K+B5aSx6LSl77yM5peg5rOV5Yib5bu66KeG6aKROiAke3VzZXJJZH1gKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVzZXIgJHt1c2VySWR9IHN0aWxsIG5vdCBmb3VuZCBhZnRlciBjcmVhdGlvbiBhdHRlbXB0c2ApXG4gICAgICB9XG5cbiAgICAgIC8vIPCflKUg55So5oi356Gu6K6k5a2Y5Zyo77yM5Yib5bu66KeG6aKR6K6w5b2VXG4gICAgICBjb25zdCB7IGRhdGE6IHZpZGVvLCBlcnJvcjogdmlkZW9FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbShUQUJMRVMuVVNFUl9WSURFT1MpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICB3YXZlc3BlZWRfcmVxdWVzdF9pZDogZGF0YS53YXZlc3BlZWRSZXF1ZXN0SWQsXG4gICAgICAgICAgcHJvbXB0OiBkYXRhLnByb21wdCxcbiAgICAgICAgICBzZXR0aW5nczogZGF0YS5zZXR0aW5ncyxcbiAgICAgICAgICBvcmlnaW5hbF91cmw6IGRhdGEub3JpZ2luYWxVcmwsXG4gICAgICAgICAgc3RhdHVzOiAnZ2VuZXJhdGluZydcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAodmlkZW9FcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwg6KeG6aKR5Yib5bu65aSx6LSlOmAsIHZpZGVvRXJyb3IpXG5cbiAgICAgICAgaWYgKHZpZGVvRXJyb3IuY29kZSA9PT0gJzIzNTAzJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCDlpJbplK7nuqbmnZ/ku43nhLblpLHotKXvvIzov5nkuI3lupTor6Xlj5HnlJ/jgILnlKjmiLflrZjlnKjkvYbop4bpopHliJvlu7rlpLHotKXjgIJgKVxuICAgICAgICAgIC8vIPCflKUg5pyA5ZCO5bCd6K+V77ya5YaN562J5b6F5LiA5LiL5YaN5Yib5bu66KeG6aKRXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXG5cbiAgICAgICAgICBjb25zdCB7IGRhdGE6IHJldHJ5VmlkZW8sIGVycm9yOiByZXRyeUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbShUQUJMRVMuVVNFUl9WSURFT1MpXG4gICAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgICAgICB3YXZlc3BlZWRfcmVxdWVzdF9pZDogZGF0YS53YXZlc3BlZWRSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgIHByb21wdDogZGF0YS5wcm9tcHQsXG4gICAgICAgICAgICAgIHNldHRpbmdzOiBkYXRhLnNldHRpbmdzLFxuICAgICAgICAgICAgICBvcmlnaW5hbF91cmw6IGRhdGEub3JpZ2luYWxVcmwsXG4gICAgICAgICAgICAgIHN0YXR1czogJ2dlbmVyYXRpbmcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgICAuc2luZ2xlKClcblxuICAgICAgICAgIGlmIChyZXRyeUVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwg6YeN6K+V6KeG6aKR5Yib5bu65Lmf5aSx6LSl77yM546w5Zyo5omN5Yib5bu65Li05pe26K6w5b2VOmAsIHJldHJ5RXJyb3IpXG4gICAgICAgICAgICAvLyDwn5SlIOWPquacieWcqOaJgOacieWwneivlemDveWksei0peWQjuaJjeWIm+W7uuS4tOaXtuiusOW9lVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgaWQ6IGB0ZW1wLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICAgIHdhdmVzcGVlZF9yZXF1ZXN0X2lkOiBkYXRhLndhdmVzcGVlZFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgcHJvbXB0OiBkYXRhLnByb21wdCxcbiAgICAgICAgICAgICAgc2V0dGluZ3M6IGRhdGEuc2V0dGluZ3MsXG4gICAgICAgICAgICAgIG9yaWdpbmFsX3VybDogZGF0YS5vcmlnaW5hbFVybCxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZ2VuZXJhdGluZycsXG4gICAgICAgICAgICAgIGRvd25sb2FkX3Byb2dyZXNzOiAwLFxuICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlOiBudWxsLFxuICAgICAgICAgICAgICBzdG9yYWdlX3BhdGg6IG51bGwsXG4gICAgICAgICAgICAgIHRodW1ibmFpbF9wYXRoOiBudWxsLFxuICAgICAgICAgICAgICBmaWxlX3NpemU6IG51bGwsXG4gICAgICAgICAgICAgIGR1cmF0aW9uX3NlY29uZHM6IG51bGwsXG4gICAgICAgICAgICAgIHZpZXdfY291bnQ6IDAsXG4gICAgICAgICAgICAgIGlzX2Zhdm9yaXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgbGFzdF92aWV3ZWRfYXQ6IG51bGwsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICB9IGFzIFVzZXJWaWRlb1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUg6YeN6K+V6KeG6aKR5Yib5bu65oiQ5YqfOiAke3JldHJ5VmlkZW8uaWR9YClcbiAgICAgICAgICByZXR1cm4gcmV0cnlWaWRlbyBhcyBVc2VyVmlkZW9cbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IHZpZGVvRXJyb3JcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYOKchSDop4bpopHliJvlu7rmiJDlip86ICR7dmlkZW8uaWR9YClcbiAgICAgIHJldHVybiB2aWRlbyBhcyBVc2VyVmlkZW9cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgZm9yY2VDcmVhdGVVc2VyQW5kVmlkZW8gZmluYWwgZXJyb3I6JywgZXJyb3IpXG5cbiAgICAgIC8vIPCflKUg5pyA57uI6ZmN57qn5pa55qGI77ya5Yib5bu65Li05pe26K6w5b2V77yM5LiN5L6d6LWW5pWw5o2u5bqTXG4gICAgICBjb25zb2xlLmxvZygn8J+UhCDliJvlu7rkuLTml7bop4bpopHorrDlvZXkvZzkuLrpmY3nuqfmlrnmoYgnKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGB0ZW1wLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgIHdhdmVzcGVlZF9yZXF1ZXN0X2lkOiBkYXRhLndhdmVzcGVlZFJlcXVlc3RJZCxcbiAgICAgICAgcHJvbXB0OiBkYXRhLnByb21wdCxcbiAgICAgICAgc2V0dGluZ3M6IGRhdGEuc2V0dGluZ3MsXG4gICAgICAgIG9yaWdpbmFsX3VybDogZGF0YS5vcmlnaW5hbFVybCxcbiAgICAgICAgc3RhdHVzOiAnZ2VuZXJhdGluZycsXG4gICAgICAgIGRvd25sb2FkX3Byb2dyZXNzOiAwLFxuICAgICAgICBlcnJvcl9tZXNzYWdlOiBudWxsLFxuICAgICAgICBzdG9yYWdlX3BhdGg6IG51bGwsXG4gICAgICAgIHRodW1ibmFpbF9wYXRoOiBudWxsLFxuICAgICAgICBmaWxlX3NpemU6IG51bGwsXG4gICAgICAgIGR1cmF0aW9uX3NlY29uZHM6IG51bGwsXG4gICAgICAgIHZpZXdfY291bnQ6IDAsXG4gICAgICAgIGlzX2Zhdm9yaXRlOiBmYWxzZSxcbiAgICAgICAgbGFzdF92aWV3ZWRfYXQ6IG51bGwsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9IGFzIFVzZXJWaWRlb1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdmlkZW8gc3RhdHVzIGFuZCBwcm9ncmVzc1xuICAgKiDwn5SlIOS/ruWkje+8muS8mOmbheWkhOeQhuS4tOaXtuinhumikeiusOW9lVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVZpZGVvU3RhdHVzKFxuICAgIHZpZGVvSWQ6IHN0cmluZyxcbiAgICB1cGRhdGVzOiB7XG4gICAgICBzdGF0dXM/OiBVc2VyVmlkZW9bJ3N0YXR1cyddXG4gICAgICBkb3dubG9hZFByb2dyZXNzPzogbnVtYmVyXG4gICAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmdcbiAgICAgIHN0b3JhZ2VQYXRoPzogc3RyaW5nXG4gICAgICB0aHVtYm5haWxQYXRoPzogc3RyaW5nXG4gICAgICBmaWxlU2l6ZT86IG51bWJlclxuICAgICAgZHVyYXRpb25TZWNvbmRzPzogbnVtYmVyXG4gICAgfVxuICApOiBQcm9taXNlPFVzZXJWaWRlbz4ge1xuICAgIC8vIPCflKUg5aaC5p6c5piv5Li05pe26KeG6aKRSUTvvIznm7TmjqXov5Tlm57mqKHmi5/nu5PmnpzvvIzkuI3ov5vooYzmlbDmja7lupPmk43kvZxcbiAgICBpZiAodmlkZW9JZC5zdGFydHNXaXRoKCd0ZW1wLScpKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCDot7Pov4fkuLTml7bop4bpopHnirbmgIHmm7TmlrA6ICR7dmlkZW9JZH1gKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHZpZGVvSWQsXG4gICAgICAgIHVzZXJfaWQ6ICcnLCAvLyDov5nph4zml6Dms5Xojrflj5bvvIzkvYbkuLTml7borrDlvZXpgJrluLjkuI3pnIDopoFcbiAgICAgICAgd2F2ZXNwZWVkX3JlcXVlc3RfaWQ6ICcnLFxuICAgICAgICBwcm9tcHQ6ICdUZW1wb3JhcnkgdmlkZW8nLFxuICAgICAgICBzZXR0aW5nczoge30sXG4gICAgICAgIG9yaWdpbmFsX3VybDogbnVsbCxcbiAgICAgICAgc3RhdHVzOiB1cGRhdGVzLnN0YXR1cyB8fCAnY29tcGxldGVkJyxcbiAgICAgICAgZG93bmxvYWRfcHJvZ3Jlc3M6IHVwZGF0ZXMuZG93bmxvYWRQcm9ncmVzcyB8fCAxMDAsXG4gICAgICAgIGVycm9yX21lc3NhZ2U6IHVwZGF0ZXMuZXJyb3JNZXNzYWdlIHx8IG51bGwsXG4gICAgICAgIHN0b3JhZ2VfcGF0aDogdXBkYXRlcy5zdG9yYWdlUGF0aCB8fCBudWxsLFxuICAgICAgICB0aHVtYm5haWxfcGF0aDogdXBkYXRlcy50aHVtYm5haWxQYXRoIHx8IG51bGwsXG4gICAgICAgIGZpbGVfc2l6ZTogdXBkYXRlcy5maWxlU2l6ZSB8fCBudWxsLFxuICAgICAgICBkdXJhdGlvbl9zZWNvbmRzOiB1cGRhdGVzLmR1cmF0aW9uU2Vjb25kcyB8fCBudWxsLFxuICAgICAgICB2aWV3X2NvdW50OiAwLFxuICAgICAgICBpc19mYXZvcml0ZTogZmFsc2UsXG4gICAgICAgIGxhc3Rfdmlld2VkX2F0OiBudWxsLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSBhcyBVc2VyVmlkZW9cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzaWxpZW50RGJPcGVyYXRpb24oXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHt9XG5cbiAgICAgICAgaWYgKHVwZGF0ZXMuc3RhdHVzKSB1cGRhdGVEYXRhLnN0YXR1cyA9IHVwZGF0ZXMuc3RhdHVzXG4gICAgICAgIGlmICh1cGRhdGVzLmRvd25sb2FkUHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5kb3dubG9hZF9wcm9ncmVzcyA9IHVwZGF0ZXMuZG93bmxvYWRQcm9ncmVzc1xuICAgICAgICBpZiAodXBkYXRlcy5lcnJvck1lc3NhZ2UpIHVwZGF0ZURhdGEuZXJyb3JfbWVzc2FnZSA9IHVwZGF0ZXMuZXJyb3JNZXNzYWdlXG4gICAgICAgIGlmICh1cGRhdGVzLnN0b3JhZ2VQYXRoKSB1cGRhdGVEYXRhLnN0b3JhZ2VfcGF0aCA9IHVwZGF0ZXMuc3RvcmFnZVBhdGhcbiAgICAgICAgaWYgKHVwZGF0ZXMudGh1bWJuYWlsUGF0aCkgdXBkYXRlRGF0YS50aHVtYm5haWxfcGF0aCA9IHVwZGF0ZXMudGh1bWJuYWlsUGF0aFxuICAgICAgICBpZiAodXBkYXRlcy5maWxlU2l6ZSkgdXBkYXRlRGF0YS5maWxlX3NpemUgPSB1cGRhdGVzLmZpbGVTaXplXG4gICAgICAgIGlmICh1cGRhdGVzLmR1cmF0aW9uU2Vjb25kcykgdXBkYXRlRGF0YS5kdXJhdGlvbl9zZWNvbmRzID0gdXBkYXRlcy5kdXJhdGlvblNlY29uZHNcblxuICAgICAgICBjb25zdCB7IGRhdGE6IHZpZGVvLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgICAgLmVxKCdpZCcsIHZpZGVvSWQpXG4gICAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdmlkZW86JywgZXJyb3IpXG4gICAgICAgICAgRXJyb3JSZXBvcnRlci5nZXRJbnN0YW5jZSgpLnJlcG9ydEVycm9yKGVycm9yLCAnVXNlclZpZGVvc0RCLnVwZGF0ZVZpZGVvU3RhdHVzJylcbiAgICAgICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZpZGVvIGFzIFVzZXJWaWRlb1xuICAgICAgfSxcbiAgICAgIGBVcGRhdGUgdmlkZW8gc3RhdHVzICgke3ZpZGVvSWR9KWBcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogR2V0IHZpZGVvIGJ5IElEXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VmlkZW9CeUlkKHZpZGVvSWQ6IHN0cmluZywgdXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxVc2VyVmlkZW8gfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oVEFCTEVTLlVTRVJfVklERU9TKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIHZpZGVvSWQpXG5cbiAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgndXNlcl9pZCcsIHVzZXJJZClcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBkYXRhOiB2aWRlbywgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgICAgICAgIHJldHVybiBudWxsIC8vIE5vIHJvd3MgZm91bmRcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHZpZGVvOicsIGVycm9yKVxuICAgICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmlkZW8gYXMgVXNlclZpZGVvXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldCB2aWRlbyBieSBJRCBlcnJvcjonLCBlcnJvcilcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB2aWRlbyBieSBXYXZlc3BlZWQgcmVxdWVzdCBJRFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldFZpZGVvQnlXYXZlc3BlZWRJZChcbiAgICB3YXZlc3BlZWRSZXF1ZXN0SWQ6IHN0cmluZyxcbiAgICB1c2VySWQ/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTxVc2VyVmlkZW8gfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oVEFCTEVTLlVTRVJfVklERU9TKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCd3YXZlc3BlZWRfcmVxdWVzdF9pZCcsIHdhdmVzcGVlZFJlcXVlc3RJZClcblxuICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGE6IHZpZGVvLCBlcnJvciB9ID0gYXdhaXQgcXVlcnkuc2luZ2xlKClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGwgLy8gTm8gcm93cyBmb3VuZFxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdmlkZW8gYnkgV2F2ZXNwZWVkIElEOicsIGVycm9yKVxuICAgICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmlkZW8gYXMgVXNlclZpZGVvXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldCB2aWRlbyBieSBXYXZlc3BlZWQgSUQgZXJyb3I6JywgZXJyb3IpXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdXNlcidzIHZpZGVvcyB3aXRoIHBhZ2luYXRpb25cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyVmlkZW9zKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIHBhZ2U/OiBudW1iZXJcbiAgICAgIGxpbWl0PzogbnVtYmVyXG4gICAgICBzdGF0dXM/OiBVc2VyVmlkZW9bJ3N0YXR1cyddW11cbiAgICAgIG9yZGVyQnk/OiAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCdcbiAgICAgIG9yZGVyRGlyZWN0aW9uPzogJ2FzYycgfCAnZGVzYydcbiAgICAgIHNlYXJjaD86IHN0cmluZ1xuICAgIH0gPSB7fVxuICApOiBQcm9taXNlPHtcbiAgICB2aWRlb3M6IFVzZXJWaWRlb1tdXG4gICAgdG90YWw6IG51bWJlclxuICAgIHBhZ2U6IG51bWJlclxuICAgIGxpbWl0OiBudW1iZXJcbiAgICBoYXNNb3JlOiBib29sZWFuXG4gIH0+IHtcbiAgICByZXR1cm4gcmVzaWxpZW50RGJPcGVyYXRpb24oXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBwYWdlID0gMSxcbiAgICAgICAgICBsaW1pdCA9IDIwLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBvcmRlckJ5ID0gJ2NyZWF0ZWRfYXQnLFxuICAgICAgICAgIG9yZGVyRGlyZWN0aW9uID0gJ2Rlc2MnLFxuICAgICAgICAgIHNlYXJjaFxuICAgICAgICB9ID0gb3B0aW9uc1xuXG4gICAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbShUQUJMRVMuVVNFUl9WSURFT1MpXG4gICAgICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcgfSlcbiAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG4gICAgICAgICAgLm5lcSgnc3RhdHVzJywgJ2RlbGV0ZWQnKSAvLyBFeGNsdWRlIHNvZnQtZGVsZXRlZCB2aWRlb3NcblxuICAgICAgICAvLyBGaWx0ZXIgYnkgc3RhdHVzXG4gICAgICAgIGlmIChzdGF0dXMgJiYgc3RhdHVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmluKCdzdGF0dXMnLCBzdGF0dXMpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWFyY2ggaW4gcHJvbXB0XG4gICAgICAgIGlmIChzZWFyY2gpIHtcbiAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmlsaWtlKCdwcm9tcHQnLCBgJSR7c2VhcmNofSVgKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3JkZXJpbmdcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5vcmRlcihvcmRlckJ5LCB7IGFzY2VuZGluZzogb3JkZXJEaXJlY3Rpb24gPT09ICdhc2MnIH0pXG5cbiAgICAgICAgLy8gUGFnaW5hdGlvblxuICAgICAgICBjb25zdCBmcm9tID0gKHBhZ2UgLSAxKSAqIGxpbWl0XG4gICAgICAgIGNvbnN0IHRvID0gZnJvbSArIGxpbWl0IC0gMVxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LnJhbmdlKGZyb20sIHRvKVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdmlkZW9zLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHF1ZXJ5XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIHZpZGVvczonLCBlcnJvcilcbiAgICAgICAgICBFcnJvclJlcG9ydGVyLmdldEluc3RhbmNlKCkucmVwb3J0RXJyb3IoZXJyb3IsICdVc2VyVmlkZW9zREIuZ2V0VXNlclZpZGVvcycpXG4gICAgICAgICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcilcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvdGFsID0gY291bnQgfHwgMFxuICAgICAgICBjb25zdCBoYXNNb3JlID0gdG8gPCB0b3RhbCAtIDFcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZpZGVvczogdmlkZW9zIGFzIFVzZXJWaWRlb1tdLFxuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIHBhZ2UsXG4gICAgICAgICAgbGltaXQsXG4gICAgICAgICAgaGFzTW9yZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYEdldCB1c2VyIHZpZGVvcyAoJHt1c2VySWR9KWBcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogR2V0IHVzZXIncyB2aWRlbyBzdGF0aXN0aWNzXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VXNlclZpZGVvU3RhdHModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICB0b3RhbDogbnVtYmVyXG4gICAgY29tcGxldGVkOiBudW1iZXJcbiAgICBwcm9jZXNzaW5nOiBudW1iZXJcbiAgICBmYWlsZWQ6IG51bWJlclxuICAgIHRvdGFsU2l6ZU1COiBudW1iZXJcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHN0YXRzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbShUQUJMRVMuVVNFUl9WSURFT1MpXG4gICAgICAgIC5zZWxlY3QoJ3N0YXR1cywgZmlsZV9zaXplJylcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgICAubmVxKCdzdGF0dXMnLCAnZGVsZXRlZCcpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgdmlkZW8gc3RhdHM6JywgZXJyb3IpXG4gICAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRvdGFsID0gc3RhdHMubGVuZ3RoXG4gICAgICBjb25zdCBjb21wbGV0ZWQgPSBzdGF0cy5maWx0ZXIodiA9PiB2LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aFxuICAgICAgY29uc3QgcHJvY2Vzc2luZyA9IHN0YXRzLmZpbHRlcih2ID0+IFsnZ2VuZXJhdGluZycsICdkb3dubG9hZGluZycsICdwcm9jZXNzaW5nJ10uaW5jbHVkZXModi5zdGF0dXMpKS5sZW5ndGhcbiAgICAgIGNvbnN0IGZhaWxlZCA9IHN0YXRzLmZpbHRlcih2ID0+IHYuc3RhdHVzID09PSAnZmFpbGVkJykubGVuZ3RoXG4gICAgICBjb25zdCB0b3RhbFNpemUgPSBzdGF0cy5yZWR1Y2UoKHN1bSwgdikgPT4gc3VtICsgKHYuZmlsZV9zaXplIHx8IDApLCAwKVxuICAgICAgY29uc3QgdG90YWxTaXplTUIgPSBNYXRoLnJvdW5kKHRvdGFsU2l6ZSAvICgxMDI0ICogMTAyNCkgKiAxMDApIC8gMTAwXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsLFxuICAgICAgICBjb21wbGV0ZWQsXG4gICAgICAgIHByb2Nlc3NpbmcsXG4gICAgICAgIGZhaWxlZCxcbiAgICAgICAgdG90YWxTaXplTUJcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignR2V0IHVzZXIgdmlkZW8gc3RhdHMgZXJyb3I6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdmlkZW8gaW50ZXJhY3Rpb24gKHZpZXcgY291bnQsIGxhc3Qgdmlld2VkKVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHJlY29yZFZpZGVvVmlldyh2aWRlb0lkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g8J+UpSDkv67lpI3vvJrmo4Dmn6Xlj4LmlbDmnInmlYjmgKfvvIzpgb/lhY3nqbrlgLxcbiAgICBpZiAoIXZpZGVvSWQgfHwgIXVzZXJJZCkge1xuICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIHBhcmFtZXRlcnMgZm9yIHJlY29yZFZpZGVvVmlldzonLCB7IHZpZGVvSWQsIHVzZXJJZCB9KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHJlc2lsaWVudERiT3BlcmF0aW9uKFxuICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gRmlyc3QgZ2V0IGN1cnJlbnQgdmlldyBjb3VudFxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogdmlkZW8sIGVycm9yOiBmZXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbShUQUJMRVMuVVNFUl9WSURFT1MpXG4gICAgICAgICAgICAuc2VsZWN0KCd2aWV3X2NvdW50JylcbiAgICAgICAgICAgIC5lcSgnaWQnLCB2aWRlb0lkKVxuICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuICAgICAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgICAgICAvLyDwn5SlIOS/ruWkje+8muWmguaenOinhumikeS4jeWtmOWcqO+8jOmdmem7mOi/lOWbnu+8iOinhumikeWPr+iDvei/mOacquWtmOWCqOWIsOaVsOaNruW6k++8iVxuICAgICAgICAgIGlmIChmZXRjaEVycm9yIHx8ICF2aWRlbykge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY3VycmVudFZpZXdDb3VudCA9IHZpZGVvPy52aWV3X2NvdW50IHx8IDBcblxuICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgICAgICB2aWV3X2NvdW50OiBjdXJyZW50Vmlld0NvdW50ICsgMSxcbiAgICAgICAgICAgICAgbGFzdF92aWV3ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcSgnaWQnLCB2aWRlb0lkKVxuICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBFcnJvclJlcG9ydGVyLmdldEluc3RhbmNlKCkucmVwb3J0RXJyb3IoZXJyb3IsICdVc2VyVmlkZW9zREIucmVjb3JkVmlkZW9WaWV3JylcbiAgICAgICAgICAgIHRocm93IGVycm9yXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBgUmVjb3JkIHZpZGVvIHZpZXcgKCR7dmlkZW9JZH0pYCxcbiAgICAgIClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRG9uJ3QgdGhyb3cgZXJyb3IgZm9yIHZpZXcgdHJhY2tpbmcgZmFpbHVyZXMsIGp1c3QgbG9nXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB2aWRlbyBmYXZvcml0ZSBzdGF0dXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVWaWRlb0Zhdm9yaXRlKHZpZGVvSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gcmVzaWxpZW50RGJPcGVyYXRpb24oXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIEZpcnN0IGdldCBjdXJyZW50IHN0YXR1c1xuICAgICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IHRoaXMuZ2V0VmlkZW9CeUlkKHZpZGVvSWQsIHVzZXJJZClcbiAgICAgICAgaWYgKCF2aWRlbykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlkZW8gbm90IGZvdW5kJylcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5ld0Zhdm9yaXRlU3RhdHVzID0gIXZpZGVvLmlzX2Zhdm9yaXRlXG5cbiAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgICAudXBkYXRlKHsgaXNfZmF2b3JpdGU6IG5ld0Zhdm9yaXRlU3RhdHVzIH0pXG4gICAgICAgICAgLmVxKCdpZCcsIHZpZGVvSWQpXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIEVycm9yUmVwb3J0ZXIuZ2V0SW5zdGFuY2UoKS5yZXBvcnRFcnJvcihlcnJvciwgJ1VzZXJWaWRlb3NEQi50b2dnbGVWaWRlb0Zhdm9yaXRlJylcbiAgICAgICAgICBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld0Zhdm9yaXRlU3RhdHVzXG4gICAgICB9LFxuICAgICAgYFRvZ2dsZSB2aWRlbyBmYXZvcml0ZSAoJHt2aWRlb0lkfSlgXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFNvZnQgZGVsZXRlIGEgdmlkZW9cbiAgICovXG4gIHN0YXRpYyBhc3luYyBkZWxldGVWaWRlbyh2aWRlb0lkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHJlc2lsaWVudERiT3BlcmF0aW9uKFxuICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgLmZyb20oVEFCTEVTLlVTRVJfVklERU9TKVxuICAgICAgICAgIC51cGRhdGUoeyBzdGF0dXM6ICdkZWxldGVkJyB9KVxuICAgICAgICAgIC5lcSgnaWQnLCB2aWRlb0lkKVxuICAgICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBFcnJvclJlcG9ydGVyLmdldEluc3RhbmNlKCkucmVwb3J0RXJyb3IoZXJyb3IsICdVc2VyVmlkZW9zREIuZGVsZXRlVmlkZW8nKVxuICAgICAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpXG4gICAgICAgIH1cblxuICAgICAgfSxcbiAgICAgIGBEZWxldGUgdmlkZW8gKCR7dmlkZW9JZH0pYFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdXNlcidzIHN0b3JhZ2UgcXVvdGEgaW5mb3JtYXRpb25cbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXRVc2VyUXVvdGEodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJRdW90YUluZm8+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICAgIGNvbnN0IGNhY2hlZCA9IHRoaXMucXVvdGFDYWNoZS5nZXQodXNlcklkKVxuICAgICAgaWYgKGNhY2hlZCAmJiBEYXRlLm5vdygpIC0gY2FjaGVkLnRpbWVzdGFtcCA8IHRoaXMuUVVPVEFfQ0FDSEVfVFRMKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQuZGF0YVxuICAgICAgfVxuXG4gICAgICAvLyDlsJ3or5XosIPnlKjmlbDmja7lupPlh73mlbBcbiAgICAgIGNvbnN0IHsgZGF0YTogcXVvdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5ycGMoJ2dldF91c2VyX3F1b3RhJywgeyB1c2VyX3V1aWQ6IHVzZXJJZCB9KVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgY29uc3QgZGVmYXVsdFF1b3RhOiBVc2VyUXVvdGFJbmZvID0ge1xuICAgICAgICBjdXJyZW50X3ZpZGVvczogMCxcbiAgICAgICAgbWF4X3ZpZGVvczogNTAsXG4gICAgICAgIGN1cnJlbnRfc2l6ZV9ieXRlczogMCxcbiAgICAgICAgbWF4X3NpemVfYnl0ZXM6IDEwNDg1NzYwMCwgLy8gMTAwTUJcbiAgICAgICAgY3VycmVudF9zaXplX21iOiAwLFxuICAgICAgICBtYXhfc2l6ZV9tYjogMTAwLFxuICAgICAgICB2aWRlb3NfcGVyY2VudGFnZTogMCxcbiAgICAgICAgc3RvcmFnZV9wZXJjZW50YWdlOiAwLFxuICAgICAgICBjYW5fdXBsb2FkOiB0cnVlLFxuICAgICAgICBpc19zdWJzY3JpYmVkOiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgLy8gRG9uJ3QgbG9nIHdhcm5pbmdzIGZvciBjb21tb24gNDAxLzQwMyBlcnJvcnMgdG8gcHJldmVudCBzcGFtXG4gICAgICAgIGlmICghZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnNDAxJykgJiYgIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1VuYXV0aG9yaXplZCcpICYmICFlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCc0MDMnKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRGF0YWJhc2UgcXVvdGEgZnVuY3Rpb24gbm90IGF2YWlsYWJsZSwgdXNpbmcgZmFsbGJhY2s6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgICAgfVxuICAgICAgICAvLyBDYWNoZSB0aGUgZGVmYXVsdCBxdW90YSB0byBwcmV2ZW50IHJlcGVhdGVkIGNhbGxzXG4gICAgICAgIHRoaXMucXVvdGFDYWNoZS5zZXQodXNlcklkLCB7IGRhdGE6IGRlZmF1bHRRdW90YSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pXG4gICAgICAgIHJldHVybiBkZWZhdWx0UXVvdGFcbiAgICAgIH1cblxuICAgICAgY29uc3QgcXVvdGFEYXRhID0gcXVvdGEgYXMgVXNlclF1b3RhSW5mb1xuICAgICAgLy8gQ2FjaGUgdGhlIHN1Y2Nlc3NmdWwgcmVzdWx0XG4gICAgICB0aGlzLnF1b3RhQ2FjaGUuc2V0KHVzZXJJZCwgeyBkYXRhOiBxdW90YURhdGEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KVxuICAgICAgcmV0dXJuIHF1b3RhRGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBkZWZhdWx0UXVvdGE6IFVzZXJRdW90YUluZm8gPSB7XG4gICAgICAgIGN1cnJlbnRfdmlkZW9zOiAwLFxuICAgICAgICBtYXhfdmlkZW9zOiA1MCxcbiAgICAgICAgY3VycmVudF9zaXplX2J5dGVzOiAwLFxuICAgICAgICBtYXhfc2l6ZV9ieXRlczogMTA0ODU3NjAwLCAvLyAxMDBNQlxuICAgICAgICBjdXJyZW50X3NpemVfbWI6IDAsXG4gICAgICAgIG1heF9zaXplX21iOiAxMDAsXG4gICAgICAgIHZpZGVvc19wZXJjZW50YWdlOiAwLFxuICAgICAgICBzdG9yYWdlX3BlcmNlbnRhZ2U6IDAsXG4gICAgICAgIGNhbl91cGxvYWQ6IHRydWUsXG4gICAgICAgIGlzX3N1YnNjcmliZWQ6IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIERvbid0IGxvZyBlcnJvcnMgZm9yIGNvbW1vbiBhdXRoIGZhaWx1cmVzIHRvIHByZXZlbnQgc3BhbVxuICAgICAgaWYgKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgJ21lc3NhZ2UnIGluIGVycm9yKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlcnJvciBhcyBhbnkpLm1lc3NhZ2VcbiAgICAgICAgaWYgKCFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMScpICYmICFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ1VuYXV0aG9yaXplZCcpICYmICFlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJzQwMycpKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdnZXRVc2VyUXVvdGEgZmFsbGJhY2sgbW9kZTonLCBlcnJvcilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDYWNoZSB0aGUgZGVmYXVsdCBxdW90YSB0byBwcmV2ZW50IHJlcGVhdGVkIGNhbGxzXG4gICAgICB0aGlzLnF1b3RhQ2FjaGUuc2V0KHVzZXJJZCwgeyBkYXRhOiBkZWZhdWx0UXVvdGEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KVxuICAgICAgcmV0dXJuIGRlZmF1bHRRdW90YVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYW51YWwgY2xlYW51cCBvZiB1c2VyIHN0b3JhZ2Ugc3BhY2VcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjbGVhbnVwVXNlclN0b3JhZ2UodXNlcklkOiBzdHJpbmcsIHRhcmdldFNpemVNQj86IG51bWJlcik6IFByb21pc2U8e1xuICAgIGRlbGV0ZWRWaWRlb3M6IG51bWJlclxuICAgIGZyZWVkU2l6ZU1COiBudW1iZXJcbiAgICByZW1haW5pbmdTaXplTUI6IG51bWJlclxuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOWwneivleiwg+eUqOaVsOaNruW6k+WHveaVsFxuICAgICAgY29uc3QgeyBkYXRhOiByZXN1bHQsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5ycGMoJ21hbnVhbF9jbGVhbnVwX3VzZXJfc3RvcmFnZScsIHtcbiAgICAgICAgICB1c2VyX3V1aWQ6IHVzZXJJZCxcbiAgICAgICAgICB0YXJnZXRfc2l6ZV9tYjogdGFyZ2V0U2l6ZU1CXG4gICAgICAgIH0pXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdEYXRhYmFzZSBjbGVhbnVwIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGJhc2ljIGZhbGxiYWNrOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIC8vIOWfuuehgOa4heeQhu+8muWIoOmZpOacgOaXp+eahOmdnuaUtuiXj+inhumikVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5iYXNpY0NsZWFudXBGYWxsYmFjayh1c2VySWQsIHRhcmdldFNpemVNQilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGVsZXRlZFZpZGVvczogcmVzdWx0LmRlbGV0ZWRfdmlkZW9zLFxuICAgICAgICBmcmVlZFNpemVNQjogcmVzdWx0LmZyZWVkX3NpemVfbWIsXG4gICAgICAgIHJlbWFpbmluZ1NpemVNQjogcmVzdWx0LnJlbWFpbmluZ19zaXplX21iXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignY2xlYW51cFVzZXJTdG9yYWdlIGZhbGxiYWNrIG1vZGU6JywgZXJyb3IpXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5iYXNpY0NsZWFudXBGYWxsYmFjayh1c2VySWQsIHRhcmdldFNpemVNQilcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQmFzaWMgY2xlYW51cCBmYWxsYmFjayB3aGVuIGRhdGFiYXNlIGZ1bmN0aW9ucyBhcmUgbm90IGF2YWlsYWJsZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgYmFzaWNDbGVhbnVwRmFsbGJhY2sodXNlcklkOiBzdHJpbmcsIHRhcmdldFNpemVNQj86IG51bWJlcik6IFByb21pc2U8e1xuICAgIGRlbGV0ZWRWaWRlb3M6IG51bWJlclxuICAgIGZyZWVkU2l6ZU1COiBudW1iZXJcbiAgICByZW1haW5pbmdTaXplTUI6IG51bWJlclxuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOiOt+WPlueUqOaIt+eahOaXp+inhumike+8iOmdnuaUtuiXj++8iVxuICAgICAgY29uc3QgeyBkYXRhOiB2aWRlb3MsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgLnNlbGVjdCgnaWQsIGZpbGVfc2l6ZScpXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcbiAgICAgICAgLmVxKCdzdGF0dXMnLCAnY29tcGxldGVkJylcbiAgICAgICAgLmVxKCdpc19mYXZvcml0ZScsIGZhbHNlKVxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAubGltaXQoNSkgLy8g5pyA5aSa5Yig6ZmkNeS4quinhumikVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYmFzaWMgY2xlYW51cDonLCBlcnJvcilcbiAgICAgICAgcmV0dXJuIHsgZGVsZXRlZFZpZGVvczogMCwgZnJlZWRTaXplTUI6IDAsIHJlbWFpbmluZ1NpemVNQjogMCB9XG4gICAgICB9XG5cbiAgICAgIGxldCBkZWxldGVkQ291bnQgPSAwXG4gICAgICBsZXQgZnJlZWRCeXRlcyA9IDBcblxuICAgICAgLy8g5Yig6Zmk5pyA5pen55qE5Yeg5Liq6KeG6aKRXG4gICAgICBmb3IgKGNvbnN0IHZpZGVvIG9mIHZpZGVvcyB8fCBbXSkge1xuICAgICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKFRBQkxFUy5VU0VSX1ZJREVPUylcbiAgICAgICAgICAudXBkYXRlKHsgc3RhdHVzOiAnZGVsZXRlZCcgfSlcbiAgICAgICAgICAuZXEoJ2lkJywgdmlkZW8uaWQpXG5cbiAgICAgICAgaWYgKCFkZWxldGVFcnJvcikge1xuICAgICAgICAgIGRlbGV0ZWRDb3VudCsrXG4gICAgICAgICAgZnJlZWRCeXRlcyArPSB2aWRlby5maWxlX3NpemUgfHwgMFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRlbGV0ZWRWaWRlb3M6IGRlbGV0ZWRDb3VudCxcbiAgICAgICAgZnJlZWRTaXplTUI6IE1hdGgucm91bmQoZnJlZWRCeXRlcyAvICgxMDI0ICogMTAyNCkgKiAxMDApIC8gMTAwLFxuICAgICAgICByZW1haW5pbmdTaXplTUI6IDAgLy8g5peg5rOV6K6h566X5YeG56Gu5YC8XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jhc2ljIGNsZWFudXAgZmFsbGJhY2sgZmFpbGVkOicsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgZGVsZXRlZFZpZGVvczogMCwgZnJlZWRTaXplTUI6IDAsIHJlbWFpbmluZ1NpemVNQjogMCB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHVzZXIgaGFzIGV4Y2VlZGVkIHN0b3JhZ2UgcXVvdGFcbiAgICovXG4gIHN0YXRpYyBhc3luYyBpc1N0b3JhZ2VFeGNlZWRlZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBxdW90YSA9IGF3YWl0IHRoaXMuZ2V0VXNlclF1b3RhKHVzZXJJZClcbiAgICAgIHJldHVybiBxdW90YS5zdG9yYWdlX3BlcmNlbnRhZ2UgPiAxMDBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdFcnJvciBjaGVja2luZyBzdG9yYWdlIHN0YXR1cywgYXNzdW1pbmcgd2l0aGluIGxpbWl0czonLCBlcnJvcilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB1c2VyIGNhbiB1cGxvYWQgYSBuZXcgdmlkZW9cbiAgICovXG4gIHN0YXRpYyBhc3luYyBjYW5Vc2VyVXBsb2FkKHVzZXJJZDogc3RyaW5nLCBlc3RpbWF0ZWRTaXplOiBudW1iZXIgPSAwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogY2FuVXBsb2FkLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAucnBjKCdjYW5fdXNlcl91cGxvYWRfdmlkZW8nLCB7XG4gICAgICAgICAgdXNlcl91dWlkOiB1c2VySWQsXG4gICAgICAgICAgZXN0aW1hdGVkX3NpemU6IGVzdGltYXRlZFNpemVcbiAgICAgICAgfSlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRGF0YWJhc2UgdXBsb2FkIGNoZWNrIGZ1bmN0aW9uIG5vdCBhdmFpbGFibGUsIHVzaW5nIGJhc2ljIGNoZWNrOicsIGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIC8vIOWfuuehgOajgOafpe+8muWBh+iuvueUqOaIt+WPr+S7peS4iuS8oO+8jOmZpOmdnuaWh+S7tui/h+Wkp1xuICAgICAgICBjb25zdCBtYXhGaWxlU2l6ZSA9IDEwMCAqIDEwMjQgKiAxMDI0IC8vIDEwME1CXG4gICAgICAgIHJldHVybiBlc3RpbWF0ZWRTaXplIDw9IG1heEZpbGVTaXplXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW5VcGxvYWRcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKCdDYW4gdXNlciB1cGxvYWQgZmFsbGJhY2sgbW9kZTonLCBlcnJvcilcbiAgICAgIC8vIOWfuuehgOajgOafpe+8muWBh+iuvueUqOaIt+WPr+S7peS4iuS8oO+8jOmZpOmdnuaWh+S7tui/h+Wkp1xuICAgICAgY29uc3QgbWF4RmlsZVNpemUgPSAxMDAgKiAxMDI0ICogMTAyNCAvLyAxMDBNQlxuICAgICAgcmV0dXJuIGVzdGltYXRlZFNpemUgPD0gbWF4RmlsZVNpemVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZpZGVvcyBieSBzdGF0dXMgZm9yIGFkbWluIHB1cnBvc2VzXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ2V0VmlkZW9zQnlTdGF0dXMoXG4gICAgc3RhdHVzOiBVc2VyVmlkZW9bJ3N0YXR1cyddLFxuICAgIGxpbWl0OiBudW1iZXIgPSAxMDBcbiAgKTogUHJvbWlzZTxVc2VyVmlkZW9bXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHZpZGVvcywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgLmZyb20oVEFCTEVTLlVTRVJfVklERU9TKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdzdGF0dXMnLCBzdGF0dXMpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXG4gICAgICAgIC5saW1pdChsaW1pdClcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdmlkZW9zIGJ5IHN0YXR1czonLCBlcnJvcilcbiAgICAgICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcilcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHZpZGVvcyBhcyBVc2VyVmlkZW9bXVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdHZXQgdmlkZW9zIGJ5IHN0YXR1cyBlcnJvcjonLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbInN1cGFiYXNlQWRtaW4iLCJUQUJMRVMiLCJoYW5kbGVTdXBhYmFzZUVycm9yIiwicmVzaWxpZW50RGJPcGVyYXRpb24iLCJFcnJvclJlcG9ydGVyIiwiVXNlclZpZGVvc0RCIiwicXVvdGFDYWNoZSIsIk1hcCIsIlFVT1RBX0NBQ0hFX1RUTCIsImNyZWF0ZVZpZGVvIiwidXNlcklkIiwiZGF0YSIsInVzZXJFbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJ3YXZlc3BlZWRSZXF1ZXN0SWQiLCJ2aWRlbyIsImVycm9yIiwiZnJvbSIsIlVTRVJfVklERU9TIiwiaW5zZXJ0IiwidXNlcl9pZCIsIndhdmVzcGVlZF9yZXF1ZXN0X2lkIiwicHJvbXB0Iiwic2V0dGluZ3MiLCJvcmlnaW5hbF91cmwiLCJvcmlnaW5hbFVybCIsInN0YXR1cyIsInNlbGVjdCIsInNpbmdsZSIsImlkIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImZvcmNlQ3JlYXRlVXNlckFuZFZpZGVvIiwiZ2V0SW5zdGFuY2UiLCJyZXBvcnRFcnJvciIsImVyciIsImV4aXN0aW5nVXNlciIsImNoZWNrRXJyb3IiLCJlcSIsIm1heWJlU2luZ2xlIiwidW5pcXVlRW1haWwiLCJ1c2VyRGF0YSIsImluc2VydEVycm9yIiwidXVpZCIsImVtYWlsIiwibmlja25hbWUiLCJzcGxpdCIsImF2YXRhcl91cmwiLCJzaWduaW5fdHlwZSIsInNpZ25pbl9wcm92aWRlciIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiZW1haWxfdmVyaWZpZWQiLCJpc19hY3RpdmUiLCJ3YXJuIiwicmV0cnlEYXRhIiwicmV0cnlFcnJvciIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImZpbmFsVXNlciIsImZpbmFsQ2hlY2tFcnJvciIsIkVycm9yIiwidmlkZW9FcnJvciIsInJldHJ5VmlkZW8iLCJub3ciLCJkb3dubG9hZF9wcm9ncmVzcyIsImVycm9yX21lc3NhZ2UiLCJzdG9yYWdlX3BhdGgiLCJ0aHVtYm5haWxfcGF0aCIsImZpbGVfc2l6ZSIsImR1cmF0aW9uX3NlY29uZHMiLCJ2aWV3X2NvdW50IiwiaXNfZmF2b3JpdGUiLCJsYXN0X3ZpZXdlZF9hdCIsInVwZGF0ZVZpZGVvU3RhdHVzIiwidmlkZW9JZCIsInVwZGF0ZXMiLCJzdGFydHNXaXRoIiwiZG93bmxvYWRQcm9ncmVzcyIsImVycm9yTWVzc2FnZSIsInN0b3JhZ2VQYXRoIiwidGh1bWJuYWlsUGF0aCIsImZpbGVTaXplIiwiZHVyYXRpb25TZWNvbmRzIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsInVwZGF0ZSIsImdldFZpZGVvQnlJZCIsInF1ZXJ5IiwiZ2V0VmlkZW9CeVdhdmVzcGVlZElkIiwiZ2V0VXNlclZpZGVvcyIsIm9wdGlvbnMiLCJwYWdlIiwibGltaXQiLCJvcmRlckJ5Iiwib3JkZXJEaXJlY3Rpb24iLCJzZWFyY2giLCJjb3VudCIsIm5lcSIsImxlbmd0aCIsImluIiwiaWxpa2UiLCJvcmRlciIsImFzY2VuZGluZyIsInRvIiwicmFuZ2UiLCJ2aWRlb3MiLCJ0b3RhbCIsImhhc01vcmUiLCJnZXRVc2VyVmlkZW9TdGF0cyIsInN0YXRzIiwiY29tcGxldGVkIiwiZmlsdGVyIiwidiIsInByb2Nlc3NpbmciLCJmYWlsZWQiLCJ0b3RhbFNpemUiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbFNpemVNQiIsIk1hdGgiLCJyb3VuZCIsInJlY29yZFZpZGVvVmlldyIsImZldGNoRXJyb3IiLCJjdXJyZW50Vmlld0NvdW50IiwidG9nZ2xlVmlkZW9GYXZvcml0ZSIsIm5ld0Zhdm9yaXRlU3RhdHVzIiwiZGVsZXRlVmlkZW8iLCJnZXRVc2VyUXVvdGEiLCJjYWNoZWQiLCJnZXQiLCJ0aW1lc3RhbXAiLCJxdW90YSIsInJwYyIsInVzZXJfdXVpZCIsImRlZmF1bHRRdW90YSIsImN1cnJlbnRfdmlkZW9zIiwibWF4X3ZpZGVvcyIsImN1cnJlbnRfc2l6ZV9ieXRlcyIsIm1heF9zaXplX2J5dGVzIiwiY3VycmVudF9zaXplX21iIiwibWF4X3NpemVfbWIiLCJ2aWRlb3NfcGVyY2VudGFnZSIsInN0b3JhZ2VfcGVyY2VudGFnZSIsImNhbl91cGxvYWQiLCJpc19zdWJzY3JpYmVkIiwic2V0IiwicXVvdGFEYXRhIiwiY2xlYW51cFVzZXJTdG9yYWdlIiwidGFyZ2V0U2l6ZU1CIiwicmVzdWx0IiwidGFyZ2V0X3NpemVfbWIiLCJiYXNpY0NsZWFudXBGYWxsYmFjayIsImRlbGV0ZWRWaWRlb3MiLCJkZWxldGVkX3ZpZGVvcyIsImZyZWVkU2l6ZU1CIiwiZnJlZWRfc2l6ZV9tYiIsInJlbWFpbmluZ1NpemVNQiIsInJlbWFpbmluZ19zaXplX21iIiwiZGVsZXRlZENvdW50IiwiZnJlZWRCeXRlcyIsImRlbGV0ZUVycm9yIiwiaXNTdG9yYWdlRXhjZWVkZWQiLCJjYW5Vc2VyVXBsb2FkIiwiZXN0aW1hdGVkU2l6ZSIsImNhblVwbG9hZCIsImVzdGltYXRlZF9zaXplIiwibWF4RmlsZVNpemUiLCJnZXRWaWRlb3NCeVN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database/user-videos.ts\n");

/***/ }),

/***/ "(rsc)/./lib/hash.ts":
/*!*********************!*\
  !*** ./lib/hash.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString),\n/* harmony export */   generateVerificationCode: () => (/* binding */ generateVerificationCode),\n/* harmony export */   getUserUuidFromEmail: () => (/* binding */ getUserUuidFromEmail),\n/* harmony export */   getUuid: () => (/* binding */ getUuid)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v5.js\");\n/**\n * Hash utilities for VidFab AI Video Platform\n */ \n// VidFab namespace UUID for deterministic UUID generation\nconst VIDFAB_NAMESPACE = \"6ba7b810-9dad-11d1-80b4-00c04fd430c8\";\n/**\n * Generate a unique UUID\n */ function getUuid() {\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n}\n/**\n * Generate a deterministic UUID based on user email\n * Same email will always generate the same UUID\n */ function getUserUuidFromEmail(email) {\n    if (!email || typeof email !== \"string\") {\n        throw new Error(\"Invalid email for UUID generation\");\n    }\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(email.toLowerCase().trim(), VIDFAB_NAMESPACE);\n}\n/**\n * Generate a random verification code\n */ function generateVerificationCode() {\n    return Math.floor(100000 + Math.random() * 900000).toString();\n}\n/**\n * Generate a random string\n */ function generateRandomString(length = 32) {\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let result = \"\";\n    for(let i = 0; i < length; i++){\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaGFzaC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUNpRDtBQUVsRCwwREFBMEQ7QUFDMUQsTUFBTUksbUJBQW1CO0FBRXpCOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxPQUFPSixnREFBTUE7QUFDZjtBQUVBOzs7Q0FHQyxHQUNNLFNBQVNLLHFCQUFxQkMsS0FBYTtJQUNoRCxJQUFJLENBQUNBLFNBQVMsT0FBT0EsVUFBVSxVQUFVO1FBQ3ZDLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUNBLE9BQU9MLGdEQUFNQSxDQUFDSSxNQUFNRSxXQUFXLEdBQUdDLElBQUksSUFBSU47QUFDNUM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNPO0lBQ2QsT0FBT0MsS0FBS0MsS0FBSyxDQUFDLFNBQVNELEtBQUtFLE1BQU0sS0FBSyxRQUFRQyxRQUFRO0FBQzdEO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxxQkFBcUJDLFNBQWlCLEVBQUU7SUFDdEQsTUFBTUMsUUFBUTtJQUNkLElBQUlDLFNBQVM7SUFDYixJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUgsUUFBUUcsSUFBSztRQUMvQkQsVUFBVUQsTUFBTUcsTUFBTSxDQUFDVCxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS0ksTUFBTUQsTUFBTTtJQUNoRTtJQUNBLE9BQU9FO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL2hhc2gudHM/YzE0MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhhc2ggdXRpbGl0aWVzIGZvciBWaWRGYWIgQUkgVmlkZW8gUGxhdGZvcm1cbiAqL1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0LCB2NSBhcyB1dWlkdjUgfSBmcm9tICd1dWlkJztcblxuLy8gVmlkRmFiIG5hbWVzcGFjZSBVVUlEIGZvciBkZXRlcm1pbmlzdGljIFVVSUQgZ2VuZXJhdGlvblxuY29uc3QgVklERkFCX05BTUVTUEFDRSA9ICc2YmE3YjgxMC05ZGFkLTExZDEtODBiNC0wMGMwNGZkNDMwYzgnO1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgdW5pcXVlIFVVSURcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFV1aWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuIHV1aWR2NCgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgZGV0ZXJtaW5pc3RpYyBVVUlEIGJhc2VkIG9uIHVzZXIgZW1haWxcbiAqIFNhbWUgZW1haWwgd2lsbCBhbHdheXMgZ2VuZXJhdGUgdGhlIHNhbWUgVVVJRFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlclV1aWRGcm9tRW1haWwoZW1haWw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghZW1haWwgfHwgdHlwZW9mIGVtYWlsICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbWFpbCBmb3IgVVVJRCBnZW5lcmF0aW9uJyk7XG4gIH1cbiAgcmV0dXJuIHV1aWR2NShlbWFpbC50b0xvd2VyQ2FzZSgpLnRyaW0oKSwgVklERkFCX05BTUVTUEFDRSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSByYW5kb20gdmVyaWZpY2F0aW9uIGNvZGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVmVyaWZpY2F0aW9uQ29kZSgpOiBzdHJpbmcge1xuICByZXR1cm4gTWF0aC5mbG9vcigxMDAwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMDAwKS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgcmFuZG9tIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TdHJpbmcobGVuZ3RoOiBudW1iZXIgPSAzMik6IHN0cmluZyB7XG4gIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcbiAgbGV0IHJlc3VsdCA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IGNoYXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFycy5sZW5ndGgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufSJdLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsInY1IiwidXVpZHY1IiwiVklERkFCX05BTUVTUEFDRSIsImdldFV1aWQiLCJnZXRVc2VyVXVpZEZyb21FbWFpbCIsImVtYWlsIiwiRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJnZW5lcmF0ZVZlcmlmaWNhdGlvbkNvZGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b1N0cmluZyIsImdlbmVyYXRlUmFuZG9tU3RyaW5nIiwibGVuZ3RoIiwiY2hhcnMiLCJyZXN1bHQiLCJpIiwiY2hhckF0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/hash.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ip.ts":
/*!*******************!*\
  !*** ./lib/ip.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientIp: () => (/* binding */ getClientIp),\n/* harmony export */   isValidIp: () => (/* binding */ isValidIp)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/**\n * IP address utilities for VidFab AI Video Platform\n */ \n/**\n * Get client IP address from request headers\n */ async function getClientIp() {\n    try {\n        const headersList = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.headers)();\n        // Try different header sources for IP\n        const xForwardedFor = headersList.get(\"x-forwarded-for\");\n        const xRealIp = headersList.get(\"x-real-ip\");\n        const cfConnectingIp = headersList.get(\"cf-connecting-ip\");\n        if (xForwardedFor) {\n            // x-forwarded-for can contain multiple IPs, get the first one\n            return xForwardedFor.split(\",\")[0].trim();\n        }\n        if (cfConnectingIp) {\n            return cfConnectingIp;\n        }\n        if (xRealIp) {\n            return xRealIp;\n        }\n        // Fallback\n        return \"127.0.0.1\";\n    } catch (error) {\n        console.error(\"Error getting client IP:\", error);\n        return \"127.0.0.1\";\n    }\n}\n/**\n * Validate IP address format\n */ function isValidIp(ip) {\n    const ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n    const ipv6Regex = /^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;\n    return ipv4Regex.test(ip) || ipv6Regex.test(ip);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaXAudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7O0NBRUMsR0FDc0M7QUFFdkM7O0NBRUMsR0FDTSxlQUFlQztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsY0FBYyxNQUFNRixxREFBT0E7UUFFakMsc0NBQXNDO1FBQ3RDLE1BQU1HLGdCQUFnQkQsWUFBWUUsR0FBRyxDQUFDO1FBQ3RDLE1BQU1DLFVBQVVILFlBQVlFLEdBQUcsQ0FBQztRQUNoQyxNQUFNRSxpQkFBaUJKLFlBQVlFLEdBQUcsQ0FBQztRQUV2QyxJQUFJRCxlQUFlO1lBQ2pCLDhEQUE4RDtZQUM5RCxPQUFPQSxjQUFjSSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsSUFBSTtRQUN6QztRQUVBLElBQUlGLGdCQUFnQjtZQUNsQixPQUFPQTtRQUNUO1FBRUEsSUFBSUQsU0FBUztZQUNYLE9BQU9BO1FBQ1Q7UUFFQSxXQUFXO1FBQ1gsT0FBTztJQUNULEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPO0lBQ1Q7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0UsVUFBVUMsRUFBVTtJQUNsQyxNQUFNQyxZQUFZO0lBQ2xCLE1BQU1DLFlBQVk7SUFDbEIsT0FBT0QsVUFBVUUsSUFBSSxDQUFDSCxPQUFPRSxVQUFVQyxJQUFJLENBQUNIO0FBQzlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9pcC50cz9lODgxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSVAgYWRkcmVzcyB1dGlsaXRpZXMgZm9yIFZpZEZhYiBBSSBWaWRlbyBQbGF0Zm9ybVxuICovXG5pbXBvcnQgeyBoZWFkZXJzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcblxuLyoqXG4gKiBHZXQgY2xpZW50IElQIGFkZHJlc3MgZnJvbSByZXF1ZXN0IGhlYWRlcnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudElwKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgaGVhZGVyc0xpc3QgPSBhd2FpdCBoZWFkZXJzKCk7XG4gICAgXG4gICAgLy8gVHJ5IGRpZmZlcmVudCBoZWFkZXIgc291cmNlcyBmb3IgSVBcbiAgICBjb25zdCB4Rm9yd2FyZGVkRm9yID0gaGVhZGVyc0xpc3QuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcbiAgICBjb25zdCB4UmVhbElwID0gaGVhZGVyc0xpc3QuZ2V0KCd4LXJlYWwtaXAnKTtcbiAgICBjb25zdCBjZkNvbm5lY3RpbmdJcCA9IGhlYWRlcnNMaXN0LmdldCgnY2YtY29ubmVjdGluZy1pcCcpO1xuICAgIFxuICAgIGlmICh4Rm9yd2FyZGVkRm9yKSB7XG4gICAgICAvLyB4LWZvcndhcmRlZC1mb3IgY2FuIGNvbnRhaW4gbXVsdGlwbGUgSVBzLCBnZXQgdGhlIGZpcnN0IG9uZVxuICAgICAgcmV0dXJuIHhGb3J3YXJkZWRGb3Iuc3BsaXQoJywnKVswXS50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChjZkNvbm5lY3RpbmdJcCkge1xuICAgICAgcmV0dXJuIGNmQ29ubmVjdGluZ0lwO1xuICAgIH1cbiAgICBcbiAgICBpZiAoeFJlYWxJcCkge1xuICAgICAgcmV0dXJuIHhSZWFsSXA7XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrXG4gICAgcmV0dXJuICcxMjcuMC4wLjEnO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgY2xpZW50IElQOicsIGVycm9yKTtcbiAgICByZXR1cm4gJzEyNy4wLjAuMSc7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBJUCBhZGRyZXNzIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZElwKGlwOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgaXB2NFJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPykkLztcbiAgY29uc3QgaXB2NlJlZ2V4ID0gL14oPzpbMC05YS1mQS1GXXsxLDR9Oil7N31bMC05YS1mQS1GXXsxLDR9JC87XG4gIHJldHVybiBpcHY0UmVnZXgudGVzdChpcCkgfHwgaXB2NlJlZ2V4LnRlc3QoaXApO1xufSJdLCJuYW1lcyI6WyJoZWFkZXJzIiwiZ2V0Q2xpZW50SXAiLCJoZWFkZXJzTGlzdCIsInhGb3J3YXJkZWRGb3IiLCJnZXQiLCJ4UmVhbElwIiwiY2ZDb25uZWN0aW5nSXAiLCJzcGxpdCIsInRyaW0iLCJlcnJvciIsImNvbnNvbGUiLCJpc1ZhbGlkSXAiLCJpcCIsImlwdjRSZWdleCIsImlwdjZSZWdleCIsInRlc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ip.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TABLES: () => (/* binding */ TABLES),\n/* harmony export */   handleSupabaseError: () => (/* binding */ handleSupabaseError),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\n * Supabase Client Configuration for VidFab AI Video Platform\n */ \n// Supabase configuration\nconst supabaseUrl = \"https://ycahbhhuzgixfrljtqmi.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljYWhiaGh1emdpeGZybGp0cW1pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2NzI2OTMsImV4cCI6MjA3MzI0ODY5M30.OFKNQCgBkUaxcV8WjMZWPr27d1Mcf6ox6-iHoSABZbc\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Missing Supabase environment variables\");\n}\n// Public client (for client-side operations)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true\n    }\n});\n// Admin client (for server-side operations with elevated permissions)\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey || supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n// Table names\nconst TABLES = {\n    USERS: \"users\",\n    VERIFICATION_CODES: \"verification_codes\",\n    VIDEO_JOBS: \"video_jobs\",\n    USER_VIDEOS: \"user_videos\",\n    USER_STORAGE_QUOTAS: \"user_storage_quotas\",\n    SUBSCRIPTIONS: \"subscriptions\",\n    PAYMENTS: \"payments\"\n};\n// Helper function to handle Supabase errors\nfunction handleSupabaseError(error) {\n    console.error(\"Supabase error:\", error);\n    if (error?.code === \"PGRST116\") {\n        throw new Error(\"No rows found\");\n    }\n    if (error?.code === \"23505\") {\n        throw new Error(\"Resource already exists\");\n    }\n    if (error?.message) {\n        throw new Error(error.message);\n    }\n    throw new Error(\"Database operation failed\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUNvRDtBQUVyRCx5QkFBeUI7QUFDekIsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLHFCQUFxQkwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUI7QUFFaEUsSUFBSSxDQUFDUCxlQUFlLENBQUNJLGlCQUFpQjtJQUNwQyxNQUFNLElBQUlJLE1BQU07QUFDbEI7QUFFQSw2Q0FBNkM7QUFDdEMsTUFBTUMsV0FBV1YsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFpQjtJQUNqRU0sTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtBQUNGLEdBQUc7QUFFSCxzRUFBc0U7QUFDL0QsTUFBTUMsZ0JBQWdCZCxtRUFBWUEsQ0FDdkNDLGFBQ0FNLHNCQUFzQkYsaUJBQ3RCO0lBQ0VNLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNBO0FBcUhGLGNBQWM7QUFDUCxNQUFNRSxTQUFTO0lBQ3BCQyxPQUFPO0lBQ1BDLG9CQUFvQjtJQUNwQkMsWUFBWTtJQUNaQyxhQUFhO0lBQ2JDLHFCQUFxQjtJQUNyQkMsZUFBZTtJQUNmQyxVQUFVO0FBQ1osRUFBVztBQUVYLDRDQUE0QztBQUNyQyxTQUFTQyxvQkFBb0JDLEtBQVU7SUFDNUNDLFFBQVFELEtBQUssQ0FBQyxtQkFBbUJBO0lBRWpDLElBQUlBLE9BQU9FLFNBQVMsWUFBWTtRQUM5QixNQUFNLElBQUlqQixNQUFNO0lBQ2xCO0lBRUEsSUFBSWUsT0FBT0UsU0FBUyxTQUFTO1FBQzNCLE1BQU0sSUFBSWpCLE1BQU07SUFDbEI7SUFFQSxJQUFJZSxPQUFPRyxTQUFTO1FBQ2xCLE1BQU0sSUFBSWxCLE1BQU1lLE1BQU1HLE9BQU87SUFDL0I7SUFFQSxNQUFNLElBQUlsQixNQUFNO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwYWJhc2UgQ2xpZW50IENvbmZpZ3VyYXRpb24gZm9yIFZpZEZhYiBBSSBWaWRlbyBQbGF0Zm9ybVxuICovXG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBTdXBhYmFzZSBjb25maWd1cmF0aW9uXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCE7XG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSE7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZITtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbn1cblxuLy8gUHVibGljIGNsaWVudCAoZm9yIGNsaWVudC1zaWRlIG9wZXJhdGlvbnMpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICBwZXJzaXN0U2Vzc2lvbjogdHJ1ZSxcbiAgfSxcbn0pO1xuXG4vLyBBZG1pbiBjbGllbnQgKGZvciBzZXJ2ZXItc2lkZSBvcGVyYXRpb25zIHdpdGggZWxldmF0ZWQgcGVybWlzc2lvbnMpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcbiAgc3VwYWJhc2VVcmwsXG4gIHN1cGFiYXNlU2VydmljZUtleSB8fCBzdXBhYmFzZUFub25LZXksXG4gIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9XG4pO1xuXG4vLyBEYXRhYmFzZSB0YWJsZSB0eXBlcyAodGhlc2Ugc2hvdWxkIG1hdGNoIHlvdXIgU3VwYWJhc2Ugc2NoZW1hKVxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVVzZXIge1xuICB1dWlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5pY2tuYW1lOiBzdHJpbmc7XG4gIGF2YXRhcl91cmw/OiBzdHJpbmc7XG4gIHNpZ25pbl90eXBlOiAnb2F1dGgnIHwgJ2NyZWRlbnRpYWxzJztcbiAgc2lnbmluX3Byb3ZpZGVyOiBzdHJpbmc7XG4gIHNpZ25pbl9vcGVuaWQ/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgdXBkYXRlZF9hdD86IHN0cmluZztcbiAgc2lnbmluX2lwPzogc3RyaW5nO1xuICBlbWFpbF92ZXJpZmllZDogYm9vbGVhbjtcbiAgbGFzdF9sb2dpbj86IHN0cmluZztcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICAvLyBBSSBWaWRlbyBQbGF0Zm9ybSBzcGVjaWZpYyBmaWVsZHNcbiAgc3Vic2NyaXB0aW9uX3N0YXR1cz86ICdhY3RpdmUnIHwgJ2luYWN0aXZlJyB8ICdjYW5jZWxsZWQnIHwgJ3Bhc3RfZHVlJztcbiAgc3Vic2NyaXB0aW9uX3BsYW4/OiAnYmFzaWMnIHwgJ3BybycgfCAnZW50ZXJwcmlzZSc7XG4gIHN1YnNjcmlwdGlvbl9zdHJpcGVfaWQ/OiBzdHJpbmc7XG4gIGNyZWRpdHNfcmVtYWluaW5nPzogbnVtYmVyO1xuICB0b3RhbF92aWRlb3NfcHJvY2Vzc2VkPzogbnVtYmVyO1xuICBzdG9yYWdlX3VzZWRfbWI/OiBudW1iZXI7XG4gIG1heF9zdG9yYWdlX21iPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlVmVyaWZpY2F0aW9uQ29kZSB7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGNvZGU6IHN0cmluZztcbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIGF0dGVtcHRzOiBudW1iZXI7XG4gIGlzX3VzZWQ6IGJvb2xlYW47XG59XG5cbi8vIFZpZGVvIGdlbmVyYXRpb24gYW5kIHN0b3JhZ2UgdHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgVXNlclZpZGVvIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogc3RyaW5nO1xuXG4gIC8vIEdlbmVyYXRpb24gaW5mb3JtYXRpb25cbiAgd2F2ZXNwZWVkX3JlcXVlc3RfaWQ6IHN0cmluZztcbiAgcHJvbXB0OiBzdHJpbmc7XG4gIHNldHRpbmdzOiB7XG4gICAgbW9kZWw6IHN0cmluZztcbiAgICBkdXJhdGlvbjogc3RyaW5nO1xuICAgIHJlc29sdXRpb246IHN0cmluZztcbiAgICBhc3BlY3RSYXRpbzogc3RyaW5nO1xuICAgIHN0eWxlPzogc3RyaW5nO1xuICB9O1xuXG4gIC8vIEZpbGUgc3RvcmFnZSBpbmZvcm1hdGlvblxuICBvcmlnaW5hbF91cmw/OiBzdHJpbmc7XG4gIHN0b3JhZ2VfcGF0aD86IHN0cmluZztcbiAgdGh1bWJuYWlsX3BhdGg/OiBzdHJpbmc7XG5cbiAgLy8gRmlsZSBtZXRhZGF0YVxuICBmaWxlX3NpemU/OiBudW1iZXI7XG4gIGR1cmF0aW9uX3NlY29uZHM/OiBudW1iZXI7XG4gIHZpZGVvX3Jlc29sdXRpb24/OiBzdHJpbmc7XG4gIGFzcGVjdF9yYXRpbz86IHN0cmluZztcblxuICAvLyBTdGF0dXMgbWFuYWdlbWVudFxuICBzdGF0dXM6ICdnZW5lcmF0aW5nJyB8ICdkb3dubG9hZGluZycgfCAncHJvY2Vzc2luZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnIHwgJ2RlbGV0ZWQnO1xuICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICBkb3dubG9hZF9wcm9ncmVzczogbnVtYmVyO1xuXG4gIC8vIFVzZXIgaW50ZXJhY3Rpb25cbiAgaXNfZmF2b3JpdGU6IGJvb2xlYW47XG4gIHZpZXdfY291bnQ6IG51bWJlcjtcbiAgbGFzdF92aWV3ZWRfYXQ/OiBzdHJpbmc7XG5cbiAgLy8gVGltZXN0YW1wc1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyU3RvcmFnZVF1b3RhIHtcbiAgdXNlcl9pZDogc3RyaW5nO1xuICB0b3RhbF92aWRlb3M6IG51bWJlcjtcbiAgdG90YWxfc2l6ZV9ieXRlczogbnVtYmVyO1xuICBtYXhfdmlkZW9zOiBudW1iZXI7XG4gIG1heF9zaXplX2J5dGVzOiBudW1iZXI7XG4gIHBsYW5fdHlwZTogJ2ZyZWUnIHwgJ3BybycgfCAnZW50ZXJwcmlzZSc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyUXVvdGFJbmZvIHtcbiAgY3VycmVudF92aWRlb3M6IG51bWJlcjtcbiAgbWF4X3ZpZGVvczogbnVtYmVyO1xuICBjdXJyZW50X3NpemVfYnl0ZXM6IG51bWJlcjtcbiAgbWF4X3NpemVfYnl0ZXM6IG51bWJlcjtcbiAgY3VycmVudF9zaXplX21iOiBudW1iZXI7XG4gIG1heF9zaXplX21iOiBudW1iZXI7XG4gIHZpZGVvc19wZXJjZW50YWdlOiBudW1iZXI7XG4gIHN0b3JhZ2VfcGVyY2VudGFnZTogbnVtYmVyO1xuICBjYW5fdXBsb2FkOiBib29sZWFuO1xuICBpc19zdWJzY3JpYmVkOiBib29sZWFuO1xufVxuXG4vLyBMZWdhY3kgaW50ZXJmYWNlIChrZWVwaW5nIGZvciBjb21wYXRpYmlsaXR5KVxuZXhwb3J0IGludGVyZmFjZSBEYXRhYmFzZVZpZGVvSm9iIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl91dWlkOiBzdHJpbmc7XG4gIGpvYl90eXBlOiAnZ2VuZXJhdGUnIHwgJ2VuaGFuY2UnIHwgJ2NvbnZlcnQnO1xuICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2ZhaWxlZCc7XG4gIGlucHV0X2RhdGE6IGFueTsgLy8gSlNPTlxuICBvdXRwdXRfZGF0YT86IGFueTsgLy8gSlNPTlxuICBlcnJvcl9tZXNzYWdlPzogc3RyaW5nO1xuICBjcmVkaXRzX3VzZWQ6IG51bWJlcjtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG4gIGNvbXBsZXRlZF9hdD86IHN0cmluZztcbn1cblxuLy8gVGFibGUgbmFtZXNcbmV4cG9ydCBjb25zdCBUQUJMRVMgPSB7XG4gIFVTRVJTOiAndXNlcnMnLFxuICBWRVJJRklDQVRJT05fQ09ERVM6ICd2ZXJpZmljYXRpb25fY29kZXMnLFxuICBWSURFT19KT0JTOiAndmlkZW9fam9icycsIC8vIExlZ2FjeSB0YWJsZVxuICBVU0VSX1ZJREVPUzogJ3VzZXJfdmlkZW9zJywgLy8gTmV3IHZpZGVvIHN0b3JhZ2UgdGFibGVcbiAgVVNFUl9TVE9SQUdFX1FVT1RBUzogJ3VzZXJfc3RvcmFnZV9xdW90YXMnLFxuICBTVUJTQ1JJUFRJT05TOiAnc3Vic2NyaXB0aW9ucycsXG4gIFBBWU1FTlRTOiAncGF5bWVudHMnLFxufSBhcyBjb25zdDtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBTdXBhYmFzZSBlcnJvcnNcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yOiBhbnkpOiBuZXZlciB7XG4gIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcbiAgXG4gIGlmIChlcnJvcj8uY29kZSA9PT0gJ1BHUlNUMTE2Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gcm93cyBmb3VuZCcpO1xuICB9XG4gIFxuICBpZiAoZXJyb3I/LmNvZGUgPT09ICcyMzUwNScpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlIGFscmVhZHkgZXhpc3RzJyk7XG4gIH1cbiAgXG4gIGlmIChlcnJvcj8ubWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgfVxuICBcbiAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyk7XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwic3VwYWJhc2VBZG1pbiIsIlRBQkxFUyIsIlVTRVJTIiwiVkVSSUZJQ0FUSU9OX0NPREVTIiwiVklERU9fSk9CUyIsIlVTRVJfVklERU9TIiwiVVNFUl9TVE9SQUdFX1FVT1RBUyIsIlNVQlNDUklQVElPTlMiLCJQQVlNRU5UUyIsImhhbmRsZVN1cGFiYXNlRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJjb2RlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/time.ts":
/*!*********************!*\
  !*** ./lib/time.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatTimestamp: () => (/* binding */ formatTimestamp),\n/* harmony export */   getIsoTimestr: () => (/* binding */ getIsoTimestr),\n/* harmony export */   getTimeAfterMinutes: () => (/* binding */ getTimeAfterMinutes),\n/* harmony export */   isExpired: () => (/* binding */ isExpired)\n/* harmony export */ });\n/**\n * Time utilities for VidFab AI Video Platform\n */ /**\n * Get current ISO timestamp string\n */ function getIsoTimestr() {\n    return new Date().toISOString();\n}\n/**\n * Get timestamp for X minutes from now\n */ function getTimeAfterMinutes(minutes) {\n    const date = new Date();\n    date.setMinutes(date.getMinutes() + minutes);\n    return date.toISOString();\n}\n/**\n * Check if a timestamp is expired\n */ function isExpired(timestamp) {\n    return new Date() > new Date(timestamp);\n}\n/**\n * Format timestamp for display\n */ function formatTimestamp(timestamp) {\n    return new Date(timestamp).toLocaleString();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvdGltZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0NBRUMsR0FFRDs7Q0FFQyxHQUNNLFNBQVNBO0lBQ2QsT0FBTyxJQUFJQyxPQUFPQyxXQUFXO0FBQy9CO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxvQkFBb0JDLE9BQWU7SUFDakQsTUFBTUMsT0FBTyxJQUFJSjtJQUNqQkksS0FBS0MsVUFBVSxDQUFDRCxLQUFLRSxVQUFVLEtBQUtIO0lBQ3BDLE9BQU9DLEtBQUtILFdBQVc7QUFDekI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNNLFVBQVVDLFNBQWlCO0lBQ3pDLE9BQU8sSUFBSVIsU0FBUyxJQUFJQSxLQUFLUTtBQUMvQjtBQUVBOztDQUVDLEdBQ00sU0FBU0MsZ0JBQWdCRCxTQUFpQjtJQUMvQyxPQUFPLElBQUlSLEtBQUtRLFdBQVdFLGNBQWM7QUFDM0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS12MC1wcm9qZWN0Ly4vbGliL3RpbWUudHM/NjhlOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRpbWUgdXRpbGl0aWVzIGZvciBWaWRGYWIgQUkgVmlkZW8gUGxhdGZvcm1cbiAqL1xuXG4vKipcbiAqIEdldCBjdXJyZW50IElTTyB0aW1lc3RhbXAgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJc29UaW1lc3RyKCk6IHN0cmluZyB7XG4gIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG59XG5cbi8qKlxuICogR2V0IHRpbWVzdGFtcCBmb3IgWCBtaW51dGVzIGZyb20gbm93XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaW1lQWZ0ZXJNaW51dGVzKG1pbnV0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBkYXRlLnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBtaW51dGVzKTtcbiAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHRpbWVzdGFtcCBpcyBleHBpcmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGlyZWQodGltZXN0YW1wOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkgPiBuZXcgRGF0ZSh0aW1lc3RhbXApO1xufVxuXG4vKipcbiAqIEZvcm1hdCB0aW1lc3RhbXAgZm9yIGRpc3BsYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWVzdGFtcCh0aW1lc3RhbXA6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXApLnRvTG9jYWxlU3RyaW5nKCk7XG59Il0sIm5hbWVzIjpbImdldElzb1RpbWVzdHIiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRUaW1lQWZ0ZXJNaW51dGVzIiwibWludXRlcyIsImRhdGUiLCJzZXRNaW51dGVzIiwiZ2V0TWludXRlcyIsImlzRXhwaXJlZCIsInRpbWVzdGFtcCIsImZvcm1hdFRpbWVzdGFtcCIsInRvTG9jYWxlU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/time.ts\n");

/***/ }),

/***/ "(rsc)/./lib/utils/error-handling.ts":
/*!*************************************!*\
  !*** ./lib/utils/error-handling.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CircuitBreaker: () => (/* binding */ CircuitBreaker),\n/* harmony export */   ErrorReporter: () => (/* binding */ ErrorReporter),\n/* harmony export */   NonRetryableError: () => (/* binding */ NonRetryableError),\n/* harmony export */   RetryableError: () => (/* binding */ RetryableError),\n/* harmony export */   classifyError: () => (/* binding */ classifyError),\n/* harmony export */   resilientDbOperation: () => (/* binding */ resilientDbOperation),\n/* harmony export */   resilientFetch: () => (/* binding */ resilientFetch),\n/* harmony export */   resilientStorageOperation: () => (/* binding */ resilientStorageOperation),\n/* harmony export */   retryWithBackoff: () => (/* binding */ retryWithBackoff),\n/* harmony export */   withFallback: () => (/* binding */ withFallback)\n/* harmony export */ });\n/**\n * Enhanced Error Handling and Retry Mechanisms\n * VidFab AI Video Platform\n */ class RetryableError extends Error {\n    constructor(message, originalError){\n        super(message);\n        this.originalError = originalError;\n        this.name = \"RetryableError\";\n    }\n}\nclass NonRetryableError extends Error {\n    constructor(message, originalError){\n        super(message);\n        this.originalError = originalError;\n        this.name = \"NonRetryableError\";\n    }\n}\n/**\n * Enhanced retry utility with exponential backoff and jitter\n */ async function retryWithBackoff(operation, options = {}) {\n    const config = {\n        maxAttempts: 3,\n        baseDelayMs: 1000,\n        maxDelayMs: 30000,\n        backoffMultiplier: 2,\n        jitterMs: 100,\n        retryCondition: (error)=>!(error instanceof NonRetryableError),\n        ...options\n    };\n    let lastError;\n    for(let attempt = 1; attempt <= config.maxAttempts; attempt++){\n        try {\n            const result = await operation();\n            return result;\n        } catch (error) {\n            lastError = error;\n            // Don't retry on the last attempt or if error is not retryable\n            if (attempt === config.maxAttempts || !config.retryCondition(error)) {\n                break;\n            }\n            // Calculate delay with exponential backoff and jitter\n            const exponentialDelay = Math.min(config.baseDelayMs * Math.pow(config.backoffMultiplier, attempt - 1), config.maxDelayMs);\n            const jitter = Math.random() * config.jitterMs;\n            const totalDelay = exponentialDelay + jitter;\n            console.warn(`Operation failed (attempt ${attempt}/${config.maxAttempts}), retrying in ${Math.round(totalDelay)}ms:`, error);\n            config.onRetry?.(attempt, error);\n            await new Promise((resolve)=>setTimeout(resolve, totalDelay));\n        }\n    }\n    throw lastError;\n}\n/**\n * Circuit breaker implementation\n */ class CircuitBreaker {\n    constructor(options){\n        this.options = options;\n        this.state = \"CLOSED\";\n        this.failureCount = 0;\n        this.lastFailureTime = 0;\n        this.nextAttemptTime = 0;\n    }\n    async execute(operation) {\n        if (this.state === \"OPEN\") {\n            if (Date.now() < this.nextAttemptTime) {\n                throw new NonRetryableError(\"Circuit breaker is OPEN\");\n            }\n            this.state = \"HALF_OPEN\";\n        }\n        try {\n            const result = await Promise.race([\n                operation(),\n                new Promise((_, reject)=>setTimeout(()=>reject(new Error(\"Circuit breaker timeout\")), this.options.timeoutMs))\n            ]);\n            this.onSuccess();\n            return result;\n        } catch (error) {\n            this.onFailure();\n            throw error;\n        }\n    }\n    onSuccess() {\n        this.failureCount = 0;\n        this.state = \"CLOSED\";\n    }\n    onFailure() {\n        this.failureCount++;\n        this.lastFailureTime = Date.now();\n        if (this.failureCount >= this.options.failureThreshold) {\n            this.state = \"OPEN\";\n            this.nextAttemptTime = Date.now() + this.options.recoverAfterMs;\n        }\n    }\n    getState() {\n        return {\n            state: this.state,\n            failureCount: this.failureCount,\n            nextAttemptTime: this.nextAttemptTime\n        };\n    }\n}\n/**\n * HTTP request with retry and circuit breaker\n */ async function resilientFetch(url, options = {}, retryOptions = {}) {\n    return retryWithBackoff(async ()=>{\n        const response = await fetch(url, {\n            ...options,\n            signal: AbortSignal.timeout(30000)\n        });\n        // Check if response indicates a retryable error\n        if (response.status >= 500 || response.status === 429) {\n            throw new RetryableError(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        if (!response.ok) {\n            throw new NonRetryableError(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        return response;\n    }, {\n        maxAttempts: 3,\n        baseDelayMs: 1000,\n        retryCondition: (error)=>error instanceof RetryableError || error.name === \"TypeError\" || // Network errors\n            error.name === \"TimeoutError\",\n        onRetry: (attempt, error)=>{\n            console.warn(`Fetch retry ${attempt} for ${url}:`, error.message);\n        },\n        ...retryOptions\n    });\n}\n/**\n * Database operation wrapper with retry logic\n */ async function resilientDbOperation(operation, operationName = \"Database operation\") {\n    return retryWithBackoff(operation, {\n        maxAttempts: 3,\n        baseDelayMs: 500,\n        maxDelayMs: 5000,\n        retryCondition: (error)=>{\n            // Retry on connection issues, timeouts, and temporary failures\n            const retryableErrors = [\n                \"PGRST301\",\n                \"PGRST302\",\n                \"08001\",\n                \"08006\",\n                \"53300\",\n                \"40001\"\n            ];\n            return retryableErrors.some((code)=>error?.code === code || error?.message?.includes(code) || error?.message?.includes(\"connection\") || error?.message?.includes(\"timeout\"));\n        },\n        onRetry: (attempt, error)=>{\n            console.warn(`${operationName} retry ${attempt}:`, error.message);\n        }\n    });\n}\n/**\n * Storage operation wrapper with retry logic\n */ async function resilientStorageOperation(operation, operationName = \"Storage operation\") {\n    return retryWithBackoff(operation, {\n        maxAttempts: 5,\n        baseDelayMs: 2000,\n        maxDelayMs: 30000,\n        retryCondition: (error)=>{\n            // Retry on network errors, rate limits, and temporary storage issues\n            return error?.name === \"TypeError\" || // Network errors\n            error?.status === 429 || // Rate limited\n            error?.status === 500 || // Server errors\n            error?.status === 502 || // Bad gateway\n            error?.status === 503 || // Service unavailable\n            error?.status === 504 || // Gateway timeout\n            error?.message?.includes(\"network\") || error?.message?.includes(\"timeout\") || error?.message?.includes(\"connection\");\n        },\n        onRetry: (attempt, error)=>{\n            console.warn(`${operationName} retry ${attempt}:`, error.message);\n        }\n    });\n}\n/**\n * Error classification utility\n */ function classifyError(error) {\n    // Network errors\n    if (error?.name === \"TypeError\" || error?.message?.includes(\"fetch\")) {\n        return {\n            type: \"network\",\n            isRetryable: true,\n            userMessage: \"Network connection error. Please check your internet connection and try again.\"\n        };\n    }\n    // Authentication errors\n    if (error?.status === 401 || error?.message?.includes(\"unauthorized\")) {\n        return {\n            type: \"auth\",\n            isRetryable: false,\n            userMessage: \"Authentication failed. Please log in again.\"\n        };\n    }\n    // Validation errors\n    if (error?.status === 400 || error?.status === 422) {\n        return {\n            type: \"validation\",\n            isRetryable: false,\n            userMessage: \"Invalid request. Please check your input and try again.\"\n        };\n    }\n    // Server errors\n    if (error?.status >= 500) {\n        return {\n            type: \"server\",\n            isRetryable: true,\n            userMessage: \"Server error. We're working to fix this. Please try again later.\"\n        };\n    }\n    // Storage errors\n    if (error?.message?.includes(\"storage\") || error?.message?.includes(\"upload\")) {\n        return {\n            type: \"storage\",\n            isRetryable: true,\n            userMessage: \"Storage operation failed. Please try again.\"\n        };\n    }\n    return {\n        type: \"unknown\",\n        isRetryable: true,\n        userMessage: \"An unexpected error occurred. Please try again.\"\n    };\n}\n/**\n * Global error handler for consistent error reporting\n */ class ErrorReporter {\n    static getInstance() {\n        if (!ErrorReporter.instance) {\n            ErrorReporter.instance = new ErrorReporter();\n        }\n        return ErrorReporter.instance;\n    }\n    reportError(error, context = \"Unknown\") {\n        const errorEntry = {\n            error,\n            context,\n            timestamp: Date.now()\n        };\n        this.errorQueue.push(errorEntry);\n        // Keep only recent errors (last 100)\n        if (this.errorQueue.length > 100) {\n            this.errorQueue = this.errorQueue.slice(-100);\n        }\n        // Log error\n        console.error(`[${context}]`, error);\n        // In production, you might want to send to an error tracking service\n        if (false) {}\n    }\n    async sendToErrorTracking(errorEntry) {\n    // Implementation for error tracking service (Sentry, etc.)\n    // This is a placeholder\n    }\n    getRecentErrors(limit = 10) {\n        return this.errorQueue.slice(-limit);\n    }\n    clearErrors() {\n        this.errorQueue = [];\n    }\n    constructor(){\n        this.errorQueue = [];\n    }\n}\n/**\n * Graceful degradation utility\n */ async function withFallback(primaryOperation, fallbackOperation, fallbackCondition = ()=>true) {\n    try {\n        return await primaryOperation();\n    } catch (error) {\n        if (fallbackCondition(error)) {\n            console.warn(\"Primary operation failed, using fallback:\", error.message);\n            return await fallbackOperation();\n        }\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OztBQTRDcEY7QUFFQTs7Q0FFQyxHQUNNLGVBQWVTLGFBQ3BCQyxnQkFBa0MsRUFDbENDLGlCQUFtQyxFQUNuQ0Msb0JBQTZDLElBQU0sSUFBSTtJQUV2RCxJQUFJO1FBQ0YsT0FBTyxNQUFNRjtJQUNmLEVBQUUsT0FBTzFFLE9BQU87UUFDZCxJQUFJNEUsa0JBQWtCNUUsUUFBUTtZQUM1QlcsUUFBUUMsSUFBSSxDQUFDLDZDQUE2Q1osTUFBTWQsT0FBTztZQUN2RSxPQUFPLE1BQU15RjtRQUNmO1FBQ0EsTUFBTTNFO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvdXRpbHMvZXJyb3ItaGFuZGxpbmcudHM/MjExNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIEVycm9yIEhhbmRsaW5nIGFuZCBSZXRyeSBNZWNoYW5pc21zXG4gKiBWaWRGYWIgQUkgVmlkZW8gUGxhdGZvcm1cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIFJldHJ5T3B0aW9ucyB7XG4gIG1heEF0dGVtcHRzOiBudW1iZXJcbiAgYmFzZURlbGF5TXM6IG51bWJlclxuICBtYXhEZWxheU1zOiBudW1iZXJcbiAgYmFja29mZk11bHRpcGxpZXI6IG51bWJlclxuICBqaXR0ZXJNczogbnVtYmVyXG4gIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3I6IGFueSkgPT4gYm9vbGVhblxuICBvblJldHJ5PzogKGF0dGVtcHQ6IG51bWJlciwgZXJyb3I6IGFueSkgPT4gdm9pZFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcmN1aXRCcmVha2VyT3B0aW9ucyB7XG4gIGZhaWx1cmVUaHJlc2hvbGQ6IG51bWJlclxuICB0aW1lb3V0TXM6IG51bWJlclxuICBtb25pdG9yaW5nUGVyaW9kTXM6IG51bWJlclxuICByZWNvdmVyQWZ0ZXJNczogbnVtYmVyXG59XG5cbmV4cG9ydCBjbGFzcyBSZXRyeWFibGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBwdWJsaWMgb3JpZ2luYWxFcnJvcj86IGFueSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgdGhpcy5uYW1lID0gJ1JldHJ5YWJsZUVycm9yJ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBOb25SZXRyeWFibGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBwdWJsaWMgb3JpZ2luYWxFcnJvcj86IGFueSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpXG4gICAgdGhpcy5uYW1lID0gJ05vblJldHJ5YWJsZUVycm9yJ1xuICB9XG59XG5cbi8qKlxuICogRW5oYW5jZWQgcmV0cnkgdXRpbGl0eSB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmYgYW5kIGppdHRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnlXaXRoQmFja29mZjxUPihcbiAgb3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LFxuICBvcHRpb25zOiBQYXJ0aWFsPFJldHJ5T3B0aW9ucz4gPSB7fVxuKTogUHJvbWlzZTxUPiB7XG4gIGNvbnN0IGNvbmZpZzogUmV0cnlPcHRpb25zID0ge1xuICAgIG1heEF0dGVtcHRzOiAzLFxuICAgIGJhc2VEZWxheU1zOiAxMDAwLFxuICAgIG1heERlbGF5TXM6IDMwMDAwLFxuICAgIGJhY2tvZmZNdWx0aXBsaWVyOiAyLFxuICAgIGppdHRlck1zOiAxMDAsXG4gICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT4gIShlcnJvciBpbnN0YW5jZW9mIE5vblJldHJ5YWJsZUVycm9yKSxcbiAgICAuLi5vcHRpb25zXG4gIH1cblxuICBsZXQgbGFzdEVycm9yOiBhbnlcblxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBjb25maWcubWF4QXR0ZW1wdHM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVyYXRpb24oKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvclxuXG4gICAgICAvLyBEb24ndCByZXRyeSBvbiB0aGUgbGFzdCBhdHRlbXB0IG9yIGlmIGVycm9yIGlzIG5vdCByZXRyeWFibGVcbiAgICAgIGlmIChhdHRlbXB0ID09PSBjb25maWcubWF4QXR0ZW1wdHMgfHwgIWNvbmZpZy5yZXRyeUNvbmRpdGlvbihlcnJvcikpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIGRlbGF5IHdpdGggZXhwb25lbnRpYWwgYmFja29mZiBhbmQgaml0dGVyXG4gICAgICBjb25zdCBleHBvbmVudGlhbERlbGF5ID0gTWF0aC5taW4oXG4gICAgICAgIGNvbmZpZy5iYXNlRGVsYXlNcyAqIE1hdGgucG93KGNvbmZpZy5iYWNrb2ZmTXVsdGlwbGllciwgYXR0ZW1wdCAtIDEpLFxuICAgICAgICBjb25maWcubWF4RGVsYXlNc1xuICAgICAgKVxuICAgICAgY29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAqIGNvbmZpZy5qaXR0ZXJNc1xuICAgICAgY29uc3QgdG90YWxEZWxheSA9IGV4cG9uZW50aWFsRGVsYXkgKyBqaXR0ZXJcblxuICAgICAgY29uc29sZS53YXJuKGBPcGVyYXRpb24gZmFpbGVkIChhdHRlbXB0ICR7YXR0ZW1wdH0vJHtjb25maWcubWF4QXR0ZW1wdHN9KSwgcmV0cnlpbmcgaW4gJHtNYXRoLnJvdW5kKHRvdGFsRGVsYXkpfW1zOmAsIGVycm9yKVxuXG4gICAgICBjb25maWcub25SZXRyeT8uKGF0dGVtcHQsIGVycm9yKVxuXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdG90YWxEZWxheSkpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbGFzdEVycm9yXG59XG5cbi8qKlxuICogQ2lyY3VpdCBicmVha2VyIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaXJjdWl0QnJlYWtlciB7XG4gIHByaXZhdGUgc3RhdGU6ICdDTE9TRUQnIHwgJ09QRU4nIHwgJ0hBTEZfT1BFTicgPSAnQ0xPU0VEJ1xuICBwcml2YXRlIGZhaWx1cmVDb3VudCA9IDBcbiAgcHJpdmF0ZSBsYXN0RmFpbHVyZVRpbWUgPSAwXG4gIHByaXZhdGUgbmV4dEF0dGVtcHRUaW1lID0gMFxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgb3B0aW9uczogQ2lyY3VpdEJyZWFrZXJPcHRpb25zKSB7fVxuXG4gIGFzeW5jIGV4ZWN1dGU8VD4ob3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT09ICdPUEVOJykge1xuICAgICAgaWYgKERhdGUubm93KCkgPCB0aGlzLm5leHRBdHRlbXB0VGltZSkge1xuICAgICAgICB0aHJvdyBuZXcgTm9uUmV0cnlhYmxlRXJyb3IoJ0NpcmN1aXQgYnJlYWtlciBpcyBPUEVOJylcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUgPSAnSEFMRl9PUEVOJ1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xuICAgICAgICBvcGVyYXRpb24oKSxcbiAgICAgICAgbmV3IFByb21pc2U8bmV2ZXI+KChfLCByZWplY3QpID0+XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKCdDaXJjdWl0IGJyZWFrZXIgdGltZW91dCcpKSwgdGhpcy5vcHRpb25zLnRpbWVvdXRNcylcbiAgICAgICAgKVxuICAgICAgXSlcblxuICAgICAgdGhpcy5vblN1Y2Nlc3MoKVxuICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLm9uRmFpbHVyZSgpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25TdWNjZXNzKCkge1xuICAgIHRoaXMuZmFpbHVyZUNvdW50ID0gMFxuICAgIHRoaXMuc3RhdGUgPSAnQ0xPU0VEJ1xuICB9XG5cbiAgcHJpdmF0ZSBvbkZhaWx1cmUoKSB7XG4gICAgdGhpcy5mYWlsdXJlQ291bnQrK1xuICAgIHRoaXMubGFzdEZhaWx1cmVUaW1lID0gRGF0ZS5ub3coKVxuXG4gICAgaWYgKHRoaXMuZmFpbHVyZUNvdW50ID49IHRoaXMub3B0aW9ucy5mYWlsdXJlVGhyZXNob2xkKSB7XG4gICAgICB0aGlzLnN0YXRlID0gJ09QRU4nXG4gICAgICB0aGlzLm5leHRBdHRlbXB0VGltZSA9IERhdGUubm93KCkgKyB0aGlzLm9wdGlvbnMucmVjb3ZlckFmdGVyTXNcbiAgICB9XG4gIH1cblxuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICBmYWlsdXJlQ291bnQ6IHRoaXMuZmFpbHVyZUNvdW50LFxuICAgICAgbmV4dEF0dGVtcHRUaW1lOiB0aGlzLm5leHRBdHRlbXB0VGltZVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEhUVFAgcmVxdWVzdCB3aXRoIHJldHJ5IGFuZCBjaXJjdWl0IGJyZWFrZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2lsaWVudEZldGNoKFxuICB1cmw6IHN0cmluZyxcbiAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSxcbiAgcmV0cnlPcHRpb25zOiBQYXJ0aWFsPFJldHJ5T3B0aW9ucz4gPSB7fVxuKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICByZXR1cm4gcmV0cnlXaXRoQmFja29mZihcbiAgICBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMzAwMDApLCAvLyAzMCBzZWNvbmQgdGltZW91dFxuICAgICAgfSlcblxuICAgICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaW5kaWNhdGVzIGEgcmV0cnlhYmxlIGVycm9yXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDUwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICB0aHJvdyBuZXcgUmV0cnlhYmxlRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgTm9uUmV0cnlhYmxlRXJyb3IoYEhUVFAgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfSxcbiAgICB7XG4gICAgICBtYXhBdHRlbXB0czogMyxcbiAgICAgIGJhc2VEZWxheU1zOiAxMDAwLFxuICAgICAgcmV0cnlDb25kaXRpb246IChlcnJvcikgPT5cbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBSZXRyeWFibGVFcnJvciB8fFxuICAgICAgICBlcnJvci5uYW1lID09PSAnVHlwZUVycm9yJyB8fCAvLyBOZXR3b3JrIGVycm9yc1xuICAgICAgICBlcnJvci5uYW1lID09PSAnVGltZW91dEVycm9yJyxcbiAgICAgIG9uUmV0cnk6IChhdHRlbXB0LCBlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZldGNoIHJldHJ5ICR7YXR0ZW1wdH0gZm9yICR7dXJsfTpgLCBlcnJvci5tZXNzYWdlKVxuICAgICAgfSxcbiAgICAgIC4uLnJldHJ5T3B0aW9uc1xuICAgIH1cbiAgKVxufVxuXG4vKipcbiAqIERhdGFiYXNlIG9wZXJhdGlvbiB3cmFwcGVyIHdpdGggcmV0cnkgbG9naWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2lsaWVudERiT3BlcmF0aW9uPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIG9wZXJhdGlvbk5hbWU6IHN0cmluZyA9ICdEYXRhYmFzZSBvcGVyYXRpb24nXG4pOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHJldHJ5V2l0aEJhY2tvZmYoXG4gICAgb3BlcmF0aW9uLFxuICAgIHtcbiAgICAgIG1heEF0dGVtcHRzOiAzLFxuICAgICAgYmFzZURlbGF5TXM6IDUwMCxcbiAgICAgIG1heERlbGF5TXM6IDUwMDAsXG4gICAgICByZXRyeUNvbmRpdGlvbjogKGVycm9yKSA9PiB7XG4gICAgICAgIC8vIFJldHJ5IG9uIGNvbm5lY3Rpb24gaXNzdWVzLCB0aW1lb3V0cywgYW5kIHRlbXBvcmFyeSBmYWlsdXJlc1xuICAgICAgICBjb25zdCByZXRyeWFibGVFcnJvcnMgPSBbXG4gICAgICAgICAgJ1BHUlNUMzAxJywgLy8gQ29ubmVjdGlvbiB0aW1lb3V0XG4gICAgICAgICAgJ1BHUlNUMzAyJywgLy8gQ29ubmVjdGlvbiByZWZ1c2VkXG4gICAgICAgICAgJzA4MDAxJywgICAgLy8gU1FMIGNvbm5lY3Rpb24gZXJyb3JcbiAgICAgICAgICAnMDgwMDYnLCAgICAvLyBDb25uZWN0aW9uIGZhaWx1cmVcbiAgICAgICAgICAnNTMzMDAnLCAgICAvLyBUb28gbWFueSBjb25uZWN0aW9uc1xuICAgICAgICAgICc0MDAwMScsICAgIC8vIFNlcmlhbGl6YXRpb24gZmFpbHVyZVxuICAgICAgICBdXG5cbiAgICAgICAgcmV0dXJuIHJldHJ5YWJsZUVycm9ycy5zb21lKGNvZGUgPT5cbiAgICAgICAgICBlcnJvcj8uY29kZSA9PT0gY29kZSB8fFxuICAgICAgICAgIGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcyhjb2RlKSB8fFxuICAgICAgICAgIGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnY29ubmVjdGlvbicpIHx8XG4gICAgICAgICAgZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCd0aW1lb3V0JylcbiAgICAgICAgKVxuICAgICAgfSxcbiAgICAgIG9uUmV0cnk6IChhdHRlbXB0LCBlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oYCR7b3BlcmF0aW9uTmFtZX0gcmV0cnkgJHthdHRlbXB0fTpgLCBlcnJvci5tZXNzYWdlKVxuICAgICAgfVxuICAgIH1cbiAgKVxufVxuXG4vKipcbiAqIFN0b3JhZ2Ugb3BlcmF0aW9uIHdyYXBwZXIgd2l0aCByZXRyeSBsb2dpY1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVzaWxpZW50U3RvcmFnZU9wZXJhdGlvbjxUPihcbiAgb3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LFxuICBvcGVyYXRpb25OYW1lOiBzdHJpbmcgPSAnU3RvcmFnZSBvcGVyYXRpb24nXG4pOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHJldHJ5V2l0aEJhY2tvZmYoXG4gICAgb3BlcmF0aW9uLFxuICAgIHtcbiAgICAgIG1heEF0dGVtcHRzOiA1LFxuICAgICAgYmFzZURlbGF5TXM6IDIwMDAsXG4gICAgICBtYXhEZWxheU1zOiAzMDAwMCxcbiAgICAgIHJldHJ5Q29uZGl0aW9uOiAoZXJyb3IpID0+IHtcbiAgICAgICAgLy8gUmV0cnkgb24gbmV0d29yayBlcnJvcnMsIHJhdGUgbGltaXRzLCBhbmQgdGVtcG9yYXJ5IHN0b3JhZ2UgaXNzdWVzXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZXJyb3I/Lm5hbWUgPT09ICdUeXBlRXJyb3InIHx8IC8vIE5ldHdvcmsgZXJyb3JzXG4gICAgICAgICAgZXJyb3I/LnN0YXR1cyA9PT0gNDI5IHx8ICAgICAgIC8vIFJhdGUgbGltaXRlZFxuICAgICAgICAgIGVycm9yPy5zdGF0dXMgPT09IDUwMCB8fCAgICAgICAvLyBTZXJ2ZXIgZXJyb3JzXG4gICAgICAgICAgZXJyb3I/LnN0YXR1cyA9PT0gNTAyIHx8ICAgICAgIC8vIEJhZCBnYXRld2F5XG4gICAgICAgICAgZXJyb3I/LnN0YXR1cyA9PT0gNTAzIHx8ICAgICAgIC8vIFNlcnZpY2UgdW5hdmFpbGFibGVcbiAgICAgICAgICBlcnJvcj8uc3RhdHVzID09PSA1MDQgfHwgICAgICAgLy8gR2F0ZXdheSB0aW1lb3V0XG4gICAgICAgICAgZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCduZXR3b3JrJykgfHxcbiAgICAgICAgICBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fFxuICAgICAgICAgIGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnY29ubmVjdGlvbicpXG4gICAgICAgIClcbiAgICAgIH0sXG4gICAgICBvblJldHJ5OiAoYXR0ZW1wdCwgZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKGAke29wZXJhdGlvbk5hbWV9IHJldHJ5ICR7YXR0ZW1wdH06YCwgZXJyb3IubWVzc2FnZSlcbiAgICAgIH1cbiAgICB9XG4gIClcbn1cblxuLyoqXG4gKiBFcnJvciBjbGFzc2lmaWNhdGlvbiB1dGlsaXR5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFzc2lmeUVycm9yKGVycm9yOiBhbnkpOiB7XG4gIHR5cGU6ICduZXR3b3JrJyB8ICdhdXRoJyB8ICd2YWxpZGF0aW9uJyB8ICdzZXJ2ZXInIHwgJ3N0b3JhZ2UnIHwgJ3Vua25vd24nXG4gIGlzUmV0cnlhYmxlOiBib29sZWFuXG4gIHVzZXJNZXNzYWdlOiBzdHJpbmdcbn0ge1xuICAvLyBOZXR3b3JrIGVycm9yc1xuICBpZiAoZXJyb3I/Lm5hbWUgPT09ICdUeXBlRXJyb3InIHx8IGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnZmV0Y2gnKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnbmV0d29yaycsXG4gICAgICBpc1JldHJ5YWJsZTogdHJ1ZSxcbiAgICAgIHVzZXJNZXNzYWdlOiAnTmV0d29yayBjb25uZWN0aW9uIGVycm9yLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgYWdhaW4uJ1xuICAgIH1cbiAgfVxuXG4gIC8vIEF1dGhlbnRpY2F0aW9uIGVycm9yc1xuICBpZiAoZXJyb3I/LnN0YXR1cyA9PT0gNDAxIHx8IGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygndW5hdXRob3JpemVkJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2F1dGgnLFxuICAgICAgaXNSZXRyeWFibGU6IGZhbHNlLFxuICAgICAgdXNlck1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQuIFBsZWFzZSBsb2cgaW4gYWdhaW4uJ1xuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXRpb24gZXJyb3JzXG4gIGlmIChlcnJvcj8uc3RhdHVzID09PSA0MDAgfHwgZXJyb3I/LnN0YXR1cyA9PT0gNDIyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd2YWxpZGF0aW9uJyxcbiAgICAgIGlzUmV0cnlhYmxlOiBmYWxzZSxcbiAgICAgIHVzZXJNZXNzYWdlOiAnSW52YWxpZCByZXF1ZXN0LiBQbGVhc2UgY2hlY2sgeW91ciBpbnB1dCBhbmQgdHJ5IGFnYWluLidcbiAgICB9XG4gIH1cblxuICAvLyBTZXJ2ZXIgZXJyb3JzXG4gIGlmIChlcnJvcj8uc3RhdHVzID49IDUwMCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnc2VydmVyJyxcbiAgICAgIGlzUmV0cnlhYmxlOiB0cnVlLFxuICAgICAgdXNlck1lc3NhZ2U6ICdTZXJ2ZXIgZXJyb3IuIFdlXFwncmUgd29ya2luZyB0byBmaXggdGhpcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nXG4gICAgfVxuICB9XG5cbiAgLy8gU3RvcmFnZSBlcnJvcnNcbiAgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnc3RvcmFnZScpIHx8IGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygndXBsb2FkJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3N0b3JhZ2UnLFxuICAgICAgaXNSZXRyeWFibGU6IHRydWUsXG4gICAgICB1c2VyTWVzc2FnZTogJ1N0b3JhZ2Ugb3BlcmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAndW5rbm93bicsXG4gICAgaXNSZXRyeWFibGU6IHRydWUsXG4gICAgdXNlck1lc3NhZ2U6ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLidcbiAgfVxufVxuXG4vKipcbiAqIEdsb2JhbCBlcnJvciBoYW5kbGVyIGZvciBjb25zaXN0ZW50IGVycm9yIHJlcG9ydGluZ1xuICovXG5leHBvcnQgY2xhc3MgRXJyb3JSZXBvcnRlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBFcnJvclJlcG9ydGVyXG4gIHByaXZhdGUgZXJyb3JRdWV1ZTogQXJyYXk8eyBlcnJvcjogYW55OyBjb250ZXh0OiBzdHJpbmc7IHRpbWVzdGFtcDogbnVtYmVyIH0+ID0gW11cblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRXJyb3JSZXBvcnRlciB7XG4gICAgaWYgKCFFcnJvclJlcG9ydGVyLmluc3RhbmNlKSB7XG4gICAgICBFcnJvclJlcG9ydGVyLmluc3RhbmNlID0gbmV3IEVycm9yUmVwb3J0ZXIoKVxuICAgIH1cbiAgICByZXR1cm4gRXJyb3JSZXBvcnRlci5pbnN0YW5jZVxuICB9XG5cbiAgcmVwb3J0RXJyb3IoZXJyb3I6IGFueSwgY29udGV4dDogc3RyaW5nID0gJ1Vua25vd24nKSB7XG4gICAgY29uc3QgZXJyb3JFbnRyeSA9IHtcbiAgICAgIGVycm9yLFxuICAgICAgY29udGV4dCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH1cblxuICAgIHRoaXMuZXJyb3JRdWV1ZS5wdXNoKGVycm9yRW50cnkpXG5cbiAgICAvLyBLZWVwIG9ubHkgcmVjZW50IGVycm9ycyAobGFzdCAxMDApXG4gICAgaWYgKHRoaXMuZXJyb3JRdWV1ZS5sZW5ndGggPiAxMDApIHtcbiAgICAgIHRoaXMuZXJyb3JRdWV1ZSA9IHRoaXMuZXJyb3JRdWV1ZS5zbGljZSgtMTAwKVxuICAgIH1cblxuICAgIC8vIExvZyBlcnJvclxuICAgIGNvbnNvbGUuZXJyb3IoYFske2NvbnRleHR9XWAsIGVycm9yKVxuXG4gICAgLy8gSW4gcHJvZHVjdGlvbiwgeW91IG1pZ2h0IHdhbnQgdG8gc2VuZCB0byBhbiBlcnJvciB0cmFja2luZyBzZXJ2aWNlXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRoaXMuc2VuZFRvRXJyb3JUcmFja2luZyhlcnJvckVudHJ5KVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFRvRXJyb3JUcmFja2luZyhlcnJvckVudHJ5OiBhbnkpIHtcbiAgICAvLyBJbXBsZW1lbnRhdGlvbiBmb3IgZXJyb3IgdHJhY2tpbmcgc2VydmljZSAoU2VudHJ5LCBldGMuKVxuICAgIC8vIFRoaXMgaXMgYSBwbGFjZWhvbGRlclxuICB9XG5cbiAgZ2V0UmVjZW50RXJyb3JzKGxpbWl0OiBudW1iZXIgPSAxMCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yUXVldWUuc2xpY2UoLWxpbWl0KVxuICB9XG5cbiAgY2xlYXJFcnJvcnMoKSB7XG4gICAgdGhpcy5lcnJvclF1ZXVlID0gW11cbiAgfVxufVxuXG4vKipcbiAqIEdyYWNlZnVsIGRlZ3JhZGF0aW9uIHV0aWxpdHlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhGYWxsYmFjazxUPihcbiAgcHJpbWFyeU9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgZmFsbGJhY2tPcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIGZhbGxiYWNrQ29uZGl0aW9uOiAoZXJyb3I6IGFueSkgPT4gYm9vbGVhbiA9ICgpID0+IHRydWVcbik6IFByb21pc2U8VD4ge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBwcmltYXJ5T3BlcmF0aW9uKClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZmFsbGJhY2tDb25kaXRpb24oZXJyb3IpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1ByaW1hcnkgb3BlcmF0aW9uIGZhaWxlZCwgdXNpbmcgZmFsbGJhY2s6JywgZXJyb3IubWVzc2FnZSlcbiAgICAgIHJldHVybiBhd2FpdCBmYWxsYmFja09wZXJhdGlvbigpXG4gICAgfVxuICAgIHRocm93IGVycm9yXG4gIH1cbn0iXSwibmFtZXMiOlsiUmV0cnlhYmxlRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIm9yaWdpbmFsRXJyb3IiLCJuYW1lIiwiTm9uUmV0cnlhYmxlRXJyb3IiLCJyZXRyeVdpdGhCYWNrb2ZmIiwib3BlcmF0aW9uIiwib3B0aW9ucyIsImNvbmZpZyIsIm1heEF0dGVtcHRzIiwiYmFzZURlbGF5TXMiLCJtYXhEZWxheU1zIiwiYmFja29mZk11bHRpcGxpZXIiLCJqaXR0ZXJNcyIsInJldHJ5Q29uZGl0aW9uIiwiZXJyb3IiLCJsYXN0RXJyb3IiLCJhdHRlbXB0IiwicmVzdWx0IiwiZXhwb25lbnRpYWxEZWxheSIsIk1hdGgiLCJtaW4iLCJwb3ciLCJqaXR0ZXIiLCJyYW5kb20iLCJ0b3RhbERlbGF5IiwiY29uc29sZSIsIndhcm4iLCJyb3VuZCIsIm9uUmV0cnkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJDaXJjdWl0QnJlYWtlciIsInN0YXRlIiwiZmFpbHVyZUNvdW50IiwibGFzdEZhaWx1cmVUaW1lIiwibmV4dEF0dGVtcHRUaW1lIiwiZXhlY3V0ZSIsIkRhdGUiLCJub3ciLCJyYWNlIiwiXyIsInJlamVjdCIsInRpbWVvdXRNcyIsIm9uU3VjY2VzcyIsIm9uRmFpbHVyZSIsImZhaWx1cmVUaHJlc2hvbGQiLCJyZWNvdmVyQWZ0ZXJNcyIsImdldFN0YXRlIiwicmVzaWxpZW50RmV0Y2giLCJ1cmwiLCJyZXRyeU9wdGlvbnMiLCJyZXNwb25zZSIsImZldGNoIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9rIiwicmVzaWxpZW50RGJPcGVyYXRpb24iLCJvcGVyYXRpb25OYW1lIiwicmV0cnlhYmxlRXJyb3JzIiwic29tZSIsImNvZGUiLCJpbmNsdWRlcyIsInJlc2lsaWVudFN0b3JhZ2VPcGVyYXRpb24iLCJjbGFzc2lmeUVycm9yIiwidHlwZSIsImlzUmV0cnlhYmxlIiwidXNlck1lc3NhZ2UiLCJFcnJvclJlcG9ydGVyIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInJlcG9ydEVycm9yIiwiY29udGV4dCIsImVycm9yRW50cnkiLCJ0aW1lc3RhbXAiLCJlcnJvclF1ZXVlIiwicHVzaCIsImxlbmd0aCIsInNsaWNlIiwicHJvY2VzcyIsInNlbmRUb0Vycm9yVHJhY2tpbmciLCJnZXRSZWNlbnRFcnJvcnMiLCJsaW1pdCIsImNsZWFyRXJyb3JzIiwid2l0aEZhbGxiYWNrIiwicHJpbWFyeU9wZXJhdGlvbiIsImZhbGxiYWNrT3BlcmF0aW9uIiwiZmFsbGJhY2tDb25kaXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/utils/error-handling.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tr46","vendor-chunks/next-auth","vendor-chunks/whatwg-url","vendor-chunks/@babel","vendor-chunks/webidl-conversions","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/uuid","vendor-chunks/@panva","vendor-chunks/oidc-token-hash"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser%2Fvideos%2Froute&page=%2Fapi%2Fuser%2Fvideos%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser%2Fvideos%2Froute.ts&appDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjacob%2FDesktop%2Fvidfab&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();